{"version":3,"file":"js/index.ddf15147.js","mappings":"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E,UAAWe,GAASG,KACpBhB,WAAYa,GAASG,KACrBtB,QAASmB,GAASG,KAClBpB,SAAUiB,GAASG,MAErB9F,KAAM,CACJoE,KAAMuB,GAASG,KACfhH,KAAM6G,GAASG,KACf5G,MAAOyG,GAASG,KAChB5B,GAAIyB,GAASG,MAEf7F,KAAM,CACJ2E,UAAWe,GAASE,MACpBf,WAAYa,GAASE,MACrBrB,QAASmB,GAASE,MAClBnB,SAAUiB,GAASE,MACnBzB,KAAMuB,GAASE,MACf/G,KAAM6G,GAASE,MACf3G,MAAOyG,GAASE,MAChB3B,GAAIyB,GAASE,OAEf3F,SAAU,CACR0E,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrB/G,KAAM6G,GAASE,MACf3G,MAAOyG,GAASE,MAChB3B,GAAIyB,GAASE,OAEf1F,UAAW,CACTyE,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrB/G,KAAM6G,GAASE,MACf3G,MAAOyG,GAASE,MAChB3B,GAAIyB,GAASE,OAEfzF,WAAY,CACVwE,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrB/G,KAAM6G,GAASE,MACf3G,MAAOyG,GAASE,MAChB3B,GAAIyB,GAASE,OAEfxF,WAAY,CACVuE,UAAWe,GAASE,MACpBzB,KAAMuB,GAASE,MACff,WAAYa,GAASE,MACrB/G,KAAM6G,GAASE,MACf3G,MAAOyG,GAASE,MAChB3B,GAAIyB,GAASE,OAEfvF,MAAO,CACLsE,UAAWe,GAASG,KACpBhB,WAAYa,GAASG,KACrBtB,QAASmB,GAASG,KAClBpB,SAAUiB,GAASG,KACnB1B,KAAMuB,GAASE,MACf/G,KAAM6G,GAASE,MACf3G,MAAOyG,GAASE,MAChB3B,GAAIyB,GAASE,OAEftF,OAAQ,CACN6D,KAAMuB,GAASG,KACfhH,KAAM6G,GAASG,KACf5G,MAAOyG,GAASG,KAChB5B,GAAIyB,GAASG,KACblB,UAAWe,GAASE,MACpBf,WAAYa,GAASE,MACrBrB,QAASmB,GAASE,M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","sources":["webpack://electron-shogi/./src/App.vue?b380","webpack://electron-shogi/./src/components/main/StandardLayout.vue?8292","webpack://electron-shogi/./src/components/main/BoardPane.vue?2cd5","webpack://electron-shogi/./src/components/primitive/BoardView.vue?1e10","webpack://electron-shogi/./src/shogi/color.ts","webpack://electron-shogi/./src/shogi/piece.ts","webpack://electron-shogi/./src/shogi/direction.ts","webpack://electron-shogi/./src/shogi/square.ts","webpack://electron-shogi/./src/shogi/move.ts","webpack://electron-shogi/./src/shogi/board.ts","webpack://electron-shogi/./src/shogi/hand.ts","webpack://electron-shogi/./src/shogi/position.ts","webpack://electron-shogi/./src/shogi/record.ts","webpack://electron-shogi/./src/helpers/time.ts","webpack://electron-shogi/./src/helpers/string.ts","webpack://electron-shogi/./src/shogi/kakinoki.ts","webpack://electron-shogi/./src/shogi/csa.ts","webpack://electron-shogi/./src/shogi/detect.ts","webpack://electron-shogi/./src/assets/preload.ts","webpack://electron-shogi/./src/components/primitive/Types.ts","webpack://electron-shogi/./src/components/primitive/BoardLayout.ts","webpack://electron-shogi/./src/components/primitive/BoardView.vue?53c8","webpack://electron-shogi/./src/components/primitive/BoardView.vue","webpack://electron-shogi/./src/uri.ts","webpack://electron-shogi/./src/settings/usi.ts","webpack://electron-shogi/./src/helpers/datetime.ts","webpack://electron-shogi/./src/store/record.ts","webpack://electron-shogi/./src/settings/app.ts","webpack://electron-shogi/./src/ipc/log.ts","webpack://electron-shogi/./src/ipc/web.ts","webpack://electron-shogi/./src/store/score.ts","webpack://electron-shogi/./src/settings/analysis.ts","webpack://electron-shogi/./src/settings/game.ts","webpack://electron-shogi/./src/settings/research.ts","webpack://electron-shogi/./src/ipc/api.ts","webpack://electron-shogi/./src/audio/index.ts","webpack://electron-shogi/./src/players/player.ts","webpack://electron-shogi/./src/store/game.ts","webpack://electron-shogi/./src/ipc/usi.ts","webpack://electron-shogi/./src/store/state.ts","webpack://electron-shogi/./src/helpers/path.ts","webpack://electron-shogi/./src/store/bussy.ts","webpack://electron-shogi/./src/store/usi.ts","webpack://electron-shogi/./src/store/message.ts","webpack://electron-shogi/./src/store/error.ts","webpack://electron-shogi/./src/players/usi.ts","webpack://electron-shogi/./src/store/analysis.ts","webpack://electron-shogi/./src/ipc/csa.ts","webpack://electron-shogi/./src/settings/csa.ts","webpack://electron-shogi/./src/store/csa.ts","webpack://electron-shogi/./src/store/clock.ts","webpack://electron-shogi/./src/players/human.ts","webpack://electron-shogi/./src/players/builder.ts","webpack://electron-shogi/./src/store/index.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?e66d","webpack://electron-shogi/./src/assets/icons.ts","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue?3913","webpack://electron-shogi/./src/components/primitive/ButtonIcon.vue","webpack://electron-shogi/./src/components/menu/GameMenu.vue?dfce","webpack://electron-shogi/./src/helpers/dialog.ts","webpack://electron-shogi/./src/components/menu/GameMenu.vue?2ffa","webpack://electron-shogi/./src/components/menu/GameMenu.vue","webpack://electron-shogi/./src/components/menu/FileMenu.vue?afd0","webpack://electron-shogi/./src/components/menu/FileMenu.vue?c6ef","webpack://electron-shogi/./src/components/menu/FileMenu.vue","webpack://electron-shogi/./src/components/menu/InitialPositionMenu.vue?e54f","webpack://electron-shogi/./src/components/menu/InitialPositionMenu.vue?1c5e","webpack://electron-shogi/./src/components/menu/InitialPositionMenu.vue","webpack://electron-shogi/./src/components/main/BoardPane.vue?7d48","webpack://electron-shogi/./src/components/main/BoardPane.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?973a","webpack://electron-shogi/./src/components/primitive/RecordView.vue?7f03","webpack://electron-shogi/./src/components/primitive/RecordView.vue?7f9e","webpack://electron-shogi/./src/components/primitive/RecordView.vue","webpack://electron-shogi/./src/components/main/RecordPane.vue?61e0","webpack://electron-shogi/./src/components/main/RecordPane.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?096d","webpack://electron-shogi/./src/components/tab/RecordComment.vue?f244","webpack://electron-shogi/./src/components/tab/RecordComment.vue?7802","webpack://electron-shogi/./src/components/tab/RecordComment.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?8711","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?2ccd","webpack://electron-shogi/./src/components/dialog/PVPreviewDialog.vue?39b9","webpack://electron-shogi/./src/components/dialog/PVPreviewDialog.vue?64c9","webpack://electron-shogi/./src/components/dialog/PVPreviewDialog.vue","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue?4973","webpack://electron-shogi/./src/components/tab/EngineAnalyticsElement.vue","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue?6e00","webpack://electron-shogi/./src/components/tab/EngineAnalytics.vue","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?aefb","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue?37e9","webpack://electron-shogi/./src/components/tab/EvaluationChart.vue","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?7d22","webpack://electron-shogi/./src/components/tab/RecordInfo.vue?8fcb","webpack://electron-shogi/./src/components/tab/RecordInfo.vue","webpack://electron-shogi/./src/components/main/TabPane.vue?c156","webpack://electron-shogi/./src/components/main/TabPane.vue","webpack://electron-shogi/./src/components/main/StandardLayout.vue?15bf","webpack://electron-shogi/./src/components/main/StandardLayout.vue","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?3ec1","webpack://electron-shogi/./src/helpers/form.ts","webpack://electron-shogi/./src/components/dialog/PlayerSelector.vue?1cf4","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?3829","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue?6142","webpack://electron-shogi/./src/components/dialog/USIEngineOptionDialog.vue","webpack://electron-shogi/./src/components/dialog/PlayerSelector.vue?3730","webpack://electron-shogi/./src/components/dialog/PlayerSelector.vue","webpack://electron-shogi/./src/components/dialog/GameDialog.vue?4613","webpack://electron-shogi/./src/components/dialog/GameDialog.vue","webpack://electron-shogi/./src/components/dialog/CSAGameDialog.vue?7fca","webpack://electron-shogi/./src/components/dialog/CSAGameDialog.vue?27e6","webpack://electron-shogi/./src/components/dialog/CSAGameDialog.vue","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?d8b1","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue?110e","webpack://electron-shogi/./src/components/dialog/ResearchDialog.vue","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?26ab","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue?449c","webpack://electron-shogi/./src/components/dialog/USIEngineManagementDialog.vue","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?f570","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue?12ff","webpack://electron-shogi/./src/components/dialog/AppSettingDialog.vue","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?7fc2","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue?66a0","webpack://electron-shogi/./src/components/dialog/PasteDialog.vue","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?cbfa","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue?f614","webpack://electron-shogi/./src/components/dialog/BussyMessage.vue","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?a5a2","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue?8006","webpack://electron-shogi/./src/components/dialog/ConfirmDialog.vue","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?4924","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue?f9a8","webpack://electron-shogi/./src/components/dialog/InfoMessage.vue","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?8897","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue?13c3","webpack://electron-shogi/./src/components/dialog/ErrorMessage.vue","webpack://electron-shogi/./src/helpers/key.ts","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue?ab00","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue?de87","webpack://electron-shogi/./src/components/dialog/AnalysisDialog.vue","webpack://electron-shogi/./src/components/dialog/CSAGameReadyDialog.vue?7ed7","webpack://electron-shogi/./src/components/dialog/CSAGameReadyDialog.vue?0c89","webpack://electron-shogi/./src/components/dialog/CSAGameReadyDialog.vue","webpack://electron-shogi/./src/App.vue?847a","webpack://electron-shogi/./src/App.vue","webpack://electron-shogi/./src/ipc/menu.ts","webpack://electron-shogi/./src/ipc/setup.ts","webpack://electron-shogi/./src/main.ts","webpack://electron-shogi/webpack/bootstrap","webpack://electron-shogi/webpack/runtime/chunk loaded","webpack://electron-shogi/webpack/runtime/compat get default export","webpack://electron-shogi/webpack/runtime/define property getters","webpack://electron-shogi/webpack/runtime/global","webpack://electron-shogi/webpack/runtime/hasOwnProperty shorthand","webpack://electron-shogi/webpack/runtime/jsonp chunk loading","webpack://electron-shogi/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_StandardLayout = _resolveComponent(\"StandardLayout\")!\n  const _component_GameDialog = _resolveComponent(\"GameDialog\")!\n  const _component_CSAGameDialog = _resolveComponent(\"CSAGameDialog\")!\n  const _component_ResearchDialog = _resolveComponent(\"ResearchDialog\")!\n  const _component_AnalysisDialog = _resolveComponent(\"AnalysisDialog\")!\n  const _component_USIEngineManagementDialog = _resolveComponent(\"USIEngineManagementDialog\")!\n  const _component_AppSettingDialog = _resolveComponent(\"AppSettingDialog\")!\n  const _component_PasteDialog = _resolveComponent(\"PasteDialog\")!\n  const _component_BussyMessage = _resolveComponent(\"BussyMessage\")!\n  const _component_ConfirmDialog = _resolveComponent(\"ConfirmDialog\")!\n  const _component_CSAGameReadyDialog = _resolveComponent(\"CSAGameReadyDialog\")!\n  const _component_InfoMessage = _resolveComponent(\"InfoMessage\")!\n  const _component_ErrorMessage = _resolveComponent(\"ErrorMessage\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"root\", _ctx.thema])\n  }, [\n    _createVNode(_component_StandardLayout, { class: \"main\" }),\n    (_ctx.dialogVisibilities.game)\n      ? (_openBlock(), _createBlock(_component_GameDialog, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.csaGame)\n      ? (_openBlock(), _createBlock(_component_CSAGameDialog, { key: 1 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.research)\n      ? (_openBlock(), _createBlock(_component_ResearchDialog, { key: 2 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.analysis)\n      ? (_openBlock(), _createBlock(_component_AnalysisDialog, { key: 3 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.usiEngineSetting)\n      ? (_openBlock(), _createBlock(_component_USIEngineManagementDialog, { key: 4 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.appSetting)\n      ? (_openBlock(), _createBlock(_component_AppSettingDialog, { key: 5 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.paste)\n      ? (_openBlock(), _createBlock(_component_PasteDialog, { key: 6 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.bussy)\n      ? (_openBlock(), _createBlock(_component_BussyMessage, { key: 7 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.confirm)\n      ? (_openBlock(), _createBlock(_component_ConfirmDialog, { key: 8 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.dialogVisibilities.csaGameReady)\n      ? (_openBlock(), _createBlock(_component_CSAGameReadyDialog, { key: 9 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasMessage)\n      ? (_openBlock(), _createBlock(_component_InfoMessage, { key: 10 }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.hasErrors)\n      ? (_openBlock(), _createBlock(_component_ErrorMessage, { key: 11 }))\n      : _createCommentVNode(\"\", true)\n  ], 2))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c97084ae\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main\" }\nconst _hoisted_2 = { class: \"top-pane\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_BoardPane = _resolveComponent(\"BoardPane\")!\n  const _component_RecordPane = _resolveComponent(\"RecordPane\")!\n  const _component_TabPane = _resolveComponent(\"TabPane\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_BoardPane, {\n          class: \"top-left-pane\",\n          \"max-size\": _ctx.boardPaneMaxSize,\n          onResize: _ctx.onBoardPaneResize\n        }, null, 8, [\"max-size\", \"onResize\"]),\n        _createVNode(_component_RecordPane, {\n          class: \"top-right-pane\",\n          style: _normalizeStyle(_ctx.recordPaneStyle)\n        }, null, 8, [\"style\"])\n      ]),\n      _createVNode(_component_TabPane, {\n        class: \"bottom-pane\",\n        size: _ctx.bottomPaneSize\n      }, null, 8, [\"size\"])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-58cfebfb\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"control top\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 対局 \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 対局中断 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" 勝ち宣言 \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 投了 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 検討 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 検討終了 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 解析 \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 解析中断 \")\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" 局面編集 \")\nconst _hoisted_11 = /*#__PURE__*/_createTextVNode(\" 局面編集終了 \")\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\" 手番変更 \")\nconst _hoisted_13 = { class: \"control bottom\" }\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" アプリ設定 \")\nconst _hoisted_15 = [\"disabled\"]\nconst _hoisted_16 = /*#__PURE__*/_createTextVNode(\" エンジン設定 \")\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\" 盤面反転 \")\nconst _hoisted_18 = /*#__PURE__*/_createTextVNode(\" ファイル \")\nconst _hoisted_19 = [\"disabled\"]\nconst _hoisted_20 = /*#__PURE__*/_createTextVNode(\" 指し手削除 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_BoardView = _resolveComponent(\"BoardView\")!\n  const _component_GameMenu = _resolveComponent(\"GameMenu\")!\n  const _component_FileMenu = _resolveComponent(\"FileMenu\")!\n  const _component_InitialPositionMenu = _resolveComponent(\"InitialPositionMenu\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(_component_BoardView, {\n      \"piece-image-type\": _ctx.appSetting.pieceImage,\n      \"board-image-type\": _ctx.appSetting.boardImage,\n      \"board-label-type\": _ctx.appSetting.boardLabelType,\n      \"max-size\": _ctx.maxSize,\n      position: _ctx.position,\n      \"last-move\": _ctx.lastMove,\n      flip: _ctx.appSetting.boardFlipping,\n      \"allow-move\": _ctx.allowMove,\n      \"allow-edit\": _ctx.allowEdit,\n      \"black-player-name\": _ctx.blackPlayerName,\n      \"white-player-name\": _ctx.whitePlayerName,\n      \"black-player-time\": _ctx.clock?.black.time,\n      \"black-player-byoyomi\": _ctx.clock?.black.byoyomi,\n      \"white-player-time\": _ctx.clock?.white.time,\n      \"white-player-byoyomi\": _ctx.clock?.white.byoyomi,\n      onResize: _ctx.onResize,\n      onMove: _ctx.onMove,\n      onEdit: _ctx.onEdit\n    }, {\n      \"right-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          (_ctx.controlStates.game)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 0,\n                class: \"control-item\",\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onGame && _ctx.onGame(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.GAME\n                }, null, 8, [\"icon\"]),\n                _hoisted_2\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.stop)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 1,\n                class: \"control-item\",\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStop && _ctx.onStop(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.STOP\n                }, null, 8, [\"icon\"]),\n                _hoisted_3\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.win)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 2,\n                class: \"control-item\",\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onWin && _ctx.onWin(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.CALL\n                }, null, 8, [\"icon\"]),\n                _hoisted_4\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.resign)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 3,\n                class: \"control-item\",\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onResign && _ctx.onResign(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.RESIGN\n                }, null, 8, [\"icon\"]),\n                _hoisted_5\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.research)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 4,\n                class: \"control-item\",\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onResearch && _ctx.onResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.RESEARCH\n                }, null, 8, [\"icon\"]),\n                _hoisted_6\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endResearch)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 5,\n                class: \"control-item\",\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onEndResearch && _ctx.onEndResearch(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.END\n                }, null, 8, [\"icon\"]),\n                _hoisted_7\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.analysis)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 6,\n                class: \"control-item\",\n                onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onAnalysis && _ctx.onAnalysis(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.ANALYSIS\n                }, null, 8, [\"icon\"]),\n                _hoisted_8\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endAnalysis)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 7,\n                class: \"control-item\",\n                onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onEndAnalysis && _ctx.onEndAnalysis(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.STOP\n                }, null, 8, [\"icon\"]),\n                _hoisted_9\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.startEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 8,\n                class: \"control-item\",\n                onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onStartEditPosition && _ctx.onStartEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.EDIT\n                }, null, 8, [\"icon\"]),\n                _hoisted_10\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.endEditPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 9,\n                class: \"control-item\",\n                onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onEndEditPosition && _ctx.onEndEditPosition(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.CHECK\n                }, null, 8, [\"icon\"]),\n                _hoisted_11\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 10,\n                class: \"control-item\",\n                onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onChangeTurn && _ctx.onChangeTurn(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.SWAP\n                }, null, 8, [\"icon\"]),\n                _hoisted_12\n              ]))\n            : _createCommentVNode(\"\", true),\n          (_ctx.controlStates.initPosition)\n            ? (_openBlock(), _createElementBlock(\"button\", {\n                key: 11,\n                class: \"control-item\",\n                onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onInitPosition && _ctx.onInitPosition(...args)))\n              }, \" 局面の初期化 \"))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      \"left-control\": _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onOpenAppSettings && _ctx.onOpenAppSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SETTINGS\n            }, null, 8, [\"icon\"]),\n            _hoisted_14\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            disabled: !_ctx.controlStates.engineSettings,\n            onClick: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_ctx.onOpenEngineSettings && _ctx.onOpenEngineSettings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.ENGINE_SETTINGS\n            }, null, 8, [\"icon\"]),\n            _hoisted_16\n          ], 8, _hoisted_15),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            onClick: _cache[14] || (_cache[14] = \n//@ts-ignore\n(...args) => (_ctx.onFlip && _ctx.onFlip(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.FLIP\n            }, null, 8, [\"icon\"]),\n            _hoisted_17\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            onClick: _cache[15] || (_cache[15] = \n//@ts-ignore\n(...args) => (_ctx.onFileAction && _ctx.onFileAction(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.FILE\n            }, null, 8, [\"icon\"]),\n            _hoisted_18\n          ]),\n          _createElementVNode(\"button\", {\n            class: \"control-item\",\n            disabled: !_ctx.controlStates.removeCurrentMove,\n            onClick: _cache[16] || (_cache[16] = \n//@ts-ignore\n(...args) => (_ctx.onRemoveCurrentMove && _ctx.onRemoveCurrentMove(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.DELETE\n            }, null, 8, [\"icon\"]),\n            _hoisted_20\n          ], 8, _hoisted_19)\n        ])\n      ]),\n      _: 1\n    }, 8, [\"piece-image-type\", \"board-image-type\", \"board-label-type\", \"max-size\", \"position\", \"last-move\", \"flip\", \"allow-move\", \"allow-edit\", \"black-player-name\", \"white-player-name\", \"black-player-time\", \"black-player-byoyomi\", \"white-player-time\", \"white-player-byoyomi\", \"onResize\", \"onMove\", \"onEdit\"]),\n    (_ctx.isGameMenuVisible)\n      ? (_openBlock(), _createBlock(_component_GameMenu, {\n          key: 0,\n          onClose: _cache[17] || (_cache[17] = ($event: any) => (_ctx.isGameMenuVisible = false))\n        }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.isFileMenuVisible)\n      ? (_openBlock(), _createBlock(_component_FileMenu, {\n          key: 1,\n          onClose: _cache[18] || (_cache[18] = ($event: any) => (_ctx.isFileMenuVisible = false))\n        }))\n      : _createCommentVNode(\"\", true),\n    (_ctx.isInitialPositionMenuVisible)\n      ? (_openBlock(), _createBlock(_component_InitialPositionMenu, {\n          key: 2,\n          onClose: _cache[19] || (_cache[19] = ($event: any) => (_ctx.isInitialPositionMenuVisible = false))\n        }))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7f489073\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"src\"]\nconst _hoisted_2 = [\"src\"]\nconst _hoisted_3 = { class: \"player-name-text\" }\nconst _hoisted_4 = { class: \"clock-text\" }\nconst _hoisted_5 = { class: \"player-name-text\" }\nconst _hoisted_6 = { class: \"clock-text\" }\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = [\"onClick\", \"onContextmenu\"]\nconst _hoisted_9 = [\"src\"]\nconst _hoisted_10 = [\"onClick\"]\nconst _hoisted_11 = [\"src\"]\nconst _hoisted_12 = [\"onClick\"]\nconst _hoisted_13 = [\"src\"]\nconst _hoisted_14 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      class: \"frame\",\n      style: _normalizeStyle(_ctx.layout.frame.style),\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.clickFrame()))\n    }, [\n      (_ctx.layout.board.textureImagePath)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"board-texture\",\n            style: _normalizeStyle(_ctx.layout.board.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"board-image\",\n              src: _ctx.layout.board.textureImagePath\n            }, null, 8, _hoisted_1)\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"board-grid\",\n        style: _normalizeStyle(_ctx.layout.board.style)\n      }, [\n        _createElementVNode(\"img\", {\n          class: \"board-image\",\n          src: _ctx.layout.board.gridImagePath\n        }, null, 8, _hoisted_2)\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'black' }]),\n        style: _normalizeStyle(_ctx.layout.blackPlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_3, \"▲\" + _toDisplayString(_ctx.blackPlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.blackPlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.blackClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.blackPlayerTimeText), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"player-name\", { active: _ctx.position.color == 'white' }]),\n        style: _normalizeStyle(_ctx.layout.whitePlayerName.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_5, \"△\" + _toDisplayString(_ctx.whitePlayerName), 1)\n      ], 6),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"clock\", _ctx.whitePlayerTimeSeverity]),\n        style: _normalizeStyle(_ctx.layout.whiteClock.style)\n      }, [\n        _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.whitePlayerTimeText), 1)\n      ], 6),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.backgroundStyle)\n        }, null, 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.piece, (piece) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: piece.id,\n          class: \"piece\",\n          style: _normalizeStyle(piece.style)\n        }, [\n          _createElementVNode(\"img\", {\n            class: \"piece-image\",\n            src: piece.imagePath\n          }, null, 8, _hoisted_7)\n        ], 4))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.labels, (label) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: label.id,\n          class: \"label\",\n          style: _normalizeStyle(label.style)\n        }, _toDisplayString(label.character), 5))\n      }), 128)),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.square, (square) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: square.id,\n          class: \"square\",\n          style: _normalizeStyle(square.style),\n          onClick: ($event: any) => (_ctx.clickSquare($event, square.file, square.rank)),\n          onContextmenu: ($event: any) => (_ctx.clickSquareR($event, square.file, square.rank))\n        }, null, 44, _hoisted_8))\n      }), 128)),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.blackHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_9)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.blackHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, _ctx.Color.BLACK, pointer.type))\n          }, null, 12, _hoisted_10))\n        }), 128))\n      ], 4),\n      _createElementVNode(\"div\", {\n        class: \"hand\",\n        style: _normalizeStyle(_ctx.layout.whiteHand.style)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.backgroundStyle)\n          }, null, 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pieces, (piece) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: piece.id,\n            class: \"piece\",\n            style: _normalizeStyle(piece.style)\n          }, [\n            _createElementVNode(\"img\", {\n              class: \"piece-image\",\n              src: piece.imagePath\n            }, null, 8, _hoisted_11)\n          ], 4))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.layout.whiteHand.pointers, (pointer) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: pointer.id,\n            class: \"hand-pointer\",\n            style: _normalizeStyle(pointer.style),\n            onClick: ($event: any) => (_ctx.clickHand($event, _ctx.Color.WHITE, pointer.type))\n          }, null, 12, _hoisted_12))\n        }), 128))\n      ], 4),\n      (_ctx.layout.promotion)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 1,\n            class: \"promotion-selector\",\n            style: _normalizeStyle(_ctx.layout.promotion.style)\n          }, [\n            _createElementVNode(\"div\", {\n              class: \"select-button promote\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.clickPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.promoteImagePath\n              }, null, 8, _hoisted_13)\n            ]),\n            _createElementVNode(\"div\", {\n              class: \"select-button not-promote\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.clickNotPromote($event)))\n            }, [\n              _createElementVNode(\"img\", {\n                class: \"piece-image\",\n                src: _ctx.layout.promotion.notPromoteImagePath\n              }, null, 8, _hoisted_14)\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", {\n        class: \"turn\",\n        style: _normalizeStyle(_ctx.layout.turn.style)\n      }, \"手番\", 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.left.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"left-control\", {}, undefined, true)\n      ], 4),\n      _createElementVNode(\"div\", {\n        style: _normalizeStyle(_ctx.layout.control.right.style)\n      }, [\n        _renderSlot(_ctx.$slots, \"right-control\", {}, undefined, true)\n      ], 4)\n    ], 4)\n  ]))\n}","export enum Color {\n  BLACK = \"black\",\n  WHITE = \"white\",\n}\n\nexport function reverseColor(color: Color): Color {\n  if (color === Color.BLACK) {\n    return Color.WHITE;\n  }\n  return Color.BLACK;\n}\n\nexport function colorToSFEN(color: Color): string {\n  if (color === Color.BLACK) {\n    return \"b\";\n  }\n  return \"w\";\n}\n\nexport function isValidSFENColor(sfen: string): boolean {\n  return sfen === \"b\" || sfen === \"w\";\n}\n\nexport function parseSFENColor(sfen: string): Color {\n  return sfen === \"b\" ? Color.BLACK : Color.WHITE;\n}\n","import { Color, reverseColor } from \"./color\";\n\nexport enum PieceType {\n  PAWN = \"pawn\",\n  LANCE = \"lance\",\n  KNIGHT = \"knight\",\n  SILVER = \"silver\",\n  GOLD = \"gold\",\n  BISHOP = \"bishop\",\n  ROOK = \"rook\",\n  KING = \"king\",\n  PROM_PAWN = \"promPawn\",\n  PROM_LANCE = \"promLance\",\n  PROM_KNIGHT = \"promKnight\",\n  PROM_SILVER = \"promSilver\",\n  HORSE = \"horse\",\n  DRAGON = \"dragon\",\n}\n\nconst standardPieceNameMap: { [pieceType: string]: string } = {\n  pawn: \"歩\",\n  lance: \"香\",\n  knight: \"桂\",\n  silver: \"銀\",\n  gold: \"金\",\n  bishop: \"角\",\n  rook: \"飛\",\n  king: \"玉\",\n  promPawn: \"と\",\n  promLance: \"成香\",\n  promKnight: \"成桂\",\n  promSilver: \"成銀\",\n  horse: \"馬\",\n  dragon: \"竜\",\n};\n\nexport function standardPieceName(type: PieceType): string {\n  const val = standardPieceNameMap[type];\n  return val || \"\";\n}\n\nexport const pieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n  PieceType.KING,\n  PieceType.PROM_PAWN,\n  PieceType.PROM_LANCE,\n  PieceType.PROM_KNIGHT,\n  PieceType.PROM_SILVER,\n  PieceType.HORSE,\n  PieceType.DRAGON,\n];\n\nexport const handPieceTypes: PieceType[] = [\n  PieceType.PAWN,\n  PieceType.LANCE,\n  PieceType.KNIGHT,\n  PieceType.SILVER,\n  PieceType.GOLD,\n  PieceType.BISHOP,\n  PieceType.ROOK,\n];\n\nconst promotable: { [pieceType: string]: boolean } = {\n  pawn: true,\n  lance: true,\n  knight: true,\n  silver: true,\n  gold: false,\n  bishop: true,\n  rook: true,\n  king: false,\n  promPawn: false,\n  promLance: false,\n  promKnight: false,\n  promSilver: false,\n  horse: false,\n  dragon: false,\n};\n\nconst promoteMap: { [pieceType: string]: PieceType } = {\n  pawn: PieceType.PROM_PAWN,\n  lance: PieceType.PROM_LANCE,\n  knight: PieceType.PROM_KNIGHT,\n  silver: PieceType.PROM_SILVER,\n  bishop: PieceType.HORSE,\n  rook: PieceType.DRAGON,\n};\n\nexport function promotedPieceType(pieceType: PieceType): PieceType {\n  return promoteMap[pieceType] || pieceType;\n}\n\nconst unpromoteMap: { [pieceType: string]: PieceType } = {\n  promPawn: PieceType.PAWN,\n  promLance: PieceType.LANCE,\n  promKnight: PieceType.KNIGHT,\n  promSilver: PieceType.SILVER,\n  horse: PieceType.BISHOP,\n  dragon: PieceType.ROOK,\n};\n\nexport function unpromotedPieceType(pieceType: PieceType): PieceType {\n  return unpromoteMap[pieceType] || pieceType;\n}\n\nconst toSFENCharBlack: { [pieceType: string]: string } = {\n  pawn: \"P\",\n  lance: \"L\",\n  knight: \"N\",\n  silver: \"S\",\n  gold: \"G\",\n  bishop: \"B\",\n  rook: \"R\",\n  king: \"K\",\n  promPawn: \"+P\",\n  promLance: \"+L\",\n  promKnight: \"+N\",\n  promSilver: \"+S\",\n  horse: \"+B\",\n  dragon: \"+R\",\n};\n\nexport function pieceTypeToSFEN(type: PieceType): string {\n  return toSFENCharBlack[type];\n}\n\nconst toSFENCharWhite: { [pieceType: string]: string } = {\n  pawn: \"p\",\n  lance: \"l\",\n  knight: \"n\",\n  silver: \"s\",\n  gold: \"g\",\n  bishop: \"b\",\n  rook: \"r\",\n  king: \"k\",\n  promPawn: \"+p\",\n  promLance: \"+l\",\n  promKnight: \"+n\",\n  promSilver: \"+s\",\n  horse: \"+b\",\n  dragon: \"+r\",\n};\n\nconst sfenCharToTypeMap: { [sfen: string]: PieceType } = {\n  P: PieceType.PAWN,\n  L: PieceType.LANCE,\n  N: PieceType.KNIGHT,\n  S: PieceType.SILVER,\n  G: PieceType.GOLD,\n  B: PieceType.BISHOP,\n  R: PieceType.ROOK,\n  K: PieceType.KING,\n  \"+P\": PieceType.PROM_PAWN,\n  \"+L\": PieceType.PROM_LANCE,\n  \"+N\": PieceType.PROM_KNIGHT,\n  \"+S\": PieceType.PROM_SILVER,\n  \"+B\": PieceType.HORSE,\n  \"+R\": PieceType.DRAGON,\n  p: PieceType.PAWN,\n  l: PieceType.LANCE,\n  n: PieceType.KNIGHT,\n  s: PieceType.SILVER,\n  g: PieceType.GOLD,\n  b: PieceType.BISHOP,\n  r: PieceType.ROOK,\n  k: PieceType.KING,\n  \"+p\": PieceType.PROM_PAWN,\n  \"+l\": PieceType.PROM_LANCE,\n  \"+n\": PieceType.PROM_KNIGHT,\n  \"+s\": PieceType.PROM_SILVER,\n  \"+b\": PieceType.HORSE,\n  \"+r\": PieceType.DRAGON,\n};\n\nconst sfenCharToColorMap: { [sfen: string]: Color } = {\n  P: Color.BLACK,\n  L: Color.BLACK,\n  N: Color.BLACK,\n  S: Color.BLACK,\n  G: Color.BLACK,\n  B: Color.BLACK,\n  R: Color.BLACK,\n  K: Color.BLACK,\n  \"+P\": Color.BLACK,\n  \"+L\": Color.BLACK,\n  \"+N\": Color.BLACK,\n  \"+S\": Color.BLACK,\n  \"+B\": Color.BLACK,\n  \"+R\": Color.BLACK,\n  p: Color.WHITE,\n  l: Color.WHITE,\n  n: Color.WHITE,\n  s: Color.WHITE,\n  g: Color.WHITE,\n  b: Color.WHITE,\n  r: Color.WHITE,\n  k: Color.WHITE,\n  \"+p\": Color.WHITE,\n  \"+l\": Color.WHITE,\n  \"+n\": Color.WHITE,\n  \"+s\": Color.WHITE,\n  \"+b\": Color.WHITE,\n  \"+r\": Color.WHITE,\n};\n\ntype RotateResult = {\n  type: PieceType;\n  reverseColor: boolean;\n};\n\nconst rotateMap = new Map<PieceType, RotateResult>();\nrotateMap.set(PieceType.PAWN, {\n  type: PieceType.PROM_PAWN,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.LANCE, {\n  type: PieceType.PROM_LANCE,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.KNIGHT, {\n  type: PieceType.PROM_KNIGHT,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.SILVER, {\n  type: PieceType.PROM_SILVER,\n  reverseColor: false,\n});\nrotateMap.set(PieceType.GOLD, { type: PieceType.GOLD, reverseColor: true });\nrotateMap.set(PieceType.BISHOP, { type: PieceType.HORSE, reverseColor: false });\nrotateMap.set(PieceType.ROOK, { type: PieceType.DRAGON, reverseColor: false });\nrotateMap.set(PieceType.KING, { type: PieceType.KING, reverseColor: true });\nrotateMap.set(PieceType.PROM_PAWN, {\n  type: PieceType.PAWN,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_LANCE, {\n  type: PieceType.LANCE,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_KNIGHT, {\n  type: PieceType.KNIGHT,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.PROM_SILVER, {\n  type: PieceType.SILVER,\n  reverseColor: true,\n});\nrotateMap.set(PieceType.HORSE, { type: PieceType.BISHOP, reverseColor: true });\nrotateMap.set(PieceType.DRAGON, { type: PieceType.ROOK, reverseColor: true });\n\nexport class Piece {\n  constructor(public color: Color, public type: PieceType) {}\n\n  black(): Piece {\n    return this.withColor(Color.BLACK);\n  }\n\n  white(): Piece {\n    return this.withColor(Color.WHITE);\n  }\n\n  withColor(color: Color): Piece {\n    return new Piece(color, this.type);\n  }\n\n  equals(piece: Piece): boolean {\n    return this.type === piece.type && this.color === piece.color;\n  }\n\n  promoted(): Piece {\n    const type = promoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  unpromoted(): Piece {\n    const type = unpromoteMap[this.type];\n    return new Piece(this.color, type || this.type);\n  }\n\n  isPromotable(): boolean {\n    return !!promotable[this.type];\n  }\n\n  rotate(): Piece {\n    const r = rotateMap.get(this.type);\n    const piece = new Piece(this.color, r ? r.type : this.type);\n    if (r && r.reverseColor) {\n      piece.color = reverseColor(this.color);\n    }\n    return piece;\n  }\n\n  get id(): string {\n    return this.color + \"_\" + this.type;\n  }\n\n  get sfen(): string {\n    switch (this.color) {\n      default:\n      case Color.BLACK:\n        return toSFENCharBlack[this.type] as string;\n      case Color.WHITE:\n        return toSFENCharWhite[this.type] as string;\n    }\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    return !!sfenCharToTypeMap[sfen];\n  }\n\n  static newBySFEN(sfen: string): Piece | null {\n    const type = sfenCharToTypeMap[sfen];\n    if (!type) {\n      return null;\n    }\n    const color = sfenCharToColorMap[sfen];\n    if (!color) {\n      return null;\n    }\n    return new Piece(color, type);\n  }\n}\n","import { Piece } from \"./piece\";\n\nexport enum Direction {\n  UP = \"up\",\n  DOWN = \"down\",\n  LEFT = \"left\",\n  RIGHT = \"right\",\n  LEFT_UP = \"left_up\",\n  RIGHT_UP = \"right_up\",\n  LEFT_DOWN = \"left_down\",\n  RIGHT_DOWN = \"right_down\",\n  LEFT_UP_KNIGHT = \"left_up_knight\",\n  RIGHT_UP_KNIGHT = \"right_up_knight\",\n  LEFT_DOWN_KNIGHT = \"left_down_knight\",\n  RIGHT_DOWN_KNIGHT = \"right_down_knight\",\n}\n\nconst reverseMap = {\n  up: Direction.DOWN,\n  down: Direction.UP,\n  left: Direction.RIGHT,\n  right: Direction.LEFT,\n  left_up: Direction.RIGHT_DOWN,\n  right_up: Direction.LEFT_DOWN,\n  left_down: Direction.RIGHT_UP,\n  right_down: Direction.LEFT_UP,\n  left_up_knight: Direction.RIGHT_DOWN_KNIGHT,\n  right_up_knight: Direction.LEFT_DOWN_KNIGHT,\n  left_down_knight: Direction.RIGHT_UP_KNIGHT,\n  right_down_knight: Direction.LEFT_UP_KNIGHT,\n};\n\nexport function reverseDirection(dir: Direction): Direction {\n  return reverseMap[dir];\n}\n\nexport const directions = [\n  Direction.UP,\n  Direction.DOWN,\n  Direction.LEFT,\n  Direction.RIGHT,\n  Direction.LEFT_UP,\n  Direction.RIGHT_UP,\n  Direction.LEFT_DOWN,\n  Direction.RIGHT_DOWN,\n  Direction.LEFT_UP_KNIGHT,\n  Direction.RIGHT_UP_KNIGHT,\n  Direction.LEFT_DOWN_KNIGHT,\n  Direction.RIGHT_DOWN_KNIGHT,\n];\n\nexport enum MoveType {\n  SHORT = \"short\",\n  LONG = \"long\",\n}\n\nconst movableDirectionMap: {\n  [color: string]: {\n    [pieceType: string]: { [direction: string]: MoveType | undefined };\n  };\n} = {\n  black: {\n    pawn: { up: MoveType.SHORT },\n    lance: { up: MoveType.LONG },\n    knight: { left_up_knight: MoveType.SHORT, right_up_knight: MoveType.SHORT },\n    silver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n    gold: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    bishop: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n    },\n    rook: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promLance: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promKnight: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    promSilver: {\n      left_up: MoveType.SHORT,\n      up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    horse: {\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      up: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      down: MoveType.SHORT,\n    },\n    dragon: {\n      up: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      down: MoveType.LONG,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n    },\n  },\n  white: {\n    pawn: { down: MoveType.SHORT },\n    lance: { down: MoveType.LONG },\n    knight: {\n      left_down_knight: MoveType.SHORT,\n      right_down_knight: MoveType.SHORT,\n    },\n    silver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n    gold: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    bishop: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n    },\n    rook: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n    },\n    king: {\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promPawn: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promLance: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promKnight: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    promSilver: {\n      left_down: MoveType.SHORT,\n      down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    horse: {\n      left_down: MoveType.LONG,\n      right_down: MoveType.LONG,\n      left_up: MoveType.LONG,\n      right_up: MoveType.LONG,\n      down: MoveType.SHORT,\n      left: MoveType.SHORT,\n      right: MoveType.SHORT,\n      up: MoveType.SHORT,\n    },\n    dragon: {\n      down: MoveType.LONG,\n      left: MoveType.LONG,\n      right: MoveType.LONG,\n      up: MoveType.LONG,\n      left_down: MoveType.SHORT,\n      right_down: MoveType.SHORT,\n      left_up: MoveType.SHORT,\n      right_up: MoveType.SHORT,\n    },\n  },\n};\n\nexport function movableDirections(piece: Piece): Direction[] {\n  return Object.keys(\n    movableDirectionMap[piece.color as string][piece.type]\n  ) as Direction[];\n}\n\nexport function resolveMoveType(\n  piece: Piece,\n  direction: Direction\n): MoveType | undefined {\n  return movableDirectionMap[piece.color as string][piece.type][direction];\n}\n\nexport const directionToDeltaMap: {\n  [direction: string]: { x: number; y: number };\n} = {\n  up: { x: 0, y: -1 },\n  down: { x: 0, y: 1 },\n  left: { x: -1, y: 0 },\n  right: { x: 1, y: 0 },\n  left_up: { x: -1, y: -1 },\n  right_up: { x: 1, y: -1 },\n  left_down: { x: -1, y: 1 },\n  right_down: { x: 1, y: 1 },\n  left_up_knight: { x: -1, y: -2 },\n  right_up_knight: { x: 1, y: -2 },\n  left_down_knight: { x: -1, y: 2 },\n  right_down_knight: { x: 1, y: 2 },\n};\n\nexport function vectorToDirectionAndDistance(\n  x: number,\n  y: number\n): {\n  direction: Direction;\n  distance: number;\n  ok: boolean;\n} {\n  if (x === 1 && y === -2) {\n    return { direction: Direction.RIGHT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === -2) {\n    return { direction: Direction.LEFT_UP_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === 1 && y === 2) {\n    return { direction: Direction.RIGHT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x === -1 && y === 2) {\n    return { direction: Direction.LEFT_DOWN_KNIGHT, distance: 1, ok: true };\n  }\n  if (x !== 0 && y !== 0 && Math.abs(x) !== Math.abs(y)) {\n    return { direction: \"\" as Direction, distance: 0, ok: false };\n  }\n  let dx = x;\n  let dy = y;\n  let distance = 0;\n  if (dx !== 0) {\n    distance = Math.abs(dx);\n    dx /= distance;\n  }\n  if (dy !== 0) {\n    distance = Math.abs(dy);\n    dy /= distance;\n  }\n  if (dx === -1 && dy === -1) {\n    return { direction: Direction.LEFT_UP, distance, ok: true };\n  }\n  if (dx === 0 && dy === -1) {\n    return { direction: Direction.UP, distance, ok: true };\n  }\n  if (dx === 1 && dy === -1) {\n    return { direction: Direction.RIGHT_UP, distance, ok: true };\n  }\n  if (dx === -1 && dy === 0) {\n    return { direction: Direction.LEFT, distance, ok: true };\n  }\n  if (dx === 1 && dy === 0) {\n    return { direction: Direction.RIGHT, distance, ok: true };\n  }\n  if (dx === -1 && dy === 1) {\n    return { direction: Direction.LEFT_DOWN, distance, ok: true };\n  }\n  if (dx === 0 && dy === 1) {\n    return { direction: Direction.DOWN, distance, ok: true };\n  }\n  if (dx === 1 && dy === 1) {\n    return { direction: Direction.RIGHT_DOWN, distance, ok: true };\n  }\n  return { direction: \"\" as Direction, distance: 0, ok: false };\n}\n","import { Direction } from \"./direction\";\n\nfunction sfenFileToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nfunction sfenRankToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"a\":\n      return 1;\n    case \"b\":\n      return 2;\n    case \"c\":\n      return 3;\n    case \"d\":\n      return 4;\n    case \"e\":\n      return 5;\n    case \"f\":\n      return 6;\n    case \"g\":\n      return 7;\n    case \"h\":\n      return 8;\n    case \"i\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\nconst sfenRanks = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\"];\n\nexport default class Square {\n  constructor(public file: number, public rank: number) {}\n\n  get x(): number {\n    return 9 - this.file;\n  }\n\n  get y(): number {\n    return this.rank - 1;\n  }\n\n  get index(): number {\n    return this.y * 9 + this.x;\n  }\n\n  get opposite(): Square {\n    return new Square(10 - this.file, 10 - this.rank);\n  }\n\n  neighbor(dx: number, dy: number): Square;\n  neighbor(dir: Direction): Square;\n  neighbor(arg0: number | Direction, arg1?: number): Square {\n    switch (arg0) {\n      case Direction.UP:\n        return new Square(this.file, this.rank - 1);\n      case Direction.DOWN:\n        return new Square(this.file, this.rank + 1);\n      case Direction.LEFT:\n        return new Square(this.file + 1, this.rank);\n      case Direction.RIGHT:\n        return new Square(this.file - 1, this.rank);\n      case Direction.LEFT_UP:\n        return new Square(this.file + 1, this.rank - 1);\n      case Direction.RIGHT_UP:\n        return new Square(this.file - 1, this.rank - 1);\n      case Direction.LEFT_DOWN:\n        return new Square(this.file + 1, this.rank + 1);\n      case Direction.RIGHT_DOWN:\n        return new Square(this.file - 1, this.rank + 1);\n      case Direction.LEFT_UP_KNIGHT:\n        return new Square(this.file + 1, this.rank - 2);\n      case Direction.RIGHT_UP_KNIGHT:\n        return new Square(this.file - 1, this.rank - 2);\n      case Direction.LEFT_DOWN_KNIGHT:\n        return new Square(this.file + 1, this.rank + 2);\n      case Direction.RIGHT_DOWN_KNIGHT:\n        return new Square(this.file - 1, this.rank + 2);\n    }\n    const dx = arg0 as number;\n    const dy = arg1 as number;\n    return new Square(this.file - dx, this.rank + dy);\n  }\n\n  get valid(): boolean {\n    return this.file >= 1 && this.file <= 9 && this.rank >= 1 && this.rank <= 9;\n  }\n\n  equals(square: Square | null | undefined): boolean {\n    return !!square && this.file === square.file && this.rank === square.rank;\n  }\n\n  static newByXY(x: number, y: number): Square {\n    return new Square(9 - x, y + 1);\n  }\n\n  static newByIndex(index: number): Square {\n    return new Square(9 - (index % 9), Math.trunc(index / 9) + 1);\n  }\n\n  static all: Square[] = [];\n\n  get sfen(): string {\n    return this.file + sfenRanks[this.rank - 1];\n  }\n\n  static parseSFENSquare(sfen: string): Square | null {\n    const file = sfenFileToNumber(sfen[0]);\n    const rank = sfenRankToNumber(sfen[1]);\n    if (!file || !rank) {\n      return null;\n    }\n    return new Square(file, rank);\n  }\n}\n\nfor (let index = 0; index < 81; index += 1) {\n  Square.all.push(Square.newByIndex(index));\n}\n","import { Color } from \"./color\";\nimport { Piece, PieceType, pieceTypeToSFEN, standardPieceName } from \"./piece\";\nimport Square from \"./square\";\n\nconst fileDisplayTexts = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankDisplayTexts = [\"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"];\n\nexport default class Move {\n  constructor(\n    public from: Square | PieceType,\n    public to: Square,\n    public promote: boolean,\n    public color: Color,\n    public pieceType: PieceType,\n    public capturedPieceType: PieceType | null\n  ) {}\n\n  equals(move: Move | null | undefined): boolean {\n    if (!move) {\n      return false;\n    }\n    return (\n      ((this.from instanceof Square &&\n        move.from instanceof Square &&\n        this.from.equals(move.from)) ||\n        (!(this.from instanceof Square) &&\n          !(move.from instanceof Square) &&\n          this.from === move.from)) &&\n      this.to.equals(move.to) &&\n      this.promote === move.promote &&\n      this.color === move.color &&\n      this.pieceType === move.pieceType &&\n      this.capturedPieceType === move.capturedPieceType\n    );\n  }\n\n  withPromote(): Move {\n    return new Move(\n      this.from,\n      this.to,\n      true,\n      this.color,\n      this.pieceType,\n      this.capturedPieceType\n    );\n  }\n\n  getDisplayText(prev?: Move | null): string {\n    let text = \"\";\n    text += this.color === Color.BLACK ? \"▲\" : \"△\";\n    if (prev && prev.to.equals(this.to)) {\n      text += \"同　\";\n    } else {\n      text += fileDisplayTexts[this.to.file - 1];\n      text += rankDisplayTexts[this.to.rank - 1];\n    }\n    text += standardPieceName(this.pieceType);\n    if (this.promote) {\n      text += \"成\";\n    }\n    if (this.from instanceof Square) {\n      const square = this.from;\n      text += `(${square.file}${square.rank})`;\n    } else {\n      text += \"打\";\n    }\n    return text;\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    if (this.from instanceof Square) {\n      ret += this.from.sfen;\n    } else {\n      ret += pieceTypeToSFEN(this.from) + \"*\";\n    }\n    ret += this.to.sfen;\n    if (this.promote) {\n      ret += \"+\";\n    }\n    return ret;\n  }\n}\n\nexport function parseSFENMove(sfen: string): {\n  from: Square | PieceType;\n  to: Square;\n  promote: boolean;\n} | null {\n  let from: PieceType | Square;\n  if (sfen[1] === \"*\") {\n    const piece = Piece.newBySFEN(sfen[0]);\n    if (!piece) {\n      return null;\n    }\n    from = piece.type;\n  } else {\n    const square = Square.parseSFENSquare(sfen);\n    if (!square) {\n      return null;\n    }\n    from = square;\n  }\n  const to = Square.parseSFENSquare(sfen.substring(2));\n  if (!to) {\n    return null;\n  }\n  const promote = sfen.length >= 5 && sfen[4] === \"+\";\n  return { from, to, promote };\n}\n","import { Color } from \".\";\nimport { reverseColor } from \"./color\";\nimport {\n  directions,\n  MoveType,\n  resolveMoveType,\n  reverseDirection,\n} from \"./direction\";\nimport { Piece, PieceType } from \"./piece\";\nimport Square from \"./square\";\n\nexport enum InitialPositionType {\n  STANDARD = \"standard\",\n  EMPTY = \"empty\",\n  HANDICAP_LANCE = \"handicapLance\",\n  HANDICAP_RIGHT_LANCE = \"handicapRightLance\",\n  HANDICAP_BISHOP = \"handicapBishop\",\n  HANDICAP_ROOK = \"handicapRook\",\n  HANDICAP_ROOK_LANCE = \"handicapRookLance\",\n  HANDICAP_2PIECES = \"handicap2Pieces\",\n  HANDICAP_4PIECES = \"handicap4Pieces\",\n  HANDICAP_6PIECES = \"handicap6Pieces\",\n  HANDICAP_8PIECES = \"handicap8Pieces\",\n  TSUME_SHOGI = \"tsumeShogi\",\n  TSUME_SHOGI_2KINGS = \"tsumeShogi2Kings\",\n}\n\nfunction sfenCharToNumber(sfen: string): number | null {\n  switch (sfen) {\n    case \"1\":\n      return 1;\n    case \"2\":\n      return 2;\n    case \"3\":\n      return 3;\n    case \"4\":\n      return 4;\n    case \"5\":\n      return 5;\n    case \"6\":\n      return 6;\n    case \"7\":\n      return 7;\n    case \"8\":\n      return 8;\n    case \"9\":\n      return 9;\n    default:\n      return null;\n  }\n}\n\ntype PowerDetectionOption = {\n  filled?: Square;\n  ignore?: Square;\n};\n\nexport interface ImmutableBoard {\n  at(square: Square): Piece | null;\n  listNonEmptySquares(): Array<Square>;\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean;\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean;\n  readonly sfen: string;\n}\n\nexport default class Board {\n  private squares: Array<Piece | null>;\n\n  constructor() {\n    this.squares = new Array<Piece>();\n    for (let i = 0; i < 81; i += 1) {\n      this.squares.push(null);\n    }\n    this.reset(InitialPositionType.STANDARD);\n  }\n\n  at(square: Square): Piece | null {\n    return this.squares[square.index];\n  }\n\n  set(square: Square, piece: Piece): void {\n    this.squares[square.index] = piece;\n  }\n\n  swap(square1: Square, square2: Square): void {\n    const tmp = this.squares[square1.index];\n    this.squares[square1.index] = this.squares[square2.index];\n    this.squares[square2.index] = tmp;\n  }\n\n  remove(square: Square): Piece | null {\n    const removed = this.squares[square.index];\n    this.squares[square.index] = null;\n    return removed;\n  }\n\n  listNonEmptySquares(): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      if (this.squares[square.index]) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  listSquaresByColor(color: Color): Array<Square> {\n    const squares = new Array<Square>();\n    Square.all.forEach((square) => {\n      const piece = this.squares[square.index];\n      if (piece && piece.color === color) {\n        squares.push(square);\n      }\n    });\n    return squares;\n  }\n\n  clear(): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = null;\n    });\n  }\n\n  reset(type: InitialPositionType): void {\n    this.clear();\n    if (type === InitialPositionType.EMPTY) {\n      return;\n    }\n    this.squares[new Square(5, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI) {\n      return;\n    }\n    this.squares[new Square(5, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KING\n    );\n    if (type === InitialPositionType.TSUME_SHOGI_2KINGS) {\n      return;\n    }\n    this.squares[new Square(2, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.ROOK\n    );\n    this.squares[new Square(8, 8).index] = new Piece(\n      Color.BLACK,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(2, 2).index] = new Piece(\n      Color.WHITE,\n      PieceType.BISHOP\n    );\n    this.squares[new Square(4, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.GOLD\n    );\n    this.squares[new Square(6, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(4, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.GOLD\n    );\n    this.squares[new Square(3, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.SILVER\n    );\n    this.squares[new Square(7, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(3, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.SILVER\n    );\n    this.squares[new Square(2, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(8, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(2, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.KNIGHT\n    );\n    this.squares[new Square(1, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 9).index] = new Piece(\n      Color.BLACK,\n      PieceType.LANCE\n    );\n    this.squares[new Square(9, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 1).index] = new Piece(\n      Color.WHITE,\n      PieceType.LANCE\n    );\n    this.squares[new Square(1, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 7).index] = new Piece(\n      Color.BLACK,\n      PieceType.PAWN\n    );\n    this.squares[new Square(1, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(2, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(3, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(4, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(5, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(6, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(7, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(8, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    this.squares[new Square(9, 3).index] = new Piece(\n      Color.WHITE,\n      PieceType.PAWN\n    );\n    switch (type) {\n      default:\n      case InitialPositionType.STANDARD:\n        return;\n      case InitialPositionType.HANDICAP_LANCE:\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_BISHOP:\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK:\n        this.squares[new Square(8, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_2PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_4PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_6PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n      case InitialPositionType.HANDICAP_8PIECES:\n        this.squares[new Square(8, 2).index] = null;\n        this.squares[new Square(2, 2).index] = null;\n        this.squares[new Square(1, 1).index] = null;\n        this.squares[new Square(2, 1).index] = null;\n        this.squares[new Square(3, 1).index] = null;\n        this.squares[new Square(7, 1).index] = null;\n        this.squares[new Square(8, 1).index] = null;\n        this.squares[new Square(9, 1).index] = null;\n        return;\n    }\n  }\n\n  get sfen(): string {\n    let ret = \"\";\n    let empty = 0;\n    for (let y = 0; y < 9; y += 1) {\n      for (let x = 0; x < 9; x += 1) {\n        const piece = this.at(Square.newByXY(x, y));\n        if (piece) {\n          if (empty) {\n            ret += empty;\n            empty = 0;\n          }\n          ret += piece.sfen;\n        } else {\n          empty += 1;\n        }\n      }\n      if (empty) {\n        ret += empty;\n        empty = 0;\n      }\n      if (y !== 8) {\n        ret += \"/\";\n      }\n    }\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Board.isValidSFEN(sfen)) {\n      return false;\n    }\n    this.clear();\n    const rows = sfen.split(\"/\");\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else {\n          this.set(Square.newByXY(x, y), Piece.newBySFEN(c) as Piece);\n          x += 1;\n        }\n      }\n    }\n    return true;\n  }\n\n  findKing(color: Color): Square | undefined {\n    const king = new Piece(color, PieceType.KING);\n    return Square.all.find((square) => {\n      const piece = this.at(square);\n      if (piece && king.equals(piece)) {\n        return true;\n      }\n      return;\n    });\n  }\n\n  hasPower(\n    target: Square,\n    color: Color,\n    option?: PowerDetectionOption\n  ): boolean {\n    return !!directions.find((dir) => {\n      let step = 0;\n      for (\n        let square = target.neighbor(dir);\n        square.valid;\n        square = square.neighbor(dir)\n      ) {\n        step += 1;\n        if (option && option.filled && square.equals(option.filled)) {\n          break;\n        }\n        if (option && option.ignore && square.equals(option.ignore)) {\n          continue;\n        }\n        const piece = this.at(square);\n        if (piece) {\n          if (piece.color !== color) {\n            return false;\n          }\n          const rdir = reverseDirection(dir);\n          const type = resolveMoveType(piece, rdir);\n          return (\n            type === MoveType.LONG || (type === MoveType.SHORT && step === 1)\n          );\n        }\n      }\n      return false;\n    });\n  }\n\n  isChecked(kingColor: Color, option?: PowerDetectionOption): boolean {\n    const square = this.findKing(kingColor);\n    if (!square) {\n      return false;\n    }\n    return this.hasPower(square, reverseColor(kingColor), {\n      filled: option && option.filled,\n      ignore: option && option.ignore,\n    });\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const rows = sfen.split(\"/\");\n    if (rows.length !== 9) {\n      return false;\n    }\n    for (let y = 0; y < 9; y += 1) {\n      let x = 0;\n      for (let i = 0; i < rows[y].length; i += 1) {\n        let c = rows[y][i];\n        if (c === \"+\") {\n          i += 1;\n          c += rows[y][i];\n        }\n        const n = sfenCharToNumber(c);\n        if (n) {\n          x += n;\n        } else if (Piece.isValidSFEN(c)) {\n          x += 1;\n        } else {\n          return false;\n        }\n      }\n      if (x !== 9) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  copyFrom(board: Board): void {\n    Square.all.forEach((square) => {\n      this.squares[square.index] = board.at(square);\n    });\n  }\n}\n","import { Piece, PieceType } from \"./piece\";\nimport { Color } from \"./color\";\n\nfunction buildSFEN(n: number, piece: Piece): string {\n  if (n === 0) {\n    return \"\";\n  }\n  return (n !== 1 ? n : \"\") + piece.sfen;\n}\n\nexport interface ImmutableHand {\n  count(pieceType: PieceType): number;\n  forEach(handler: (pieceType: PieceType, n: number) => void): void;\n  readonly sfenBlack: string;\n  readonly sfenWhite: string;\n  formatSFEN(color: Color): string;\n}\n\nexport default class Hand {\n  private pieces: Map<PieceType, number>;\n\n  constructor() {\n    this.pieces = new Map<PieceType, number>();\n    this.pieces.set(PieceType.PAWN, 0);\n    this.pieces.set(PieceType.LANCE, 0);\n    this.pieces.set(PieceType.KNIGHT, 0);\n    this.pieces.set(PieceType.SILVER, 0);\n    this.pieces.set(PieceType.GOLD, 0);\n    this.pieces.set(PieceType.BISHOP, 0);\n    this.pieces.set(PieceType.ROOK, 0);\n  }\n\n  count(pieceType: PieceType): number {\n    return this.pieces.get(pieceType) as number;\n  }\n\n  set(pieceType: PieceType, count: number): void {\n    this.pieces.set(pieceType, count);\n  }\n\n  add(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c += n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  reduce(pieceType: PieceType, n: number): number {\n    let c = this.pieces.get(pieceType) as number;\n    c -= n;\n    this.pieces.set(pieceType, c);\n    return c;\n  }\n\n  forEach(handler: (pieceType: PieceType, n: number) => void): void {\n    handler(PieceType.PAWN, this.pieces.get(PieceType.PAWN) as number);\n    handler(PieceType.LANCE, this.pieces.get(PieceType.LANCE) as number);\n    handler(PieceType.KNIGHT, this.pieces.get(PieceType.KNIGHT) as number);\n    handler(PieceType.SILVER, this.pieces.get(PieceType.SILVER) as number);\n    handler(PieceType.GOLD, this.pieces.get(PieceType.GOLD) as number);\n    handler(PieceType.BISHOP, this.pieces.get(PieceType.BISHOP) as number);\n    handler(PieceType.ROOK, this.pieces.get(PieceType.ROOK) as number);\n  }\n\n  get sfenBlack(): string {\n    return this.formatSFEN(Color.BLACK);\n  }\n\n  get sfenWhite(): string {\n    return this.formatSFEN(Color.WHITE);\n  }\n\n  formatSFEN(color: Color): string {\n    let ret = \"\";\n    ret += buildSFEN(\n      this.count(PieceType.ROOK) as number,\n      new Piece(color, PieceType.ROOK)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.BISHOP) as number,\n      new Piece(color, PieceType.BISHOP)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.GOLD) as number,\n      new Piece(color, PieceType.GOLD)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.SILVER) as number,\n      new Piece(color, PieceType.SILVER)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.KNIGHT) as number,\n      new Piece(color, PieceType.KNIGHT)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.LANCE) as number,\n      new Piece(color, PieceType.LANCE)\n    );\n    ret += buildSFEN(\n      this.count(PieceType.PAWN) as number,\n      new Piece(color, PieceType.PAWN)\n    );\n    if (ret === \"\") {\n      return \"-\";\n    }\n    return ret;\n  }\n\n  static formatSFEN(black: Hand, white: Hand): string {\n    const b = black.sfenBlack;\n    const w = white.sfenWhite;\n    if (b === \"-\" && w === \"-\") {\n      return \"-\";\n    }\n    if (w === \"-\") {\n      return b;\n    }\n    if (b === \"-\") {\n      return w;\n    }\n    return b + w;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    if (sfen === \"-\") {\n      return true;\n    }\n    return !!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/);\n  }\n\n  static parseSFEN(sfen: string): { black: Hand; white: Hand } | null {\n    if (sfen === \"-\") {\n      return { black: new Hand(), white: new Hand() };\n    }\n    if (!sfen.match(/^(?:[0-9]*[PLNSGBRplnsgbr])*$/)) {\n      return null;\n    }\n    const sections = sfen.match(\n      /([0-9]*[PLNSGBRplnsgbr])/g\n    ) as RegExpMatchArray;\n    const black = new Hand();\n    const white = new Hand();\n    for (let i = 0; i < sections.length; i += 1) {\n      const section = sections[i];\n      let n = 1;\n      if (section.length >= 2) {\n        n = Number(section.substring(0, section.length - 1));\n      }\n      const piece = Piece.newBySFEN(section[section.length - 1]) as Piece;\n      if (piece.color === Color.BLACK) {\n        black.add(piece.type, n);\n      } else {\n        white.add(piece.type, n);\n      }\n    }\n    return { black, white };\n  }\n\n  copyFrom(hand: Hand): void {\n    hand.pieces.forEach((n, pieceType) => {\n      this.pieces.set(pieceType, n);\n    });\n  }\n}\n","import Board, { ImmutableBoard, InitialPositionType } from \"./board\";\nimport {\n  Color,\n  reverseColor,\n  colorToSFEN,\n  parseSFENColor,\n  isValidSFENColor,\n} from \"./color\";\nimport Move, { parseSFENMove } from \"./move\";\nimport Square from \"./square\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  Direction,\n  directionToDeltaMap,\n  movableDirections,\n  MoveType,\n  resolveMoveType,\n  vectorToDirectionAndDistance,\n} from \"./direction\";\n\nconst invalidRankMap: {\n  [color: string]: { [pieceType: string]: { [rank: number]: boolean } };\n} = {\n  black: {\n    pawn: { 1: true },\n    lance: { 1: true },\n    knight: { 1: true, 2: true },\n  },\n  white: {\n    pawn: { 9: true },\n    lance: { 9: true },\n    knight: { 9: true, 8: true },\n  },\n};\n\nfunction isInvalidRank(color: Color, type: PieceType, rank: number): boolean {\n  const rule = invalidRankMap[color][type];\n  return rule ? rule[rank] : false;\n}\n\nfunction isPromotableRank(color: Color, rank: number): boolean {\n  if (color === Color.BLACK) {\n    return rank <= 3;\n  }\n  return rank >= 7;\n}\n\nfunction pawnExists(color: Color, board: Board, file: number): boolean {\n  for (let rank = 1; rank <= 9; rank += 1) {\n    const piece = board.at(new Square(file, rank));\n    if (piece && piece.type === PieceType.PAWN && piece.color === color) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport type PositionChange = {\n  move?: {\n    from: Square | Piece;\n    to: Square | Color;\n  };\n  rotate?: Square;\n};\n\nexport interface ImmutablePosition {\n  readonly board: ImmutableBoard;\n  readonly color: Color;\n  readonly blackHand: ImmutableHand;\n  readonly whiteHand: ImmutableHand;\n  hand(color: Color): ImmutableHand;\n  readonly checked: boolean;\n  createMove(from: Square | PieceType, to: Square): Move | null;\n  createMoveBySFEN(sfen: string): Move | null;\n  isPawnDropMate(move: Move): boolean;\n  isValidMove(move: Move): boolean;\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean;\n  readonly sfen: string;\n  getSFEN(nextMoveNumber: number): string;\n  clone(): Position;\n}\n\nexport type DoMoveOption = {\n  ignoreValidation?: boolean;\n};\n\nexport default class Position {\n  private _board = new Board();\n  private _color = Color.BLACK;\n  private _blackHand = new Hand();\n  private _whiteHand = new Hand();\n\n  get board(): Board {\n    return this._board;\n  }\n\n  get color(): Color {\n    return this._color;\n  }\n\n  get blackHand(): Hand {\n    return this._blackHand;\n  }\n\n  get whiteHand(): Hand {\n    return this._whiteHand;\n  }\n\n  reset(type: InitialPositionType): void {\n    this._board.reset(type);\n    this._blackHand = new Hand();\n    this._whiteHand = new Hand();\n    switch (type) {\n      case InitialPositionType.STANDARD:\n      case InitialPositionType.EMPTY:\n      case InitialPositionType.TSUME_SHOGI:\n      case InitialPositionType.TSUME_SHOGI_2KINGS:\n        this._color = Color.BLACK;\n        break;\n      case InitialPositionType.HANDICAP_LANCE:\n      case InitialPositionType.HANDICAP_RIGHT_LANCE:\n      case InitialPositionType.HANDICAP_BISHOP:\n      case InitialPositionType.HANDICAP_ROOK:\n      case InitialPositionType.HANDICAP_ROOK_LANCE:\n      case InitialPositionType.HANDICAP_2PIECES:\n      case InitialPositionType.HANDICAP_4PIECES:\n      case InitialPositionType.HANDICAP_6PIECES:\n      case InitialPositionType.HANDICAP_8PIECES:\n        this._color = Color.WHITE;\n        break;\n    }\n    if (\n      type === InitialPositionType.TSUME_SHOGI ||\n      type === InitialPositionType.TSUME_SHOGI_2KINGS\n    ) {\n      this._whiteHand.set(PieceType.PAWN, 18);\n      this._whiteHand.set(PieceType.LANCE, 4);\n      this._whiteHand.set(PieceType.KNIGHT, 4);\n      this._whiteHand.set(PieceType.SILVER, 4);\n      this._whiteHand.set(PieceType.GOLD, 4);\n      this._whiteHand.set(PieceType.BISHOP, 2);\n      this._whiteHand.set(PieceType.ROOK, 2);\n    }\n  }\n\n  hand(color: Color): Hand {\n    return this._hand(color);\n  }\n\n  _hand(color: Color): Hand {\n    if (color === Color.BLACK) {\n      return this._blackHand;\n    }\n    return this._whiteHand;\n  }\n\n  get checked(): boolean {\n    return this._board.isChecked(this.color);\n  }\n\n  createMove(from: Square | PieceType, to: Square): Move | null {\n    let pieceType: PieceType;\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return null;\n      }\n      pieceType = piece.type;\n    } else {\n      pieceType = from;\n    }\n    const capturedPiece = this._board.at(to);\n    return new Move(\n      from,\n      to,\n      false,\n      this.color,\n      pieceType,\n      capturedPiece ? capturedPiece.type : null\n    );\n  }\n\n  createMoveBySFEN(sfen: string): Move | null {\n    const m = parseSFENMove(sfen);\n    if (!m) {\n      return null;\n    }\n    let move = this.createMove(m.from, m.to);\n    if (!move) {\n      return null;\n    }\n    if (m.promote) {\n      move = move.withPromote();\n    }\n    return move;\n  }\n\n  isPawnDropMate(move: Move): boolean {\n    if (move.from instanceof Square) {\n      return false;\n    }\n    if (move.pieceType !== PieceType.PAWN) {\n      return false;\n    }\n    const kingSquare = move.to.neighbor(\n      move.color === Color.BLACK ? Direction.UP : Direction.DOWN\n    );\n    const king = this.board.at(kingSquare);\n    if (!king || king.type !== PieceType.KING || king.color === move.color) {\n      return false;\n    }\n    const movable = movableDirections(king).find((dir) => {\n      const to = kingSquare.neighbor(dir);\n      if (!to.valid) {\n        return false;\n      }\n      const piece = this.board.at(to);\n      if (piece && piece.color == king.color) {\n        return false;\n      }\n      return !this.board.hasPower(to, move.color, { filled: move.to });\n    });\n    if (movable) {\n      return false;\n    }\n    return !this.board.listSquaresByColor(king.color).find((from) => {\n      return (\n        !from.equals(kingSquare) &&\n        this.isMovable(from, move.to) &&\n        !this.board.isChecked(king.color, {\n          filled: move.to,\n          ignore: from,\n        })\n      );\n    });\n  }\n\n  isValidMove(move: Move): boolean {\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from);\n      if (!target || target.color !== this.color) {\n        return false;\n      }\n      if (!this.isMovable(move.from, move.to)) {\n        return false;\n      }\n      const captured = this._board.at(move.to);\n      if (captured && captured.color === this.color) {\n        return false;\n      }\n      if (move.promote) {\n        if (!target.isPromotable()) {\n          return false;\n        }\n        if (\n          !isPromotableRank(this.color, move.from.rank) &&\n          !isPromotableRank(this.color, move.to.rank)\n        ) {\n          return false;\n        }\n      } else if (isInvalidRank(this.color, target.type, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.pieceType !== PieceType.KING\n          ? this._board.isChecked(this.color, {\n              filled: move.to,\n              ignore: move.from,\n            })\n          : this._board.hasPower(move.to, reverseColor(this.color), {\n              ignore: move.from,\n            })\n      ) {\n        return false;\n      }\n    } else {\n      if (move.promote) {\n        return false;\n      }\n      if (move.color !== this.color) {\n        return false;\n      }\n      if (this.hand(this.color).count(move.from) === 0) {\n        return false;\n      }\n      if (this._board.at(move.to)) {\n        return false;\n      }\n      if (isInvalidRank(this.color, move.from, move.to.rank)) {\n        return false;\n      }\n      if (\n        move.from === PieceType.PAWN &&\n        pawnExists(this.color, this._board, move.to.file)\n      ) {\n        return false;\n      }\n      if (this._board.isChecked(this.color, { filled: move.to })) {\n        return false;\n      }\n      if (this.isPawnDropMate(move)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  doMove(move: Move, opt?: DoMoveOption): boolean {\n    if (!(opt && opt.ignoreValidation) && !this.isValidMove(move)) {\n      return false;\n    }\n    if (move.from instanceof Square) {\n      const target = this._board.at(move.from) as Piece;\n      const captured = this._board.at(move.to);\n      this._board.remove(move.from);\n      this._board.set(move.to, move.promote ? target.promoted() : target);\n      if (captured && captured.type !== PieceType.KING) {\n        this._hand(this.color).add(captured.unpromoted().type, 1);\n      }\n    } else {\n      this._hand(this.color).reduce(move.from, 1);\n      this._board.set(move.to, new Piece(this.color, move.from));\n    }\n    this._color = reverseColor(this.color);\n    return true;\n  }\n\n  undoMove(move: Move): void {\n    this._color = reverseColor(this.color);\n    if (move.from instanceof Square) {\n      this._board.set(move.from, new Piece(this.color, move.pieceType));\n      if (move.capturedPieceType) {\n        const capturedPiece = new Piece(\n          reverseColor(this.color),\n          move.capturedPieceType\n        );\n        this._board.set(move.to, capturedPiece);\n        if (capturedPiece.type !== PieceType.KING) {\n          this._hand(this.color).reduce(capturedPiece.unpromoted().type, 1);\n        }\n      } else {\n        this._board.remove(move.to);\n      }\n    } else {\n      this._hand(this.color).add(move.from, 1);\n      this._board.remove(move.to);\n    }\n  }\n\n  isValidEditing(from: Square | Piece, to: Square | Color): boolean {\n    if (from instanceof Square) {\n      const piece = this._board.at(from);\n      if (!piece) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (from.equals(to)) {\n          return false;\n        }\n      } else if (piece.type === PieceType.KING) {\n        return false;\n      }\n    } else {\n      if (!from.color) {\n        return false;\n      }\n      if (this.hand(from.color).count(from.type) === 0) {\n        return false;\n      }\n      if (to instanceof Square) {\n        if (this._board.at(to)) {\n          return false;\n        }\n      } else if (from.color === to) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  edit(change: PositionChange): boolean {\n    if (change.move) {\n      if (!this.isValidEditing(change.move.from, change.move.to)) {\n        return false;\n      }\n      if (!(change.move.from instanceof Square)) {\n        this._hand(change.move.from.color).reduce(change.move.from.type, 1);\n        if (change.move.to instanceof Square) {\n          this._board.set(change.move.to, change.move.from);\n        } else {\n          this._hand(change.move.to).add(change.move.from.type, 1);\n        }\n      } else if (!(change.move.to instanceof Square)) {\n        const piece = this._board.remove(change.move.from) as Piece;\n        this._hand(change.move.to).add(piece.unpromoted().type, 1);\n      } else {\n        this._board.swap(change.move.from, change.move.to);\n      }\n    }\n    if (change.rotate) {\n      const piece = this._board.at(change.rotate);\n      if (piece) {\n        this._board.set(change.rotate, piece.rotate());\n      }\n    }\n    return true;\n  }\n\n  get sfen(): string {\n    return this.getSFEN(1);\n  }\n\n  getSFEN(nextMoveNumber: number): string {\n    let ret = `${this._board.sfen} ${colorToSFEN(this.color)} `;\n    ret += Hand.formatSFEN(this._blackHand, this._whiteHand);\n    ret += \" \" + nextMoveNumber;\n    return ret;\n  }\n\n  resetBySFEN(sfen: string): boolean {\n    if (!Position.isValidSFEN(sfen)) {\n      return false;\n    }\n    const sections = sfen.split(\" \");\n    if (sections[0] === \"sfen\") {\n      sections.shift();\n    }\n    this._board.resetBySFEN(sections[0]);\n    this._color = parseSFENColor(sections[1]);\n    const hands = Hand.parseSFEN(sections[2]) as { black: Hand; white: Hand };\n    this._blackHand = hands.black;\n    this._whiteHand = hands.white;\n    return true;\n  }\n\n  setColor(color: Color): void {\n    this._color = color;\n  }\n\n  static isValidSFEN(sfen: string): boolean {\n    const sections = sfen.split(\" \");\n    if (sections.length === 5 && sections[0] === \"sfen\") {\n      sections.shift();\n    }\n    if (sections.length !== 4) {\n      return false;\n    }\n    if (!Board.isValidSFEN(sections[0])) {\n      return false;\n    }\n    if (!isValidSFENColor(sections[1])) {\n      return false;\n    }\n    if (!Hand.isValidSFEN(sections[2])) {\n      return false;\n    }\n    if (!sections[3].match(/[0-9]+/)) {\n      return false;\n    }\n    return true;\n  }\n\n  static newBySFEN(sfen: string): Position | null {\n    const position = new Position();\n    return position.resetBySFEN(sfen) ? position : null;\n  }\n\n  private isMovable(from: Square, to: Square): boolean {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    const { direction, distance, ok } = vectorToDirectionAndDistance(dx, dy);\n    if (!ok) {\n      return false;\n    }\n    const piece = this._board.at(from);\n    if (!piece) {\n      return false;\n    }\n    switch (resolveMoveType(piece, direction)) {\n      default:\n        return false;\n      case MoveType.SHORT:\n        return distance === 1;\n      case MoveType.LONG: {\n        const d = directionToDeltaMap[direction];\n        for (\n          let square = from.neighbor(d.x, d.y);\n          square.valid;\n          square = square.neighbor(d.x, d.y)\n        ) {\n          if (square.equals(to)) {\n            return true;\n          }\n          if (this._board.at(square)) {\n            return false;\n          }\n        }\n        return false;\n      }\n    }\n  }\n\n  copyFrom(position: Position): void {\n    this._board.copyFrom(position._board);\n    this._color = position.color;\n    this._blackHand.copyFrom(position._blackHand);\n    this._whiteHand.copyFrom(position._whiteHand);\n  }\n\n  clone(): Position {\n    const position = new Position();\n    position.copyFrom(this);\n    return position;\n  }\n}\n\ntype PieceCounts = {\n  pawn: number;\n  lance: number;\n  knight: number;\n  silver: number;\n  gold: number;\n  bishop: number;\n  rook: number;\n  king: number;\n  promPawn: number;\n  promLance: number;\n  promKnight: number;\n  promSilver: number;\n  horse: number;\n  dragon: number;\n};\n\nexport function countExistingPieces(position: ImmutablePosition): PieceCounts {\n  const result: PieceCounts = {\n    pawn: 0,\n    lance: 0,\n    knight: 0,\n    silver: 0,\n    gold: 0,\n    bishop: 0,\n    rook: 0,\n    king: 0,\n    promPawn: 0,\n    promLance: 0,\n    promKnight: 0,\n    promSilver: 0,\n    horse: 0,\n    dragon: 0,\n  };\n  Square.all.forEach((square) => {\n    const piece = position.board.at(square);\n    if (piece) {\n      result[piece.type] += 1;\n    }\n  });\n  position.blackHand.forEach((pieceType, n) => {\n    result[pieceType] += n;\n  });\n  position.whiteHand.forEach((pieceType, n) => {\n    result[pieceType] += n;\n  });\n  return result;\n}\n\nexport function countNotExistingPieces(\n  position: ImmutablePosition\n): PieceCounts {\n  const existed = countExistingPieces(position);\n  return {\n    pawn: 18 - existed.pawn - existed.promPawn,\n    lance: 4 - existed.lance - existed.promLance,\n    knight: 4 - existed.knight - existed.promKnight,\n    silver: 4 - existed.silver - existed.promSilver,\n    gold: 4 - existed.gold,\n    bishop: 2 - existed.bishop - existed.horse,\n    rook: 2 - existed.rook - existed.dragon,\n    king: 2 - existed.king,\n    promPawn: 0,\n    promLance: 0,\n    promKnight: 0,\n    promSilver: 0,\n    horse: 0,\n    dragon: 0,\n  };\n}\n","import {\n  Position,\n  DoMoveOption,\n  ImmutablePosition,\n  Move,\n  Color,\n  reverseColor,\n  parseSFENMove,\n} from \".\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\n\nexport enum RecordMetadataKey {\n  // 柿木形式で規定されている項目\n  TITLE = \"title\", // 表題\n  BLACK_NAME = \"blackName\", // 先手\n  WHITE_NAME = \"whiteName\", // 後手\n  START_DATETIME = \"startDatetime\", // 開始日時\n  END_DATETIME = \"endDatetime\", // 終了日時\n  DATE = \"date\", // 対局日\n  TOURNAMENT = \"tournament\", // 棋戦\n  STRATEGY = \"strategy\", // 戦型\n  TIME_LIMIT = \"timeLimit\", // 持ち時間\n  TIME_SPENT = \"timeSpent\", // 消費時間\n  PLACE = \"place\", // 場所\n  POSTED_ON = \"postedOn\", // 掲載\n  NOTE = \"note\", // 備考\n  BLACK_SHORT_NAME = \"blackShortName\", // 先手省略名\n  WHITE_SHORT_NAME = \"whiteShortName\", // 後手省略名\n\n  // 柿木形式で規定されている詰将棋に関する項目\n  OPUS_NO = \"opusNo\", // 作品番号\n  OPUS_NAME = \"opusName\", // 作品名\n  AUTHOR = \"author\", // 作者\n  PUBLISHED_ON = \"publishedOn\", // 発表誌\n  PUBLISHED_AT = \"publishedAt\", // 発表年月\n  SOURCE = \"source\", // 出典\n  LENGTH = \"length\", // 手数\n  INTEGRITY = \"integrity\", // 完全性\n  CATEGORY = \"category\", // 分類\n  AWARD = \"award\", // 受賞\n}\n\nexport function getStandardMetadataDisplayName(key: RecordMetadataKey): string {\n  switch (key) {\n    case RecordMetadataKey.BLACK_NAME:\n      return \"先手\";\n    case RecordMetadataKey.WHITE_NAME:\n      return \"後手\";\n    case RecordMetadataKey.START_DATETIME:\n      return \"開始日時\";\n    case RecordMetadataKey.END_DATETIME:\n      return \"終了日時\";\n    case RecordMetadataKey.DATE:\n      return \"対局日\";\n    case RecordMetadataKey.TOURNAMENT:\n      return \"棋戦\";\n    case RecordMetadataKey.STRATEGY:\n      return \"戦型\";\n    case RecordMetadataKey.TITLE:\n      return \"表題\";\n    case RecordMetadataKey.TIME_LIMIT:\n      return \"持ち時間\";\n    case RecordMetadataKey.TIME_SPENT:\n      return \"消費時間\";\n    case RecordMetadataKey.PLACE:\n      return \"場所\";\n    case RecordMetadataKey.POSTED_ON:\n      return \"掲載\";\n    case RecordMetadataKey.NOTE:\n      return \"備考\";\n    case RecordMetadataKey.BLACK_SHORT_NAME:\n      return \"先手省略名\";\n    case RecordMetadataKey.WHITE_SHORT_NAME:\n      return \"後手省略名\";\n    case RecordMetadataKey.OPUS_NO:\n      return \"作品番号\";\n    case RecordMetadataKey.OPUS_NAME:\n      return \"作品名\";\n    case RecordMetadataKey.AUTHOR:\n      return \"作者\";\n    case RecordMetadataKey.PUBLISHED_ON:\n      return \"発表誌\";\n    case RecordMetadataKey.PUBLISHED_AT:\n      return \"発表年月\";\n    case RecordMetadataKey.SOURCE:\n      return \"出典\";\n    case RecordMetadataKey.LENGTH:\n      return \"手数\";\n    case RecordMetadataKey.INTEGRITY:\n      return \"完全性\";\n    case RecordMetadataKey.CATEGORY:\n      return \"分類\";\n    case RecordMetadataKey.AWARD:\n      return \"受賞\";\n  }\n}\n\nexport interface ImmutableRecordMetadata {\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey>;\n  getStandardMetadata(key: RecordMetadataKey): string | undefined;\n  get customMetadataKeys(): IterableIterator<string>;\n  getCustomMetadata(key: string): string | undefined;\n}\n\nexport class RecordMetadata {\n  private standard = new Map<RecordMetadataKey, string>();\n  private custom = new Map<string, string>();\n\n  get standardMetadataKeys(): IterableIterator<RecordMetadataKey> {\n    return this.standard.keys();\n  }\n\n  getStandardMetadata(key: RecordMetadataKey): string | undefined {\n    return this.standard.get(key);\n  }\n\n  setStandardMetadata(key: RecordMetadataKey, value: string): void {\n    if (value) {\n      this.standard.set(key, value);\n    } else {\n      this.standard.delete(key);\n    }\n  }\n\n  get customMetadataKeys(): IterableIterator<string> {\n    return this.custom.keys();\n  }\n\n  getCustomMetadata(key: string): string | undefined {\n    return this.custom.get(key);\n  }\n\n  setCustomMetadata(key: string, value: string): void {\n    if (value) {\n      this.custom.set(key, value);\n    } else {\n      this.custom.delete(key);\n    }\n  }\n}\n\nexport enum SpecialMove {\n  START = \"start\",\n  INTERRUPT = \"interrupt\",\n  RESIGN = \"resign\",\n  DRAW = \"draw\",\n  REPETITION_DRAW = \"repetitionDraw\",\n  MATE = \"mate\",\n  TIMEOUT = \"timeout\",\n  FOUL_WIN = \"foulWin\", // 手番側の勝ち(直前の指し手が反則手)\n  FOUL_LOSE = \"foulLose\", // 手番側の負け\n  ENTERING_OF_KING = \"enteringOfKing\",\n  WIN_BY_DEFAULT = \"winByDefault\",\n  LOSS_BY_DEFAULT = \"lossByDefault\",\n}\n\nconst specialMoveToDisplayStringMap = {\n  start: \"開始局面\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\nexport function specialMoveToDisplayString(move: SpecialMove): string {\n  return specialMoveToDisplayStringMap[move];\n}\n\nexport interface ImmutableNode {\n  readonly number: number;\n  readonly prev: Node | null;\n  readonly next: Node | null;\n  readonly branch: Node | null;\n  readonly branchIndex: number;\n  readonly activeBranch: boolean;\n  readonly nextColor: Color;\n  readonly move: Move | SpecialMove;\n  readonly isCheck: boolean;\n  readonly comment: string;\n  readonly customData: unknown;\n  readonly displayText: string;\n  readonly timeText: string;\n  readonly hasBranch: boolean;\n  readonly isFirstBranch: boolean;\n  readonly isLastMove: boolean;\n  readonly elapsedMs: number;\n  readonly totalElapsedMs: number;\n}\n\nexport interface Node extends ImmutableNode {\n  comment: string;\n  customData: unknown;\n  setElapsedMs(elapsedMs: number): void;\n}\n\nclass NodeImpl implements Node {\n  public next: NodeImpl | null = null;\n  public branch: NodeImpl | null = null;\n  public comment = \"\";\n  public customData: unknown;\n  public elapsedMs = 0;\n  public totalElapsedMs = 0;\n\n  constructor(\n    public number: number,\n    public prev: NodeImpl | null,\n    public branchIndex: number,\n    public activeBranch: boolean,\n    public nextColor: Color,\n    public move: Move | SpecialMove,\n    public isCheck: boolean\n  ) {}\n\n  get displayText(): string {\n    const prev =\n      this.prev && this.prev.move instanceof Move ? this.prev.move : null;\n    return this.move instanceof Move\n      ? this.move.getDisplayText(prev)\n      : specialMoveToDisplayString(this.move);\n  }\n\n  get timeText(): string {\n    const elapsed = millisecondsToMSS(this.elapsedMs);\n    const totalElapsed = millisecondsToHMMSS(this.totalElapsedMs);\n    return `${elapsed} / ${totalElapsed}`;\n  }\n\n  get hasBranch(): boolean {\n    return !!this.prev && !!this.prev.next && !!this.prev.next.branch;\n  }\n\n  get isFirstBranch(): boolean {\n    return !this.prev || this.prev.next === this;\n  }\n\n  get isLastMove(): boolean {\n    if (!this.next) {\n      return true;\n    }\n    for (let p: Node | null = this.next; p; p = p.branch) {\n      if (p.move instanceof Move) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  private updateTotalElapsedMs() {\n    this.totalElapsedMs = this.elapsedMs;\n    if (this.prev && this.prev.prev) {\n      this.totalElapsedMs += this.prev.prev.totalElapsedMs;\n    }\n  }\n\n  setElapsedMs(elapsedMs: number): void {\n    this.elapsedMs = elapsedMs;\n    this.updateTotalElapsedMs();\n    let p = this.next;\n    const stack: NodeImpl[] = [];\n    while (p) {\n      p.updateTotalElapsedMs();\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n\n  static newRootEntry(color: Color): NodeImpl {\n    return new NodeImpl(\n      0, // number\n      null, // prev\n      0, // branchIndex\n      true, // activeBranch\n      color, // color\n      SpecialMove.START, // move\n      false // isCheck\n    );\n  }\n}\n\nexport interface ImmutableRecord {\n  readonly metadata: ImmutableRecordMetadata;\n  readonly initialPosition: ImmutablePosition;\n  readonly position: ImmutablePosition;\n  readonly first: ImmutableNode;\n  readonly current: ImmutableNode;\n  readonly moves: Array<ImmutableNode>;\n  readonly movesBefore: Array<ImmutableNode>;\n  readonly length: number;\n  readonly branchBegin: ImmutableNode;\n  readonly repetition: boolean;\n  readonly perpetualCheck: Color | null;\n  readonly usi: string;\n  readonly usiAll: string;\n  readonly sfen: string;\n  // 深さ優先で全てのノードを訪問します。\n  forEach(handler: (node: ImmutableNode) => void): void;\n  on(event: \"changePosition\", handler: () => void): void;\n}\n\nexport default class Record {\n  public metadata: RecordMetadata;\n  private _initialPosition: ImmutablePosition;\n  private _position: Position;\n  private _first: NodeImpl;\n  private _current: NodeImpl;\n  private repetitionCounts: { [sfen: string]: number } = {};\n  private repetitionStart: { [sfen: string]: number } = {};\n  private onChangePosition = (): void => {\n    /* noop */\n  };\n\n  constructor(position?: ImmutablePosition) {\n    this.metadata = new RecordMetadata();\n    this._initialPosition = position ? position.clone() : new Position();\n    this._position = this.initialPosition.clone();\n    this._first = NodeImpl.newRootEntry(this._initialPosition.color);\n    this._current = this._first;\n    this.incrementRepetition();\n  }\n\n  get initialPosition(): ImmutablePosition {\n    return this._initialPosition;\n  }\n\n  get position(): ImmutablePosition {\n    return this._position;\n  }\n\n  get first(): Node {\n    return this._first;\n  }\n\n  get current(): Node {\n    return this._current;\n  }\n\n  get moves(): Array<Node> {\n    const moves = this.movesBefore;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as NodeImpl;\n      }\n      moves.push(p);\n    }\n    return moves;\n  }\n\n  get movesBefore(): Array<Node> {\n    return this._movesBefore;\n  }\n\n  private get _movesBefore(): Array<NodeImpl> {\n    const moves = new Array<NodeImpl>();\n    moves.unshift(this._current);\n    for (let p = this._current.prev; p; p = p.prev) {\n      moves.unshift(p);\n    }\n    return moves;\n  }\n\n  get length(): number {\n    let len = this._current.number;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as NodeImpl;\n      }\n      len = p.number;\n    }\n    return len;\n  }\n\n  get branchBegin(): Node {\n    return this._current.prev\n      ? (this._current.prev.next as Node)\n      : this._current;\n  }\n\n  clear(position?: ImmutablePosition): void {\n    this.metadata = new RecordMetadata();\n    if (position) {\n      this._initialPosition = position.clone();\n    }\n    this._position = this.initialPosition.clone();\n    this._first = NodeImpl.newRootEntry(this._initialPosition.color);\n    this._current = this._first;\n    this.repetitionCounts = {};\n    this.repetitionStart = {};\n    this.incrementRepetition();\n    this.onChangePosition();\n  }\n\n  goBack(): boolean {\n    if (this._goBack()) {\n      this.onChangePosition();\n      return true;\n    }\n    return false;\n  }\n\n  private _goBack(): boolean {\n    if (this._current.prev) {\n      if (this._current.move instanceof Move) {\n        this.decrementRepetition();\n        this._position.undoMove(this._current.move);\n      }\n      this._current = this._current.prev;\n      return true;\n    }\n    return false;\n  }\n\n  goForward(): boolean {\n    if (this._goForward()) {\n      this.onChangePosition();\n      return true;\n    }\n    return false;\n  }\n\n  private _goForward(): boolean {\n    if (this._current.next) {\n      this._current = this._current.next;\n      while (!this._current.activeBranch) {\n        this._current = this._current.branch as NodeImpl;\n      }\n      if (this._current.move instanceof Move) {\n        this._position.doMove(this._current.move, {\n          ignoreValidation: true,\n        });\n        this.incrementRepetition();\n      }\n      return true;\n    }\n    return false;\n  }\n\n  goto(number: number): void {\n    while (number < this._current.number) {\n      if (!this._goBack()) {\n        break;\n      }\n    }\n    while (number > this._current.number) {\n      if (!this._goForward()) {\n        break;\n      }\n    }\n    this.onChangePosition();\n  }\n\n  resetAllBranchSelection(): void {\n    this._forEach((node) => {\n      node.activeBranch = node.isFirstBranch;\n    });\n  }\n\n  switchBranchByIndex(index: number): boolean {\n    if (this.current.branchIndex === index) {\n      return true;\n    }\n    if (!this._current.prev) {\n      return false;\n    }\n    let ok = false;\n    for (let p = this._current.prev.next; p; p = p.branch) {\n      if (p.branchIndex === index) {\n        p.activeBranch = true;\n        if (this._current.move instanceof Move) {\n          this.decrementRepetition();\n          this._position.undoMove(this._current.move);\n        }\n        this._current = p;\n        if (this._current.move instanceof Move) {\n          this._position.doMove(this._current.move, {\n            ignoreValidation: true,\n          });\n          this.incrementRepetition();\n        }\n        ok = true;\n      } else {\n        p.activeBranch = false;\n      }\n    }\n    if (ok) {\n      this.onChangePosition();\n    }\n    return ok;\n  }\n\n  append(move: Move | SpecialMove, opt?: DoMoveOption): boolean {\n    let isCheck = false;\n    if (move instanceof Move) {\n      if (!this._position.doMove(move, opt)) {\n        return false;\n      }\n      this.incrementRepetition();\n      isCheck = this.position.checked;\n    }\n    if (this._current !== this.first && !(this._current.move instanceof Move)) {\n      this.goBack();\n    }\n    if (!this._current.next) {\n      this._current.next = new NodeImpl(\n        this._current.number + 1, // number\n        this._current, // prev\n        0, // branchIndex\n        true, // activeBranch\n        this.position.color, // nextColor\n        move,\n        isCheck\n      );\n      this._current = this._current.next;\n      this._current.setElapsedMs(0);\n      this.onChangePosition();\n      return true;\n    }\n    let p: NodeImpl | null;\n    for (p = this._current.next; p; p = p.branch) {\n      p.activeBranch = false;\n    }\n    let lastBranch = this._current.next;\n    for (p = this._current.next; p; p = p.branch) {\n      if (\n        (p.move instanceof Move &&\n          move instanceof Move &&\n          move.equals(p.move)) ||\n        move === p.move\n      ) {\n        this._current = p;\n        this._current.activeBranch = true;\n        this.onChangePosition();\n        return true;\n      }\n      lastBranch = p;\n    }\n    this._current = new NodeImpl(\n      this._current.number + 1, // number\n      this._current, // prev\n      lastBranch.branchIndex + 1, // branchIndex\n      true, // activeBranch\n      this.position.color, // nextColor\n      move,\n      isCheck\n    );\n    this._current.setElapsedMs(0);\n    lastBranch.branch = this._current;\n    this.onChangePosition();\n    return true;\n  }\n\n  removeCurrentMove(): void {\n    const target = this._current;\n    if (!this.goBack()) {\n      this._current.next = null;\n      return;\n    }\n    if (this._current.next === target) {\n      this._current.next = target.branch;\n    } else {\n      for (let p = this._current.next; p; p = p.branch) {\n        if (p.branch === target) {\n          p.branch = target.branch;\n          break;\n        }\n      }\n    }\n    let branchIndex = 0;\n    for (let p = this._current.next; p; p = p.branch) {\n      p.branchIndex = branchIndex;\n      branchIndex += 1;\n    }\n    if (this._current.next) {\n      this._current.next.activeBranch = true;\n    }\n    this.onChangePosition();\n  }\n\n  removeNextMove(): void {\n    this._current.next = null;\n  }\n\n  private incrementRepetition(): void {\n    const sfen = this.position.sfen;\n    if (this.repetitionCounts[sfen]) {\n      this.repetitionCounts[sfen] += 1;\n    } else {\n      this.repetitionCounts[sfen] = 1;\n      this.repetitionStart[sfen] = this.current.number;\n    }\n  }\n\n  private decrementRepetition(): void {\n    const sfen = this.position.sfen;\n    this.repetitionCounts[sfen] -= 1;\n    if (this.repetitionCounts[sfen] === 0) {\n      delete this.repetitionCounts[sfen];\n      delete this.repetitionStart[sfen];\n    }\n  }\n\n  get repetition(): boolean {\n    return this.repetitionCounts[this.position.sfen] >= 4;\n  }\n\n  get perpetualCheck(): Color | null {\n    if (!this.repetition) {\n      return null;\n    }\n    const sfen = this.position.sfen;\n    const since = this.repetitionStart[sfen];\n    let black = true;\n    let white = true;\n    let color = this.position.color;\n    for (let p = this.current; p.number >= since; p = p.prev as Node) {\n      color = reverseColor(color);\n      if (p.isCheck) {\n        continue;\n      }\n      if (color === Color.BLACK) {\n        black = false;\n      } else {\n        white = false;\n      }\n    }\n    return black ? Color.BLACK : white ? Color.WHITE : null;\n  }\n\n  // USI プロトコルの position コマンドを返却します。\n  // USI プロトコルでは平手の場合に \"position startpos\" を使用することができるとされていますが、\n  // 一貫性を持たせるために \"position sfen\" のみを使用します。\n  get usi(): string {\n    let ret = \"position sfen \" + this.initialPosition.sfen + \" moves\";\n    this.movesBefore.forEach((node) => {\n      if (node.move instanceof Move) {\n        ret += \" \" + node.move.sfen;\n      }\n    });\n    return ret;\n  }\n\n  get usiAll(): string {\n    let ret = this.usi;\n    for (let p = this._current.next; p; p = p.next) {\n      while (!p.activeBranch) {\n        p = p.branch as NodeImpl;\n      }\n      if (p.move instanceof Move) {\n        ret += \" \" + p.move.sfen;\n      }\n    }\n    return ret;\n  }\n\n  get sfen(): string {\n    return this.position.getSFEN(this._current.number + 1);\n  }\n\n  // 深さ優先で全てのノードを訪問します。\n  forEach(handler: (node: Node) => void): void {\n    this._forEach(handler);\n  }\n\n  private _forEach(handler: (node: NodeImpl) => void): void {\n    let p: NodeImpl | null = this._first;\n    const stack: NodeImpl[] = [];\n    while (p) {\n      handler(p);\n      if (p.branch) {\n        stack.push(p.branch);\n      }\n      if (p.next) {\n        p = p.next;\n      } else {\n        p = stack.pop() || null;\n      }\n    }\n  }\n\n  on(event: \"changePosition\", handler: () => void): void;\n  on(event: string, handler: unknown): void {\n    switch (event) {\n      case \"changePosition\":\n        this.onChangePosition = handler as () => void;\n        break;\n    }\n  }\n\n  static newByUSI(data: string): Record | Error {\n    const prefixPositionStartpos = \"position startpos \";\n    const prefixPositionSfen = \"position sfen \";\n    const prefixStartpos = \"startpos \";\n    const prefixSfen = \"sfen \";\n    const prefixMoves = \"moves \";\n    if (data.startsWith(prefixPositionStartpos)) {\n      return Record.newByUSIFromMoves(\n        new Position(),\n        data.slice(prefixPositionStartpos.length)\n      );\n    } else if (data.startsWith(prefixPositionSfen)) {\n      return Record.newByUSIFromSFENPosition(\n        data.slice(prefixPositionSfen.length)\n      );\n    } else if (data.startsWith(prefixStartpos)) {\n      return Record.newByUSIFromMoves(\n        new Position(),\n        data.slice(prefixStartpos.length)\n      );\n    } else if (data.startsWith(prefixSfen)) {\n      return Record.newByUSIFromSFENPosition(data.slice(prefixSfen.length));\n    } else if (data.startsWith(prefixMoves)) {\n      return Record.newByUSIFromMoves(new Position(), data);\n    } else {\n      return new Error(\"不正なUSI(1): \" + data);\n    }\n  }\n\n  private static newByUSIFromSFENPosition(data: string): Record | Error {\n    const sections = data.split(\" \");\n    if (sections.length < 4) {\n      return new Error(\"不正なUSI(2): \" + data);\n    }\n    const position = Position.newBySFEN(sections.slice(0, 4).join(\" \"));\n    if (!position) {\n      return new Error(\"不正なUSI(3): \" + data);\n    }\n    return Record.newByUSIFromMoves(position, sections.slice(4).join(\" \"));\n  }\n\n  private static newByUSIFromMoves(\n    position: ImmutablePosition,\n    data: string\n  ): Record | Error {\n    const record = new Record(position);\n    if (data.length === 0) {\n      return record;\n    }\n    const sections = data.split(\" \");\n    if (sections[0] !== \"moves\") {\n      return new Error(\"不正なUSI(4): \" + data);\n    }\n    for (let i = 1; i < sections.length; i++) {\n      const parsed = parseSFENMove(sections[i]);\n      if (!parsed) {\n        break;\n      }\n      let move = record.position.createMove(parsed.from, parsed.to);\n      if (!move) {\n        return new Error(\"不正な指し手: \" + sections[i]);\n      }\n      if (parsed.promote) {\n        move = move.withPromote();\n      }\n      record.append(move, { ignoreValidation: true });\n    }\n    return record;\n  }\n}\n\nexport function getNextColorFromUSI(usi: string): Color {\n  const sections = usi.trim().split(\" \");\n  if (sections[1] === \"startpos\" || sections[3] === \"b\") {\n    return sections.length % 2 === 1 ? Color.BLACK : Color.WHITE;\n  }\n  return sections.length % 2 === 0 ? Color.BLACK : Color.WHITE;\n}\n","export function millisecondsToHMMSS(ms: number): string {\n  return secondsToHMMSS(Math.floor(ms / 1e3));\n}\n\nexport function millisecondsToMSS(ms: number): string {\n  return secondsToMSS(Math.floor(ms / 1e3));\n}\n\nexport function secondsToHMMSS(seconds: number): string {\n  const h = Math.floor(seconds / 3600);\n  const m = Math.floor((seconds - h * 3600) / 60);\n  const s = seconds % 60;\n  return (\n    h + \":\" + String(m).padStart(2, \"0\") + \":\" + String(s).padStart(2, \"0\")\n  );\n}\n\nexport function secondsToMSS(seconds: number): string {\n  const m = Math.floor(seconds / 60);\n  const s = seconds % 60;\n  return String(m).padStart(2, \" \") + \":\" + String(s).padStart(2, \"0\");\n}\n","export function appendLine(base: string, newLine: string): string {\n  return (\n    (base ? appendReturnIfNotExists(base) : \"\") +\n    appendReturnIfNotExists(newLine)\n  );\n}\n\nexport function appendReturnIfNotExists(str: string): string {\n  return str + (str.endsWith(\"\\n\") ? \"\" : \"\\n\");\n}\n\nexport function toString(data: unknown): string {\n  return data instanceof Object ? JSON.stringify(data) : String(data);\n}\n\nexport function formatPercentage(\n  numerator: number,\n  denominator: number,\n  fractionDigits: number\n): string {\n  return ((numerator / denominator) * 100).toFixed(fractionDigits) + \"%\";\n}\n","// KIF file format (.kif or .kifu)\n// See http://kakinoki.o.oo7.jp/kif_format.html\n\nimport { appendLine } from \"@/helpers/string\";\nimport { millisecondsToHMMSS, millisecondsToMSS } from \"@/helpers/time\";\nimport {\n  Color,\n  Move,\n  Position,\n  ImmutablePosition,\n  Record,\n  RecordMetadata,\n  RecordMetadataKey,\n  Square,\n} from \".\";\nimport Board, { InitialPositionType } from \"./board\";\nimport Hand, { ImmutableHand } from \"./hand\";\nimport { Piece, PieceType } from \"./piece\";\nimport {\n  ImmutableRecord,\n  ImmutableRecordMetadata,\n  SpecialMove,\n} from \"./record\";\n\nconst metadataKeyMap: { [key: string]: RecordMetadataKey | undefined } = {\n  先手: RecordMetadataKey.BLACK_NAME,\n  後手: RecordMetadataKey.WHITE_NAME,\n  開始日時: RecordMetadataKey.START_DATETIME,\n  終了日時: RecordMetadataKey.END_DATETIME,\n  対局日: RecordMetadataKey.DATE,\n  棋戦: RecordMetadataKey.TOURNAMENT,\n  戦型: RecordMetadataKey.STRATEGY,\n  表題: RecordMetadataKey.TITLE,\n  持ち時間: RecordMetadataKey.TIME_LIMIT,\n  消費時間: RecordMetadataKey.TIME_SPENT,\n  場所: RecordMetadataKey.PLACE,\n  掲載: RecordMetadataKey.POSTED_ON,\n  備考: RecordMetadataKey.NOTE,\n  先手省略名: RecordMetadataKey.BLACK_SHORT_NAME,\n  後手省略名: RecordMetadataKey.WHITE_SHORT_NAME,\n  作品番号: RecordMetadataKey.OPUS_NO,\n  作品名: RecordMetadataKey.OPUS_NAME,\n  作者: RecordMetadataKey.AUTHOR,\n  発表誌: RecordMetadataKey.PUBLISHED_ON,\n  発表年月: RecordMetadataKey.PUBLISHED_AT,\n  出典: RecordMetadataKey.SOURCE,\n  手数: RecordMetadataKey.LENGTH,\n  完全性: RecordMetadataKey.INTEGRITY,\n  分類: RecordMetadataKey.CATEGORY,\n  受賞: RecordMetadataKey.AWARD,\n};\n\nconst metadataNameMap = {\n  blackName: \"先手\",\n  whiteName: \"後手\",\n  startDatetime: \"開始日時\",\n  endDatetime: \"終了日時\",\n  date: \"対局日\",\n  tournament: \"棋戦\",\n  strategy: \"戦型\",\n  title: \"表題\",\n  timeLimit: \"持ち時間\",\n  timeSpent: \"消費時間\",\n  place: \"場所\",\n  postedOn: \"掲載\",\n  note: \"備考\",\n  blackShortName: \"先手省略名\",\n  whiteShortName: \"後手省略名\",\n  opusNo: \"作品番号\",\n  opusName: \"作品名\",\n  author: \"作者\",\n  publishedOn: \"発表誌\",\n  publishedAt: \"発表年月\",\n  source: \"出典\",\n  length: \"手数\",\n  integrity: \"完全性\",\n  category: \"分類\",\n  award: \"受賞\",\n};\n\nenum LineType {\n  PROGRAM_COMMENT,\n  METADATA,\n  HANDICAP,\n  BLACK_HAND,\n  WHITE_HAND,\n  BOARD,\n  BLACK_TURN,\n  WHITE_TURN,\n  MOVE,\n  COMMENT,\n  UNKNOWN,\n}\n\n// & で始まる行はしおりを意味するらしいが用途がよくわらず実際の使用例を見たことがない。\nconst linePatterns = [\n  {\n    prefix: /^#/,\n    type: LineType.PROGRAM_COMMENT,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^手合割：/,\n    type: LineType.HANDICAP,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手の持駒：/,\n    type: LineType.BLACK_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手の持駒：/,\n    type: LineType.WHITE_HAND,\n    removePrefix: true,\n    isPosition: true,\n  },\n  {\n    prefix: /^\\|/,\n    type: LineType.BOARD,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^先手番/,\n    type: LineType.BLACK_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^後手番/,\n    type: LineType.WHITE_TURN,\n    removePrefix: false,\n    isPosition: true,\n  },\n  {\n    prefix: /^ *[0-9]+ +/,\n    type: LineType.MOVE,\n    removePrefix: false,\n    isPosition: false,\n  },\n  {\n    prefix: /^\\*/,\n    type: LineType.COMMENT,\n    removePrefix: true,\n    isPosition: false,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  data: string;\n  isPosition: boolean;\n  metadataKey: string;\n};\n\nfunction parseLine(line: string): Line {\n  for (let i = 0; i < linePatterns.length; i++) {\n    const pattern = linePatterns[i];\n    const matched = line.match(pattern.prefix);\n    if (matched) {\n      const begin = pattern.removePrefix ? matched[0].length : 0;\n      return {\n        type: pattern.type,\n        data: line.substring(begin),\n        isPosition: pattern.isPosition,\n        metadataKey: \"\",\n      };\n    }\n  }\n  const metadataPrefix = line.match(/^[^ ]+：/);\n  if (metadataPrefix) {\n    const prefix = metadataPrefix[0];\n    return {\n      type: LineType.METADATA,\n      data: line.substring(prefix.length),\n      isPosition: false,\n      metadataKey: prefix.substring(0, prefix.length - 1),\n    };\n  }\n  return {\n    type: LineType.UNKNOWN,\n    data: line,\n    isPosition: false,\n    metadataKey: \"\",\n  };\n}\n\nfunction readHandicap(position: Position, data: string): Error | undefined {\n  switch (data.trim()) {\n    case \"平手\":\n      position.reset(InitialPositionType.STANDARD);\n      return;\n    case \"香落ち\":\n      position.reset(InitialPositionType.HANDICAP_LANCE);\n      return;\n    case \"右香落ち\":\n      position.reset(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      return;\n    case \"角落ち\":\n      position.reset(InitialPositionType.HANDICAP_BISHOP);\n      return;\n    case \"飛車落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK);\n      return;\n    case \"飛香落ち\":\n      position.reset(InitialPositionType.HANDICAP_ROOK_LANCE);\n      return;\n    case \"二枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_2PIECES);\n      return;\n    case \"四枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_4PIECES);\n      return;\n    case \"六枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_6PIECES);\n      return;\n    case \"八枚落ち\":\n      position.reset(InitialPositionType.HANDICAP_8PIECES);\n      return;\n    case \"その他\":\n      position.reset(InitialPositionType.EMPTY);\n      return;\n  }\n  return new Error(\"不正なデータ:\" + data);\n}\n\nconst fileStringToNumber: { [file: string]: number } = {\n  \"１\": 1,\n  \"２\": 2,\n  \"３\": 3,\n  \"４\": 4,\n  \"５\": 5,\n  \"６\": 6,\n  \"７\": 7,\n  \"８\": 8,\n  \"９\": 9,\n};\n\nconst rankStringToNumber: { [rank: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n};\n\nconst kansujiStringToNumber: { [kansuji: string]: number } = {\n  一: 1,\n  二: 2,\n  三: 3,\n  四: 4,\n  五: 5,\n  六: 6,\n  七: 7,\n  八: 8,\n  九: 9,\n  十: 10,\n  十一: 11,\n  十二: 12,\n  十三: 13,\n  十四: 14,\n  十五: 15,\n  十六: 16,\n  十七: 17,\n  十八: 18,\n};\n\nconst stringToNumber: { [number: string]: number } = {\n  \"1\": 1,\n  \"2\": 2,\n  \"3\": 3,\n  \"4\": 4,\n  \"5\": 5,\n  \"6\": 6,\n  \"7\": 7,\n  \"8\": 8,\n  \"9\": 9,\n};\n\nconst stringToPieceType: { [kanji: string]: PieceType } = {\n  王: PieceType.KING,\n  玉: PieceType.KING,\n  飛: PieceType.ROOK,\n  龍: PieceType.DRAGON,\n  竜: PieceType.DRAGON,\n  角: PieceType.BISHOP,\n  馬: PieceType.HORSE,\n  金: PieceType.GOLD,\n  銀: PieceType.SILVER,\n  成銀: PieceType.PROM_SILVER,\n  全: PieceType.PROM_SILVER,\n  桂: PieceType.KNIGHT,\n  成桂: PieceType.PROM_KNIGHT,\n  圭: PieceType.PROM_KNIGHT,\n  香: PieceType.LANCE,\n  成香: PieceType.PROM_LANCE,\n  杏: PieceType.PROM_LANCE,\n  歩: PieceType.PAWN,\n  と: PieceType.PROM_PAWN,\n};\n\nconst stringToSpecialMove: { [move: string]: SpecialMove } = {\n  中断: SpecialMove.INTERRUPT,\n  投了: SpecialMove.RESIGN,\n  持将棋: SpecialMove.DRAW,\n  千日手: SpecialMove.REPETITION_DRAW,\n  詰み: SpecialMove.MATE,\n  切れ負け: SpecialMove.TIMEOUT,\n  反則勝ち: SpecialMove.FOUL_WIN,\n  反則負け: SpecialMove.FOUL_LOSE,\n  入玉勝ち: SpecialMove.ENTERING_OF_KING,\n  不戦勝: SpecialMove.WIN_BY_DEFAULT,\n  不戦敗: SpecialMove.LOSS_BY_DEFAULT,\n};\n\nconst moveRegExp =\n  /^ *([0-9]+) +[▲△]?([１２３４５６７８９][一二三四五六七八九]|同\\u3000)(王|玉|飛|龍|竜|角|馬|金|銀|成銀|全|桂|成桂|圭|香|成香|杏|歩|と)(成?)(打|\\([1-9][1-9]\\)) *(.*)$/;\n\nconst timeRegExp = /\\( *([0-9]+):([0-9]+)\\/[0-9: ]*\\)/;\n\nconst specialMoveRegExp =\n  /^ *([0-9]+) +(中断|投了|持将棋|千日手|詰み|切れ負け|反則勝ち|反則負け|入玉勝ち|不戦勝|不戦敗) *(.*)$/;\n\nfunction readBoard(board: Board, data: string): Error | undefined {\n  if (data.length < 21) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  const rankStr = data[20];\n  const rank = rankStringToNumber[rankStr];\n  if (!rank) {\n    return new Error(\"不正な盤面:\" + data);\n  }\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const square = new Square(file, rank);\n    const index = x * 2 + 1;\n    const pieceStr = data[index + 1];\n    const pieceType = stringToPieceType[pieceStr];\n    if (!pieceType) {\n      board.remove(square);\n      continue;\n    }\n    const color = data[index] !== \"v\" ? Color.BLACK : Color.WHITE;\n    board.set(square, new Piece(color, pieceType));\n  }\n}\n\nfunction readHand(hand: Hand, data: string): Error | undefined {\n  const sections = data.split(/[ 　]/);\n  for (const section of sections) {\n    if (!section || section === \"なし\") {\n      continue;\n    }\n    const pieceStr = section[0];\n    const numberStr = section.substring(1);\n    const pieceType = stringToPieceType[pieceStr];\n    const n = kansujiStringToNumber[numberStr] || 1;\n    if (!pieceType) {\n      return new Error(\"不正な持ち駒: \" + section);\n    }\n    hand.add(pieceType, n);\n  }\n  return;\n}\n\nfunction readMoveTime(record: Record, data: string): void {\n  const timeResult = timeRegExp.exec(data);\n  if (timeResult) {\n    const minutes = timeResult[1];\n    const seconds = timeResult[2];\n    const s = Number.parseInt(minutes) * 60 + Number.parseInt(seconds);\n    record.current.setElapsedMs(s * 1e3);\n  }\n}\n\nfunction readMove(record: Record, data: string): Error | undefined {\n  let result = specialMoveRegExp.exec(data);\n  if (result) {\n    const num = Number(result[1]);\n    const move = stringToSpecialMove[result[2]];\n    const time = result[3];\n    record.goto(num - 1);\n    record.append(move, {\n      ignoreValidation: true,\n    });\n    readMoveTime(record, time);\n    return;\n  }\n\n  result = moveRegExp.exec(data);\n  if (!result) {\n    return new Error(\"不正な指し手形式:\" + data);\n  }\n  const num = Number(result[1]);\n  const toStr = result[2];\n  const pieceTypeStr = result[3];\n  const promStr = result[4];\n  const fromStr = result[5];\n  const time = result[6];\n\n  if (num === 0) {\n    return new Error(\"不正な手数:\" + data);\n  }\n  record.goto(num - 1);\n  let to: Square;\n  let from: Square | PieceType;\n  if (toStr === \"同　\") {\n    if (!(record.current.move instanceof Move)) {\n      return new Error(\"不明な移動先: \" + data);\n    }\n    to = record.current.move.to;\n  } else {\n    const file = fileStringToNumber[toStr[0]];\n    const rank = rankStringToNumber[toStr[1]];\n    to = new Square(file, rank);\n  }\n  if (fromStr === \"打\") {\n    from = stringToPieceType[pieceTypeStr];\n  } else {\n    const file = stringToNumber[fromStr[1]];\n    const rank = stringToNumber[fromStr[2]];\n    from = new Square(file, rank);\n  }\n  let move = record.position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + data);\n  }\n  if (promStr === \"成\") {\n    move = move.withPromote();\n  }\n  record.append(move, {\n    ignoreValidation: true,\n  });\n  readMoveTime(record, time);\n  return;\n}\n\nexport function importKakinoki(data: string): Record | Error {\n  const metadata = new RecordMetadata();\n  const record = new Record();\n  const lines = data.split(/\\r?\\n/);\n  const position = new Position();\n  let preMoveComment = \"\";\n  let inMoveSection = false;\n  for (const line of lines) {\n    if (line === \"\") {\n      continue;\n    }\n    const parsed = parseLine(line);\n    if (inMoveSection && parsed.isPosition) {\n      return new Error(\"不正なデータ: \" + line);\n    }\n    let e: Error | undefined;\n    switch (parsed.type) {\n      case LineType.METADATA: {\n        const standardKey = metadataKeyMap[parsed.metadataKey];\n        if (standardKey) {\n          metadata.setStandardMetadata(standardKey, parsed.data);\n        } else {\n          metadata.setCustomMetadata(parsed.metadataKey, parsed.data);\n        }\n        break;\n      }\n      case LineType.HANDICAP:\n        e = readHandicap(position, parsed.data);\n        break;\n      case LineType.BLACK_HAND:\n        e = readHand(position.blackHand, parsed.data);\n        break;\n      case LineType.WHITE_HAND:\n        e = readHand(position.whiteHand, parsed.data);\n        break;\n      case LineType.BOARD:\n        e = readBoard(position.board, parsed.data);\n        break;\n      case LineType.BLACK_TURN:\n        position.setColor(Color.BLACK);\n        break;\n      case LineType.WHITE_TURN:\n        position.setColor(Color.WHITE);\n        break;\n      case LineType.MOVE:\n        if (!inMoveSection) {\n          record.clear(position);\n          record.first.comment = preMoveComment;\n          inMoveSection = true;\n        }\n        e = readMove(record, parsed.data);\n        break;\n      case LineType.COMMENT:\n        if (inMoveSection) {\n          record.current.comment = appendLine(\n            record.current.comment,\n            parsed.data\n          );\n        } else {\n          preMoveComment = appendLine(preMoveComment, parsed.data);\n        }\n        break;\n      case LineType.PROGRAM_COMMENT:\n        break;\n      case LineType.UNKNOWN:\n        break;\n    }\n    if (e) {\n      return e;\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n    record.first.comment = preMoveComment;\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  record.metadata = metadata;\n  return record;\n}\n\nconst kanjiNumberStrings = [\n  \"一\",\n  \"二\",\n  \"三\",\n  \"四\",\n  \"五\",\n  \"六\",\n  \"七\",\n  \"八\",\n  \"九\",\n  \"十\",\n  \"十一\",\n  \"十二\",\n  \"十三\",\n  \"十四\",\n  \"十五\",\n  \"十六\",\n  \"十七\",\n  \"十八\",\n];\nconst fileStrings = [\"１\", \"２\", \"３\", \"４\", \"５\", \"６\", \"７\", \"８\", \"９\"];\nconst rankStrings = kanjiNumberStrings;\n\nconst pieceTypeToStringForMove = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"成銀\",\n  knight: \"桂\",\n  promKnight: \"成桂\",\n  lance: \"香\",\n  promLance: \"成香\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst pieceTypeToStringForBoard = {\n  king: \"玉\",\n  rook: \"飛\",\n  dragon: \"龍\",\n  bishop: \"角\",\n  horse: \"馬\",\n  gold: \"金\",\n  silver: \"銀\",\n  promSilver: \"全\",\n  knight: \"桂\",\n  promKnight: \"圭\",\n  lance: \"香\",\n  promLance: \"杏\",\n  pawn: \"歩\",\n  promPawn: \"と\",\n};\n\nconst specialMoveToString = {\n  start: \"\",\n  resign: \"投了\",\n  interrupt: \"中断\",\n  draw: \"持将棋\",\n  repetitionDraw: \"千日手\",\n  mate: \"詰み\",\n  timeout: \"切れ負け\",\n  foulWin: \"反則勝ち\",\n  foulLose: \"反則負け\",\n  enteringOfKing: \"入玉勝ち\",\n  winByDefault: \"不戦勝\",\n  lossByDefault: \"不戦敗\",\n};\n\ntype KakinokiExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: ImmutableRecordMetadata,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (const key of metadata.standardMetadataKeys) {\n    ret +=\n      metadataNameMap[key] +\n      \"：\" +\n      metadata.getStandardMetadata(key) +\n      returnCode;\n  }\n  for (const key of metadata.customMetadataKeys) {\n    ret += key + \"：\" + metadata.getCustomMetadata(key) + returnCode;\n  }\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"後手の持駒：\" + formatHand(position.whiteHand) + returnCode;\n  ret += \"  ９ ８ ７ ６ ５ ４ ３ ２ １\" + returnCode;\n  ret += \"+---------------------------+\" + returnCode;\n  for (let y = 0; y < 9; y++) {\n    ret += \"|\";\n    for (let x = 0; x < 9; x++) {\n      const square = Square.newByXY(x, y);\n      const piece = position.board.at(square);\n      if (!piece) {\n        ret += \" ・\";\n      } else if (piece.color === Color.BLACK) {\n        ret += \" \" + pieceTypeToStringForBoard[piece.type];\n      } else {\n        ret += \"v\" + pieceTypeToStringForBoard[piece.type];\n      }\n    }\n    ret += \"|\" + rankStrings[y] + returnCode;\n  }\n  ret += \"+---------------------------+\" + returnCode;\n  ret += \"先手の持駒：\" + formatHand(position.blackHand) + returnCode;\n  if (position.color === Color.BLACK) {\n    ret += \"先手番\" + returnCode;\n  } else {\n    ret += \"後手番\" + returnCode;\n  }\n  return ret;\n}\n\nfunction formatMove(move: Move): string {\n  let ret = \"\";\n  ret += fileStrings[move.to.file - 1];\n  ret += rankStrings[move.to.rank - 1];\n  ret += pieceTypeToStringForMove[move.pieceType];\n  if (move.promote) {\n    ret += \"成\";\n  }\n  if (move.from instanceof Square) {\n    ret += \"(\" + move.from.file + move.from.rank + \")\";\n  } else {\n    ret += \"打\";\n  }\n  return ret;\n}\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    if (n >= 1) {\n      ret += pieceTypeToStringForBoard[pieceType];\n      if (n >= 2) {\n        ret += kanjiNumberStrings[n - 1];\n      }\n      ret += \"　\";\n    }\n  });\n  return ret;\n}\n\nexport function exportKakinoki(\n  record: ImmutableRecord,\n  options: KakinokiExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"# KIF形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  ret += \"手数----指手---------消費時間--\" + returnCode;\n  record.forEach((node) => {\n    if (node.number !== 0) {\n      if (!node.isFirstBranch) {\n        ret += returnCode;\n        ret += \"変化：\" + node.number + \"手\" + returnCode;\n      }\n      ret += node.number + \" \";\n      if (node.move instanceof Move) {\n        ret += formatMove(node.move);\n      } else {\n        ret += specialMoveToString[node.move];\n      }\n      const elapsed = millisecondsToMSS(node.elapsedMs);\n      const totalElapsed = millisecondsToHMMSS(node.totalElapsedMs);\n      ret += ` (${elapsed}/${totalElapsed})`;\n      if (node.isFirstBranch && node.hasBranch) {\n        ret += \"+\";\n      }\n      ret += returnCode;\n    }\n    if (node.comment.length !== 0) {\n      const comment = node.comment.endsWith(\"\\n\")\n        ? node.comment.slice(0, -1)\n        : node.comment;\n      ret += \"*\" + comment.replaceAll(\"\\n\", returnCode + \"*\") + returnCode;\n    }\n  });\n  return ret;\n}\n","// CSA file format (.csa)\n// See http://www2.computer-shogi.org/protocol/record_v22.html\n\nimport { appendLine } from \"@/helpers/string\";\nimport { Record } from \".\";\nimport { InitialPositionType } from \"./board\";\nimport { Color } from \"./color\";\nimport { ImmutableHand } from \"./hand\";\nimport Move from \"./move\";\nimport { Piece, PieceType, promotedPieceType } from \"./piece\";\nimport Position, {\n  countNotExistingPieces,\n  ImmutablePosition,\n} from \"./position\";\nimport {\n  ImmutableRecord,\n  ImmutableRecordMetadata,\n  RecordMetadata,\n  RecordMetadataKey,\n  SpecialMove,\n} from \"./record\";\nimport Square from \"./square\";\n\nenum LineType {\n  VERSION,\n  EXTENDED_COMMENT,\n  COMMENT,\n  BLACK_NAME,\n  WHITE_NAME,\n  METADATA,\n  POSITION,\n  RANK,\n  PIECES,\n  FIRST_TURN,\n  MOVE,\n  SPECIAL_MOVE,\n  ELAPSED,\n}\n\nenum SectionType {\n  HEADER,\n  MOVE,\n  NEUTRAL,\n}\n\nconst linePatterns = [\n  {\n    pattern: /^V/,\n    type: LineType.VERSION,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^'\\*(.+)$/,\n    type: LineType.EXTENDED_COMMENT,\n    sectionType: SectionType.NEUTRAL,\n  },\n  {\n    pattern: /^'(.+)$/,\n    type: LineType.COMMENT,\n    sectionType: SectionType.NEUTRAL,\n  },\n  {\n    pattern: /^N\\+(.+)$/,\n    type: LineType.BLACK_NAME,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^N-(.+)$/,\n    type: LineType.WHITE_NAME,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^\\$([^:]+):(.+)$/,\n    type: LineType.METADATA,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^PI([1-9]{2}[A-Z]{2})*$/,\n    type: LineType.POSITION,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^P[1-9]( \\* |[-+][A-Z][A-Z]){9}$/,\n    type: LineType.RANK,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^P[-+]([0-9]{2}[A-Z]{2})*/,\n    type: LineType.PIECES,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^[-+]$/,\n    type: LineType.FIRST_TURN,\n    sectionType: SectionType.HEADER,\n  },\n  {\n    pattern: /^[-+][0-9]{4}[A-Z]{2}/,\n    type: LineType.MOVE,\n    sectionType: SectionType.MOVE,\n  },\n  {\n    pattern: /^%[-+A-Z_]+/,\n    type: LineType.SPECIAL_MOVE,\n    sectionType: SectionType.MOVE,\n  },\n  {\n    pattern: /^T([0-9]+)/,\n    type: LineType.ELAPSED,\n    sectionType: SectionType.MOVE,\n  },\n];\n\ntype Line = {\n  type: LineType;\n  line: string;\n  args: string[];\n  sectionType: SectionType;\n};\n\nfunction parseLine(line: string): Line[] {\n  const results = [];\n  const lines = line.match(/^['N$]/) ? [line] : line.split(\",\");\n  for (const line of lines) {\n    for (let i = 0; i < linePatterns.length; i++) {\n      const matched = linePatterns[i].pattern.exec(line);\n      if (matched) {\n        results.push({\n          type: linePatterns[i].type,\n          line: line,\n          args: matched.slice(1),\n          sectionType: linePatterns[i].sectionType,\n        });\n        break;\n      }\n    }\n  }\n  return results;\n}\n\nconst csaNameToRecordMetadataKey: { [key: string]: RecordMetadataKey } = {\n  EVENT: RecordMetadataKey.TITLE,\n  SITE: RecordMetadataKey.PLACE,\n  START_TIME: RecordMetadataKey.START_DATETIME,\n  END_TIME: RecordMetadataKey.END_DATETIME,\n  TIME_LIMIT: RecordMetadataKey.TIME_LIMIT,\n  OPENING: RecordMetadataKey.STRATEGY,\n};\n\nconst csaNameToPieceType: { [name: string]: PieceType } = {\n  FU: PieceType.PAWN,\n  KY: PieceType.LANCE,\n  KE: PieceType.KNIGHT,\n  GI: PieceType.SILVER,\n  KI: PieceType.GOLD,\n  KA: PieceType.BISHOP,\n  HI: PieceType.ROOK,\n  OU: PieceType.KING,\n  TO: PieceType.PROM_PAWN,\n  NY: PieceType.PROM_LANCE,\n  NK: PieceType.PROM_KNIGHT,\n  NG: PieceType.PROM_SILVER,\n  UM: PieceType.HORSE,\n  RY: PieceType.DRAGON,\n};\n\nfunction parsePosition(line: string, position: Position): void {\n  position.reset(InitialPositionType.STANDARD);\n  for (let i = 2; i + 4 <= line.length; i += 4) {\n    const file = Number(line[i]);\n    const rank = Number(line[i + 1]);\n    position.board.remove(new Square(file, rank));\n  }\n}\n\nfunction parseRank(line: string, position: Position): Error | undefined {\n  const rank = Number(line[1]);\n  for (let x = 0; x < 9; x += 1) {\n    const file = 9 - x;\n    const begin = x * 3 + 2;\n    const section = line.slice(begin, begin + 3);\n    if (section[0] === \" \") {\n      continue;\n    }\n    const color = section[0] === \"+\" ? Color.BLACK : Color.WHITE;\n    const pieceType = csaNameToPieceType[section.slice(1)];\n    if (!pieceType) {\n      return new Error(\"不正な駒: \" + section);\n    }\n    position.board.set(new Square(file, rank), new Piece(color, pieceType));\n  }\n}\n\nfunction parsePieces(line: string, position: Position): Error | undefined {\n  const color = line[1] === \"+\" ? Color.BLACK : Color.WHITE;\n  for (let begin = 2; begin + 4 <= line.length; begin += 4) {\n    const section = line.slice(begin, begin + 4);\n    if (section === \"00AL\") {\n      const counts = countNotExistingPieces(position);\n      if (color === Color.BLACK) {\n        position.blackHand.forEach((pieceType) => {\n          position.blackHand.add(pieceType, counts[pieceType]);\n        });\n      } else {\n        position.whiteHand.forEach((pieceType) => {\n          position.whiteHand.add(pieceType, counts[pieceType]);\n        });\n      }\n      return;\n    }\n    const file = Number(section[0]);\n    const rank = Number(section[1]);\n    const pieceType = csaNameToPieceType[section.slice(2)];\n    if (!pieceType) {\n      return new Error(\"不正な駒: \" + section);\n    }\n    if (file !== 0 && rank !== 0) {\n      position.board.set(new Square(file, rank), new Piece(color, pieceType));\n    } else if (color === Color.BLACK) {\n      position.blackHand.add(pieceType, 1);\n    } else {\n      position.whiteHand.add(pieceType, 1);\n    }\n  }\n}\n\nfunction parseMove(line: string, position: ImmutablePosition): Move | Error {\n  const color = line[0] === \"+\" ? Color.BLACK : Color.WHITE;\n  if (color != position.color) {\n    return new Error(\"不正な手番: \" + line);\n  }\n  const fromFile = Number(line[1]);\n  const fromRank = Number(line[2]);\n  const toFile = Number(line[3]);\n  const toRank = Number(line[4]);\n  const pieceType = csaNameToPieceType[line.slice(5, 7)];\n  if (!pieceType) {\n    return new Error(\"不正な駒の種類: \" + line);\n  }\n  const from =\n    fromFile === 0 && fromRank === 0\n      ? pieceType\n      : new Square(fromFile, fromRank);\n  const to = new Square(toFile, toRank);\n  let move = position.createMove(from, to);\n  if (!move) {\n    return new Error(\"不正な指し手: \" + line);\n  }\n  if (from instanceof Square) {\n    const basePiece = position.board.at(from);\n    if (!basePiece) {\n      return new Error(\"存在しない駒: \" + line);\n    }\n    if (basePiece.type !== pieceType) {\n      if (basePiece.promoted().type === pieceType) {\n        move = move.withPromote();\n      } else {\n        return new Error(\"存在しない駒: \" + line);\n      }\n    }\n  }\n  return move;\n}\n\nfunction parseSpecialMove(line: string): SpecialMove | undefined {\n  switch (line) {\n    case \"%TORYO\":\n      return SpecialMove.RESIGN;\n    case \"%CHUDAN\":\n      return SpecialMove.INTERRUPT;\n    case \"%SENNICHITE\":\n      return SpecialMove.REPETITION_DRAW;\n    case \"%TIME_UP\":\n      return SpecialMove.TIMEOUT;\n    case \"%ILLEGAL_MOVE\":\n      return SpecialMove.FOUL_LOSE;\n    case \"%JISHOGI\":\n      return SpecialMove.DRAW;\n    case \"%KACHI\":\n      return SpecialMove.ENTERING_OF_KING;\n    case \"%HIKIWAKE\":\n      return SpecialMove.DRAW;\n    case \"%TSUMI\":\n      return SpecialMove.MATE;\n  }\n}\n\nexport function parseCSAMove(\n  position: ImmutablePosition,\n  line: string\n): Move | Error {\n  return parseMove(line, position);\n}\n\nexport function importCSA(data: string): Record | Error {\n  const metadata = new RecordMetadata();\n  const record = new Record();\n  const position = new Position();\n  position.reset(InitialPositionType.EMPTY);\n  let preMoveComment = \"\";\n  let inMoveSection = false;\n  const lines = data.replace(/\\r?\\n\\/(\\r?\\n[\\s\\S]*)?$/, \"\").split(/\\r?\\n/);\n  for (const line of lines) {\n    for (const parsed of parseLine(line)) {\n      if (\n        (parsed.sectionType === SectionType.HEADER && inMoveSection) ||\n        (parsed.sectionType === SectionType.MOVE && !inMoveSection)\n      ) {\n        return new Error(\"不正な行が検出されました: \" + parsed.line);\n      }\n      switch (parsed.type) {\n        case LineType.VERSION:\n          break;\n        case LineType.EXTENDED_COMMENT:\n          if (inMoveSection) {\n            record.current.comment = appendLine(\n              record.current.comment,\n              parsed.args[0]\n            );\n          } else {\n            preMoveComment = appendLine(preMoveComment, parsed.args[0]);\n          }\n          break;\n        case LineType.COMMENT:\n          break;\n        case LineType.BLACK_NAME:\n          metadata.setStandardMetadata(\n            RecordMetadataKey.BLACK_NAME,\n            parsed.args[0]\n          );\n          break;\n        case LineType.WHITE_NAME:\n          metadata.setStandardMetadata(\n            RecordMetadataKey.WHITE_NAME,\n            parsed.args[0]\n          );\n          break;\n        case LineType.METADATA: {\n          const key = csaNameToRecordMetadataKey[parsed.args[0]];\n          if (key) {\n            metadata.setStandardMetadata(key, parsed.args[1]);\n          } else {\n            metadata.setCustomMetadata(parsed.args[0], parsed.args[1]);\n          }\n          break;\n        }\n        case LineType.POSITION:\n          parsePosition(parsed.line, position);\n          break;\n        case LineType.RANK: {\n          const error = parseRank(parsed.line, position);\n          if (error) {\n            return error;\n          }\n          break;\n        }\n        case LineType.PIECES: {\n          const error = parsePieces(parsed.line, position);\n          if (error) {\n            return error;\n          }\n          break;\n        }\n        case LineType.FIRST_TURN:\n          if (parsed.line[0] === \"+\") {\n            position.setColor(Color.BLACK);\n          } else {\n            position.setColor(Color.WHITE);\n          }\n          record.clear(position);\n          record.first.comment = preMoveComment;\n          inMoveSection = true;\n          break;\n        case LineType.MOVE: {\n          const moveOrError = parseMove(parsed.line, record.position);\n          if (moveOrError instanceof Error) {\n            return moveOrError;\n          }\n          record.append(moveOrError, { ignoreValidation: true });\n          break;\n        }\n        case LineType.SPECIAL_MOVE: {\n          const specialMove = parseSpecialMove(parsed.line);\n          if (specialMove) {\n            record.append(specialMove, { ignoreValidation: true });\n          }\n          break;\n        }\n        case LineType.ELAPSED:\n          record.current.setElapsedMs(Number(parsed.args[0]) * 1e3);\n          break;\n      }\n    }\n  }\n  if (!inMoveSection) {\n    record.clear(position);\n    record.first.comment = preMoveComment;\n  }\n  record.goto(0);\n  record.resetAllBranchSelection();\n  record.metadata = metadata;\n  return record;\n}\n\ntype CSAExportOptions = {\n  returnCode?: string;\n};\n\nfunction formatMetadata(\n  metadata: ImmutableRecordMetadata,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  const blackName =\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_SHORT_NAME);\n  if (blackName) {\n    ret += \"N+\" + blackName + returnCode;\n  }\n  const whiteName =\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_SHORT_NAME);\n  if (whiteName) {\n    ret += \"N-\" + whiteName + returnCode;\n  }\n  const event =\n    metadata.getStandardMetadata(RecordMetadataKey.TOURNAMENT) ||\n    metadata.getStandardMetadata(RecordMetadataKey.TITLE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.PUBLISHED_ON);\n  if (event) {\n    ret += \"$EVENT:\" + event + returnCode;\n  }\n  const site = metadata.getStandardMetadata(RecordMetadataKey.PLACE);\n  if (site) {\n    ret += \"$SITE:\" + site + returnCode;\n  }\n  const startTime =\n    metadata.getStandardMetadata(RecordMetadataKey.START_DATETIME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (startTime) {\n    // 年月日 YYYY/MM/DD (10文字) については KIF 形式と共通\n    ret += \"$START_TIME:\" + startTime.slice(10) + returnCode;\n  }\n  const endTime = metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (endTime) {\n    ret += \"$END_TIME:\" + endTime.slice(10) + returnCode;\n  }\n  const opening = metadata.getStandardMetadata(RecordMetadataKey.STRATEGY);\n  if (opening) {\n    ret += \"$OPENING:\" + opening + returnCode;\n  }\n  // TODO: 持ち時間（CSA形式に合致する場合のみ）\n  return ret;\n}\n\nconst pieceTypeToString = {\n  king: \"OU\",\n  rook: \"HI\",\n  dragon: \"RY\",\n  bishop: \"KA\",\n  horse: \"UM\",\n  gold: \"KI\",\n  silver: \"GI\",\n  promSilver: \"NG\",\n  knight: \"KE\",\n  promKnight: \"NK\",\n  lance: \"KY\",\n  promLance: \"NY\",\n  pawn: \"FU\",\n  promPawn: \"TO\",\n};\n\nfunction formatHand(hand: ImmutableHand): string {\n  let ret = \"\";\n  hand.forEach((pieceType, n) => {\n    for (let i = 0; i < n; i++) {\n      ret += \"00\" + pieceTypeToString[pieceType];\n    }\n  });\n  return ret;\n}\n\nfunction formatPosition(\n  position: ImmutablePosition,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  for (let rank = 1; rank <= 9; rank += 1) {\n    ret += \"P\" + rank;\n    for (let file = 9; file >= 1; file -= 1) {\n      const piece = position.board.at(new Square(file, rank));\n      if (!piece) {\n        ret += \" * \";\n      } else if (piece.color === Color.BLACK) {\n        ret += \"+\" + pieceTypeToString[piece.type];\n      } else {\n        ret += \"-\" + pieceTypeToString[piece.type];\n      }\n    }\n    ret += returnCode;\n  }\n  ret += \"P+\" + formatHand(position.blackHand) + returnCode;\n  ret += \"P-\" + formatHand(position.whiteHand) + returnCode;\n  ret += (position.color === Color.BLACK ? \"+\" : \"-\") + returnCode;\n  return ret;\n}\n\nfunction formatSquare(square: Square | PieceType): string {\n  return square instanceof Square ? `${square.file}${square.rank}` : \"00\";\n}\n\nfunction formatMove(move: Move): string {\n  return (\n    (move.color === Color.BLACK ? \"+\" : \"-\") +\n    formatSquare(move.from) +\n    formatSquare(move.to) +\n    pieceTypeToString[\n      move.promote ? promotedPieceType(move.pieceType) : move.pieceType\n    ]\n  );\n}\n\nfunction formatSpecialMove(move: SpecialMove): string | undefined {\n  switch (move) {\n    case SpecialMove.RESIGN:\n      return \"%TORYO\";\n    case SpecialMove.INTERRUPT:\n      return \"%CHUDAN\";\n    case SpecialMove.REPETITION_DRAW:\n      return \"%SENNICHITE\";\n    case SpecialMove.TIMEOUT:\n      return \"%TIME_UP\";\n    case SpecialMove.FOUL_LOSE:\n      return \"%ILLEGAL_MOVE\";\n    case SpecialMove.DRAW:\n      return \"%JISHOGI\";\n    case SpecialMove.ENTERING_OF_KING:\n      return \"%KACHI\";\n    case SpecialMove.MATE:\n      return \"%TSUMI\";\n  }\n}\n\nexport function formatCSAMove(move: Move): string {\n  return formatMove(move);\n}\n\nexport function exportCSA(\n  record: ImmutableRecord,\n  options: CSAExportOptions\n): string {\n  let ret = \"\";\n  const returnCode = options.returnCode ? options.returnCode : \"\\n\";\n  ret += \"' CSA形式棋譜ファイル Generated by Electron Shogi\" + returnCode;\n  ret += \"V2.2\" + returnCode;\n  ret += formatMetadata(record.metadata, options);\n  ret += formatPosition(record.initialPosition, options);\n  record.moves.forEach((node) => {\n    if (node.number === 0) {\n      return;\n    }\n    let move: string | undefined;\n    if (node.move instanceof Move) {\n      move = formatMove(node.move);\n    } else {\n      move = formatSpecialMove(node.move);\n    }\n    if (move) {\n      ret += move + returnCode;\n      ret += \"T\" + Math.floor(node.elapsedMs / 1e3) + returnCode;\n    }\n    if (node.comment) {\n      const comment = node.comment.endsWith(\"\\n\")\n        ? node.comment.slice(0, -1)\n        : node.comment;\n      comment.split(\"\\n\").forEach((line) => {\n        ret += \"'*\" + line + returnCode;\n      });\n    }\n  });\n  return ret;\n}\n","import { Position } from \".\";\n\nexport enum RecordFormatType {\n  USI,\n  SFEN,\n  KIF,\n  CSA,\n}\n\nexport function detectRecordFormat(data: string): RecordFormatType {\n  // USI\n  if (\n    data.startsWith(\"position sfen \") ||\n    data.startsWith(\"position startpos \") ||\n    data.startsWith(\"sfen \") ||\n    data.startsWith(\"startpos \") ||\n    data.startsWith(\"moves \")\n  ) {\n    return RecordFormatType.USI;\n  }\n\n  // SFEN\n  if (Position.isValidSFEN(data)) {\n    return RecordFormatType.SFEN;\n  }\n\n  // KIF vs CSA: 行頭の文字の出現頻度を比較する。\n  const pattKIF = /(^|\\n)[#0-9開終棋手戦表持秒記消場掲備先後作発出完分受]/g;\n  const pattCSA = /(^|,|\\n)[-+$%'VNPT]/g;\n  const matchedKIF = data.match(pattKIF);\n  const matchedCSA = data.match(pattCSA);\n  const evalKIF = matchedKIF ? matchedKIF.length : 0;\n  const evalCSA = matchedCSA ? matchedCSA.length : 0;\n  return evalKIF >= evalCSA ? RecordFormatType.KIF : RecordFormatType.CSA;\n}\n","const preloadedImages: { [path: string]: HTMLImageElement } = {};\n\nexport default function preloadImage(path: string): void {\n  if (preloadedImages[path]) {\n    return;\n  }\n  const img = document.createElement(\"img\");\n  img.src = path;\n  preloadedImages[path] = img;\n}\n","export class RectSize {\n  constructor(public width: number, public height: number) {}\n  add(size: RectSize): RectSize {\n    return new RectSize(this.width + size.width, this.height + size.height);\n  }\n  reduce(size: RectSize): RectSize {\n    return new RectSize(this.width - size.width, this.height - size.height);\n  }\n}\n","import {\n  handPieceTypes,\n  ImmutableHand,\n  PieceType,\n  Color,\n  Move,\n  Piece,\n  ImmutablePosition,\n  reverseColor,\n  Square,\n} from \"@/shogi\";\nimport preloadImage from \"@/assets/preload\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport enum PieceImageType {\n  HITOMOJI = \"hitomoji\",\n  HITOMOJI_DARK = \"hitomojiDark\",\n  HITOMOJI_GOTHIC = \"hitomojiGothic\",\n  HITOMOJI_GOTHIC_DARK = \"hitomojiGothicDark\",\n}\n\nexport enum BoardImageType {\n  LIGHT = \"light\",\n  WARM = \"warm\",\n  RESIN = \"resin\",\n  RESIN2 = \"resin2\",\n  RESIN3 = \"resin3\",\n  DARK = \"dark\",\n  GREEN = \"green\",\n  CHERRY_BLOSSOM = \"cherry-blossom\",\n}\n\nexport enum BoardLabelType {\n  NONE = \"none\",\n  STANDARD = \"standard\",\n}\n\ntype PieceImages = {\n  black: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n  white: {\n    pawn: string;\n    lance: string;\n    knight: string;\n    silver: string;\n    gold: string;\n    bishop: string;\n    rook: string;\n    king: string;\n    king2: string;\n    promPawn: string;\n    promLance: string;\n    promKnight: string;\n    promSilver: string;\n    horse: string;\n    dragon: string;\n  };\n};\n\nconst layoutTemplate = {\n  frame: {\n    width: 1471,\n    height: 959,\n  },\n  board: {\n    x: 296.5,\n    y: 0,\n    width: 878,\n    height: 960,\n    squreWidth: 94.8,\n    squreHeight: 104,\n    leftSquarePadding: 12,\n    topSquarePadding: 12.2,\n    leftPiecePadding: 17.5,\n    topPiecePadding: 18.5,\n    highlight: {\n      selected: { \"background-color\": \"#0088ff\", opacity: \"0.8\" },\n      lastMoveTo: { \"background-color\": \"#44cc44\", opacity: \"0.8\" },\n      lastMoveFrom: { \"background-color\": \"#44cc44\", opacity: \"0.4\" },\n    },\n  },\n  label: {\n    fontSize: 24,\n  },\n  piece: {\n    width: 88,\n    height: 93,\n  },\n  hand: {\n    black: {\n      x: 1184,\n      y: 600,\n    },\n    white: {\n      x: 0,\n      y: 0,\n    },\n    width: 288,\n    height: 360,\n    highlight: {\n      selected: { \"background-color\": \"#ff4800\", opacity: \"0.7\" },\n    },\n  },\n  turn: {\n    black: {\n      x: 1184,\n      y: 425,\n    },\n    white: {\n      x: 0,\n      y: 492,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 32,\n  },\n  playerName: {\n    black: {\n      x: 1184,\n      y: 480,\n    },\n    white: {\n      x: 0,\n      y: 370,\n    },\n    width: 288,\n    height: 45,\n    fontSize: 25,\n  },\n  clock: {\n    black: {\n      x: 1184,\n      y: 535,\n    },\n    white: {\n      x: 0,\n      y: 425,\n    },\n    width: 288,\n    height: 55,\n    fontSize: 40,\n  },\n  control: {\n    left: {\n      x: 0,\n      y: 547,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n    right: {\n      x: 1184,\n      y: 0,\n      width: 288,\n      height: 412,\n      fontSize: 26,\n    },\n  },\n};\n\nconst pieceImageMap: { [key: string]: PieceImages } = {\n  [PieceImageType.HITOMOJI]: {\n    black: {\n      pawn: \"./piece/hitomoji/black_pawn.png\",\n      lance: \"./piece/hitomoji/black_lance.png\",\n      knight: \"./piece/hitomoji/black_knight.png\",\n      silver: \"./piece/hitomoji/black_silver.png\",\n      gold: \"./piece/hitomoji/black_gold.png\",\n      bishop: \"./piece/hitomoji/black_bishop.png\",\n      rook: \"./piece/hitomoji/black_rook.png\",\n      king: \"./piece/hitomoji/black_king.png\",\n      king2: \"./piece/hitomoji/black_king2.png\",\n      promPawn: \"./piece/hitomoji/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/black_prom_silver.png\",\n      horse: \"./piece/hitomoji/black_horse.png\",\n      dragon: \"./piece/hitomoji/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji/white_pawn.png\",\n      lance: \"./piece/hitomoji/white_lance.png\",\n      knight: \"./piece/hitomoji/white_knight.png\",\n      silver: \"./piece/hitomoji/white_silver.png\",\n      gold: \"./piece/hitomoji/white_gold.png\",\n      bishop: \"./piece/hitomoji/white_bishop.png\",\n      rook: \"./piece/hitomoji/white_rook.png\",\n      king: \"./piece/hitomoji/white_king.png\",\n      king2: \"./piece/hitomoji/white_king2.png\",\n      promPawn: \"./piece/hitomoji/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji/white_prom_silver.png\",\n      horse: \"./piece/hitomoji/white_horse.png\",\n      dragon: \"./piece/hitomoji/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_DARK]: {\n    black: {\n      pawn: \"./piece/hitomoji_dark/black_pawn.png\",\n      lance: \"./piece/hitomoji_dark/black_lance.png\",\n      knight: \"./piece/hitomoji_dark/black_knight.png\",\n      silver: \"./piece/hitomoji_dark/black_silver.png\",\n      gold: \"./piece/hitomoji_dark/black_gold.png\",\n      bishop: \"./piece/hitomoji_dark/black_bishop.png\",\n      rook: \"./piece/hitomoji_dark/black_rook.png\",\n      king: \"./piece/hitomoji_dark/black_king.png\",\n      king2: \"./piece/hitomoji_dark/black_king2.png\",\n      promPawn: \"./piece/hitomoji_dark/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_dark/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_dark/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_dark/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_dark/black_horse.png\",\n      dragon: \"./piece/hitomoji_dark/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_dark/white_pawn.png\",\n      lance: \"./piece/hitomoji_dark/white_lance.png\",\n      knight: \"./piece/hitomoji_dark/white_knight.png\",\n      silver: \"./piece/hitomoji_dark/white_silver.png\",\n      gold: \"./piece/hitomoji_dark/white_gold.png\",\n      bishop: \"./piece/hitomoji_dark/white_bishop.png\",\n      rook: \"./piece/hitomoji_dark/white_rook.png\",\n      king: \"./piece/hitomoji_dark/white_king.png\",\n      king2: \"./piece/hitomoji_dark/white_king2.png\",\n      promPawn: \"./piece/hitomoji_dark/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_dark/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_dark/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_dark/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_dark/white_horse.png\",\n      dragon: \"./piece/hitomoji_dark/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_GOTHIC]: {\n    black: {\n      pawn: \"./piece/hitomoji_gothic/black_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/black_lance.png\",\n      knight: \"./piece/hitomoji_gothic/black_knight.png\",\n      silver: \"./piece/hitomoji_gothic/black_silver.png\",\n      gold: \"./piece/hitomoji_gothic/black_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/black_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/black_rook.png\",\n      king: \"./piece/hitomoji_gothic/black_king.png\",\n      king2: \"./piece/hitomoji_gothic/black_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/black_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_gothic/white_pawn.png\",\n      lance: \"./piece/hitomoji_gothic/white_lance.png\",\n      knight: \"./piece/hitomoji_gothic/white_knight.png\",\n      silver: \"./piece/hitomoji_gothic/white_silver.png\",\n      gold: \"./piece/hitomoji_gothic/white_gold.png\",\n      bishop: \"./piece/hitomoji_gothic/white_bishop.png\",\n      rook: \"./piece/hitomoji_gothic/white_rook.png\",\n      king: \"./piece/hitomoji_gothic/white_king.png\",\n      king2: \"./piece/hitomoji_gothic/white_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic/white_horse.png\",\n      dragon: \"./piece/hitomoji_gothic/white_dragon.png\",\n    },\n  },\n  [PieceImageType.HITOMOJI_GOTHIC_DARK]: {\n    black: {\n      pawn: \"./piece/hitomoji_gothic_dark/black_pawn.png\",\n      lance: \"./piece/hitomoji_gothic_dark/black_lance.png\",\n      knight: \"./piece/hitomoji_gothic_dark/black_knight.png\",\n      silver: \"./piece/hitomoji_gothic_dark/black_silver.png\",\n      gold: \"./piece/hitomoji_gothic_dark/black_gold.png\",\n      bishop: \"./piece/hitomoji_gothic_dark/black_bishop.png\",\n      rook: \"./piece/hitomoji_gothic_dark/black_rook.png\",\n      king: \"./piece/hitomoji_gothic_dark/black_king.png\",\n      king2: \"./piece/hitomoji_gothic_dark/black_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic_dark/black_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic_dark/black_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic_dark/black_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic_dark/black_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic_dark/black_horse.png\",\n      dragon: \"./piece/hitomoji_gothic_dark/black_dragon.png\",\n    },\n    white: {\n      pawn: \"./piece/hitomoji_gothic_dark/white_pawn.png\",\n      lance: \"./piece/hitomoji_gothic_dark/white_lance.png\",\n      knight: \"./piece/hitomoji_gothic_dark/white_knight.png\",\n      silver: \"./piece/hitomoji_gothic_dark/white_silver.png\",\n      gold: \"./piece/hitomoji_gothic_dark/white_gold.png\",\n      bishop: \"./piece/hitomoji_gothic_dark/white_bishop.png\",\n      rook: \"./piece/hitomoji_gothic_dark/white_rook.png\",\n      king: \"./piece/hitomoji_gothic_dark/white_king.png\",\n      king2: \"./piece/hitomoji_gothic_dark/white_king2.png\",\n      promPawn: \"./piece/hitomoji_gothic_dark/white_prom_pawn.png\",\n      promLance: \"./piece/hitomoji_gothic_dark/white_prom_lance.png\",\n      promKnight: \"./piece/hitomoji_gothic_dark/white_prom_knight.png\",\n      promSilver: \"./piece/hitomoji_gothic_dark/white_prom_silver.png\",\n      horse: \"./piece/hitomoji_gothic_dark/white_horse.png\",\n      dragon: \"./piece/hitomoji_gothic_dark/white_dragon.png\",\n    },\n  },\n};\n\nconst boardGridMap = {\n  [BoardImageType.LIGHT]: \"./board/grid.svg\",\n  [BoardImageType.WARM]: \"./board/grid.svg\",\n  [BoardImageType.RESIN]: \"./board/grid.svg\",\n  [BoardImageType.RESIN2]: \"./board/grid.svg\",\n  [BoardImageType.RESIN3]: \"./board/grid.svg\",\n  [BoardImageType.DARK]: \"./board/grid_white.svg\",\n  [BoardImageType.GREEN]: \"./board/grid.svg\",\n  [BoardImageType.CHERRY_BLOSSOM]: \"./board/grid.svg\",\n};\n\nconst boardTextureMap = {\n  [BoardImageType.LIGHT]: \"./board/wood_light.png\",\n  [BoardImageType.WARM]: \"./board/wood_warm.png\",\n  [BoardImageType.RESIN]: null,\n  [BoardImageType.RESIN2]: null,\n  [BoardImageType.RESIN3]: null,\n  [BoardImageType.DARK]: null,\n  [BoardImageType.GREEN]: null,\n  [BoardImageType.CHERRY_BLOSSOM]: null,\n};\n\nconst boardBackgroundColorMap = {\n  [BoardImageType.LIGHT]: \"rgba(0, 0, 0, 0)\",\n  [BoardImageType.WARM]: \"rgba(0, 0, 0, 0)\",\n  [BoardImageType.RESIN]: \"#d69b00\",\n  [BoardImageType.RESIN2]: \"#efbf63\",\n  [BoardImageType.RESIN3]: \"#ad7624\",\n  [BoardImageType.DARK]: \"#333333\",\n  [BoardImageType.GREEN]: \"#598459\",\n  [BoardImageType.CHERRY_BLOSSOM]: \"#ecb6b6\",\n};\n\nconst handColorMap = {\n  [BoardImageType.LIGHT]: \"#8b4513\",\n  [BoardImageType.WARM]: \"#8b4513\",\n  [BoardImageType.RESIN]: \"#8b4513\",\n  [BoardImageType.RESIN2]: \"#8b4513\",\n  [BoardImageType.RESIN3]: \"#8b4513\",\n  [BoardImageType.DARK]: \"#333333\",\n  [BoardImageType.GREEN]: \"#527a52\",\n  [BoardImageType.CHERRY_BLOSSOM]: \"#e8a9a9\",\n};\n\nconst handLaytoutRule = {\n  black: {\n    pawn: { row: 3, column: 0, width: 2 },\n    lance: { row: 2, column: 0, width: 1 },\n    knight: { row: 2, column: 1, width: 1 },\n    silver: { row: 1, column: 0, width: 1 },\n    gold: { row: 1, column: 1, width: 1 },\n    bishop: { row: 0, column: 0, width: 1 },\n    rook: { row: 0, column: 1, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n  white: {\n    pawn: { row: 0, column: 0, width: 2 },\n    lance: { row: 1, column: 1, width: 1 },\n    knight: { row: 1, column: 0, width: 1 },\n    silver: { row: 2, column: 1, width: 1 },\n    gold: { row: 2, column: 0, width: 1 },\n    bishop: { row: 3, column: 1, width: 1 },\n    rook: { row: 3, column: 0, width: 1 },\n    king: { row: 0, column: 0, width: 0 },\n    promPawn: { row: 0, column: 0, width: 0 },\n    promLance: { row: 0, column: 0, width: 0 },\n    promKnight: { row: 0, column: 0, width: 0 },\n    promSilver: { row: 0, column: 0, width: 0 },\n    horse: { row: 0, column: 0, width: 0 },\n    dragon: { row: 0, column: 0, width: 0 },\n  },\n};\n\ntype FrameLayout = {\n  style: { [key: string]: string };\n  size: RectSize;\n};\n\ntype BoardLayout = {\n  gridImagePath: string;\n  textureImagePath: string | null;\n  x: number;\n  y: number;\n  style: { [key: string]: string };\n};\n\ntype LabelLayout = {\n  id: string;\n  character: string;\n  style: { [key: string]: string };\n};\n\ntype PieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype SquareLayout = {\n  id: number;\n  file: number;\n  rank: number;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandPieceLayout = {\n  id: string;\n  imagePath: string;\n  style: { [key: string]: string };\n};\n\ntype HandPointerLayout = {\n  id: string;\n  type: PieceType;\n  style: { [key: string]: string };\n  backgroundStyle: { [key: string]: string };\n};\n\ntype HandLayout = {\n  style: { [key: string]: string };\n  pieces: HandPieceLayout[];\n  pointers: HandPointerLayout[];\n};\n\ntype PromotionLayout = {\n  promoteImagePath: string;\n  notPromoteImagePath: string;\n  style: { [key: string]: string };\n};\n\ntype TurnLayout = {\n  style: { [key: string]: string };\n};\n\ntype PlayerNameLayout = {\n  style: { [key: string]: string };\n};\n\ntype ClockLayout = {\n  style: { [key: string]: string };\n};\n\ntype ControlLayout = {\n  left: {\n    style: { [key: string]: string };\n  };\n  right: {\n    style: { [key: string]: string };\n  };\n};\n\nexport type FullLayout = {\n  frame: FrameLayout;\n  board: BoardLayout;\n  labels: LabelLayout[];\n  piece: PieceLayout[];\n  square: SquareLayout[];\n  blackHand: HandLayout;\n  whiteHand: HandLayout;\n  promotion: PromotionLayout | null;\n  turn: TurnLayout;\n  blackPlayerName: PlayerNameLayout;\n  whitePlayerName: PlayerNameLayout;\n  blackClock: ClockLayout;\n  whiteClock: ClockLayout;\n  control: ControlLayout;\n};\n\nconst rankCharMap: { [n: number]: string } = {\n  1: \"一\",\n  2: \"二\",\n  3: \"三\",\n  4: \"四\",\n  5: \"五\",\n  6: \"六\",\n  7: \"七\",\n  8: \"八\",\n  9: \"九\",\n};\n\nexport default class LayoutBuilder {\n  private pieceImages: PieceImages;\n  private boardGridImage: string;\n  private boardTextureImage: string | null;\n\n  constructor(\n    pieceImageType: PieceImageType,\n    private boardImageType: BoardImageType,\n    private boardLabelType: BoardLabelType\n  ) {\n    this.pieceImages =\n      pieceImageMap[pieceImageType] || pieceImageMap[PieceImageType.HITOMOJI];\n    this.boardGridImage = boardGridMap[boardImageType];\n    this.boardTextureImage = boardTextureMap[boardImageType];\n  }\n\n  preload(): void {\n    preloadImage(this.boardGridImage);\n    if (this.boardTextureImage) {\n      preloadImage(this.boardTextureImage);\n    }\n    Object.values(this.pieceImages.black).forEach(preloadImage);\n    Object.values(this.pieceImages.white).forEach(preloadImage);\n  }\n\n  build(\n    upperSizeLimit: RectSize,\n    position: ImmutablePosition,\n    lastMove: Move | null | undefined,\n    pointer: Square | Piece | null | undefined,\n    reservedMoveForPromotion: Move | null | undefined,\n    flip?: boolean\n  ): FullLayout {\n    let ratio = upperSizeLimit.width / layoutTemplate.frame.width;\n    if (layoutTemplate.frame.height * ratio > upperSizeLimit.height) {\n      ratio = upperSizeLimit.height / layoutTemplate.frame.height;\n    }\n\n    const buildFrameLayout = (): FrameLayout => {\n      const height = layoutTemplate.frame.height * ratio;\n      const width = layoutTemplate.frame.width * ratio;\n      return {\n        style: {\n          height: height + \"px\",\n          width: width + \"px\",\n        },\n        size: new RectSize(width, height),\n      };\n    };\n\n    const buildBoardLayout = (): BoardLayout => {\n      const x = layoutTemplate.board.x * ratio;\n      const y = layoutTemplate.board.y * ratio;\n      const width = layoutTemplate.board.width * ratio;\n      const height = layoutTemplate.board.height * ratio;\n      const bgColor = boardBackgroundColorMap[this.boardImageType];\n      const style = {\n        \"background-color\": bgColor,\n        left: x + \"px\",\n        top: y + \"px\",\n        height: height + \"px\",\n        width: width + \"px\",\n      };\n      return {\n        gridImagePath: this.boardGridImage,\n        textureImagePath: this.boardTextureImage,\n        x,\n        y,\n        style,\n      };\n    };\n\n    const buildLabelLayout = (boardLayout: BoardLayout): LabelLayout[] => {\n      const layouts: LabelLayout[] = [];\n      if (this.boardLabelType == BoardLabelType.NONE) {\n        return layouts;\n      }\n      const fontSize = layoutTemplate.label.fontSize * ratio;\n      const shadow = fontSize * 0.1;\n      const commonStyle = {\n        color: \"black\",\n        \"font-size\": fontSize + \"px\",\n        \"font-weight\": \"bold\",\n        \"text-shadow\": `${shadow}px ${shadow}px  ${shadow}px white`,\n      };\n      for (let rank = 1; rank <= 9; rank++) {\n        const x =\n          boardLayout.x -\n          fontSize * 0.5 +\n          (flip ? 0 : layoutTemplate.board.width) * ratio +\n          layoutTemplate.board.leftPiecePadding * 0.5 * ratio * (flip ? 1 : -1);\n        const y =\n          boardLayout.y -\n          fontSize * 0.5 +\n          (layoutTemplate.board.topSquarePadding +\n            ((flip ? 10 - rank : rank) - 0.5) *\n              layoutTemplate.board.squreHeight) *\n            ratio;\n        layouts.push({\n          id: \"rank\" + rank,\n          character: rankCharMap[rank],\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            ...commonStyle,\n          },\n        });\n      }\n      for (let file = 1; file <= 9; file++) {\n        const x =\n          boardLayout.x -\n          fontSize * 0.5 +\n          (layoutTemplate.board.leftPiecePadding +\n            (9.5 - (flip ? 10 - file : file)) *\n              layoutTemplate.board.squreWidth) *\n            ratio;\n        const y =\n          boardLayout.y -\n          fontSize * 0.5 +\n          (flip ? layoutTemplate.board.height : 0) * ratio +\n          layoutTemplate.board.topSquarePadding * 0.5 * ratio * (flip ? -1 : 1);\n        layouts.push({\n          id: \"file\" + file,\n          character: String(file),\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            ...commonStyle,\n          },\n        });\n      }\n      return layouts;\n    };\n\n    const buildPieceLayout = (boardLayout: BoardLayout): PieceLayout[] => {\n      const layouts: PieceLayout[] = [];\n      position.board.listNonEmptySquares().forEach((square) => {\n        const piece = position.board.at(square) as Piece;\n        const id = piece.id + square.index;\n        const displayColor = flip ? reverseColor(piece.color) : piece.color;\n        const pieceType =\n          piece.type == PieceType.KING && piece.color == Color.BLACK\n            ? \"king2\"\n            : piece.type;\n        const imagePath = this.pieceImages[displayColor][pieceType];\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftPiecePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topPiecePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.piece.width * ratio;\n        const height = layoutTemplate.piece.height * ratio;\n        layouts.push({\n          id,\n          imagePath,\n          style: {\n            left: x + \"px\",\n            top: y + \"px\",\n            width: width + \"px\",\n            height: height + \"px\",\n          },\n        });\n      });\n      return layouts;\n    };\n\n    const buildSquareLayout = (boardLayout: BoardLayout): SquareLayout[] => {\n      const layouts: SquareLayout[] = [];\n      Square.all.forEach((square) => {\n        const id = square.index;\n        const { file } = square;\n        const { rank } = square;\n        const x =\n          boardLayout.x +\n          (layoutTemplate.board.leftSquarePadding +\n            layoutTemplate.board.squreWidth *\n              (flip ? square.opposite : square).x) *\n            ratio;\n        const y =\n          boardLayout.y +\n          (layoutTemplate.board.topSquarePadding +\n            layoutTemplate.board.squreHeight *\n              (flip ? square.opposite : square).y) *\n            ratio;\n        const width = layoutTemplate.board.squreWidth * ratio;\n        const height = layoutTemplate.board.squreHeight * ratio;\n        const style = {\n          left: x + \"px\",\n          top: y + \"px\",\n          width: width + \"px\",\n          height: height + \"px\",\n        };\n        let backgroundStyle = style;\n        if (lastMove && square.equals(lastMove.to)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveTo,\n          };\n        }\n        if (\n          lastMove &&\n          lastMove.from instanceof Square &&\n          square.equals(lastMove.from)\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.lastMoveFrom,\n          };\n        }\n        if (pointer instanceof Square && pointer.equals(square)) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.board.highlight.selected,\n          };\n        }\n        layouts.push({\n          id,\n          file,\n          rank,\n          style,\n          backgroundStyle,\n        });\n      });\n      return layouts;\n    };\n\n    const buildHandLayout = (color: Color, hand: ImmutableHand): HandLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      const bgColor = handColorMap[this.boardImageType];\n      const standX = layoutTemplate.hand[displayColor].x * ratio;\n      const standY = layoutTemplate.hand[displayColor].y * ratio;\n      const standWidth = layoutTemplate.hand.width * ratio;\n      const standHeight = layoutTemplate.hand.height * ratio;\n      const standStyle = {\n        \"background-color\": bgColor,\n        left: standX + \"px\",\n        top: standY + \"px\",\n        width: standWidth + \"px\",\n        height: standHeight + \"px\",\n      };\n      const pieces: HandPieceLayout[] = [];\n      const pointers: HandPointerLayout[] = [];\n      handPieceTypes.forEach((type) => {\n        const count = hand.count(type);\n        const rule = handLaytoutRule[displayColor][type];\n        const areaWidth = (layoutTemplate.hand.width / 2) * rule.width * ratio;\n        const areaHeight = (layoutTemplate.hand.height / 4) * ratio;\n        const areaX = areaWidth * rule.column;\n        const areaY = areaHeight * rule.row;\n        const pieceWidth = layoutTemplate.piece.width * ratio;\n        const pieceHeight = layoutTemplate.piece.height * ratio;\n        const padding =\n          Math.max(areaWidth - pieceWidth * count, 0) / (count * 2);\n        const dx =\n          (areaWidth - pieceWidth - padding * 2) / Math.max(count - 1, 1);\n        for (let i = count - 1; i >= 0; i -= 1) {\n          const id = type + i;\n          const imagePath = this.pieceImages[displayColor][type];\n          const x = areaX + padding + dx * i;\n          const y = areaY;\n          pieces.push({\n            id,\n            imagePath,\n            style: {\n              left: x + \"px\",\n              top: y + \"px\",\n              width: pieceWidth + \"px\",\n              height: pieceHeight + \"px\",\n            },\n          });\n        }\n        const id = type;\n        const style = {\n          left: areaX + \"px\",\n          top: areaY + \"px\",\n          width: areaWidth + \"px\",\n          height: areaHeight + \"px\",\n        };\n        let backgroundStyle = style;\n        if (\n          pointer &&\n          pointer instanceof Piece &&\n          pointer.color === color &&\n          pointer.type === type\n        ) {\n          backgroundStyle = {\n            ...backgroundStyle,\n            ...layoutTemplate.hand.highlight.selected,\n          };\n        }\n        pointers.push({\n          id,\n          type,\n          style,\n          backgroundStyle,\n        });\n      });\n      return {\n        style: standStyle,\n        pieces,\n        pointers,\n      };\n    };\n\n    const buildPromotionLayout = (\n      boardLayout: BoardLayout,\n      move: Move | null | undefined\n    ): PromotionLayout | null => {\n      if (!move) {\n        return null;\n      }\n      const color = flip ? reverseColor(move.color) : move.color;\n      const square = flip ? move.to.opposite : move.to;\n      const piece = new Piece(color, move.pieceType);\n      const promoted = piece.promoted();\n      const notPromoted = piece.unpromoted();\n      const promoteImagePath = this.pieceImages[color][promoted.type];\n      const notPromoteImagePath = this.pieceImages[color][notPromoted.type];\n      const x =\n        boardLayout.x +\n        (layoutTemplate.board.leftSquarePadding +\n          layoutTemplate.board.squreWidth *\n            (square.x === 0 ? 0 : square.x === 8 ? 7 : square.x - 0.5)) *\n          ratio;\n      const y =\n        boardLayout.y +\n        (layoutTemplate.board.topSquarePadding +\n          layoutTemplate.board.squreHeight * square.y) *\n          ratio;\n      const width = layoutTemplate.board.squreWidth * 2 * ratio;\n      const height = layoutTemplate.board.squreHeight * ratio;\n      const style = {\n        left: x + \"px\",\n        top: y + \"px\",\n        width: width + \"px\",\n        height: height + \"px\",\n        \"font-size\": height / 4 + \"px\",\n      };\n      return {\n        promoteImagePath,\n        notPromoteImagePath,\n        style,\n      };\n    };\n\n    const buildTurnLayout = (): TurnLayout => {\n      const color = position.color;\n      const displayColor = flip ? reverseColor(color) : color;\n      const borderWidth = 2;\n      return {\n        style: {\n          left:\n            layoutTemplate.turn[displayColor].x * ratio - borderWidth + \"px\",\n          top: layoutTemplate.turn[displayColor].y * ratio - borderWidth + \"px\",\n          width: layoutTemplate.turn.width * ratio - borderWidth + \"px\",\n          height: layoutTemplate.turn.height * ratio - borderWidth + \"px\",\n          \"font-size\": layoutTemplate.turn.fontSize * ratio + \"px\",\n          \"border-radius\": layoutTemplate.turn.height * ratio * 0.4 + \"px\",\n          \"border-width\": borderWidth + \"px\",\n          \"border-style\": \"solid\",\n        },\n      };\n    };\n\n    const buildPlayerNameLayout = (color: Color): PlayerNameLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.playerName[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.playerName[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.playerName.width * ratio + \"px\",\n          height: layoutTemplate.playerName.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.playerName.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildClockLayout = (color: Color): ClockLayout => {\n      const displayColor = flip ? reverseColor(color) : color;\n      return {\n        style: {\n          left: layoutTemplate.clock[displayColor].x * ratio + \"px\",\n          top: layoutTemplate.clock[displayColor].y * ratio + \"px\",\n          width: layoutTemplate.clock.width * ratio + \"px\",\n          height: layoutTemplate.clock.height * ratio + \"px\",\n          \"font-size\": layoutTemplate.clock.fontSize * ratio + \"px\",\n        },\n      };\n    };\n\n    const buildControlLayout = (): ControlLayout => {\n      return {\n        left: {\n          style: {\n            left: layoutTemplate.control.left.x * ratio + \"px\",\n            top: layoutTemplate.control.left.y * ratio + \"px\",\n            width: layoutTemplate.control.left.width * ratio + \"px\",\n            height: layoutTemplate.control.left.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.left.fontSize * ratio + \"px\",\n          },\n        },\n        right: {\n          style: {\n            left: layoutTemplate.control.right.x * ratio + \"px\",\n            top: layoutTemplate.control.right.y * ratio + \"px\",\n            width: layoutTemplate.control.right.width * ratio + \"px\",\n            height: layoutTemplate.control.right.height * ratio + \"px\",\n            \"font-size\": layoutTemplate.control.right.fontSize * ratio + \"px\",\n          },\n        },\n      };\n    };\n\n    const frameLayout = buildFrameLayout();\n    const boardLayout = buildBoardLayout();\n    const labelLayout = buildLabelLayout(boardLayout);\n    const pieceLayout = buildPieceLayout(boardLayout);\n    const squareLayout = buildSquareLayout(boardLayout);\n    const blackHandLayout = buildHandLayout(\n      Color.BLACK,\n      position.hand(Color.BLACK)\n    );\n    const whiteHandLayout = buildHandLayout(\n      Color.WHITE,\n      position.hand(Color.WHITE)\n    );\n    const promotionLayout = buildPromotionLayout(\n      boardLayout,\n      reservedMoveForPromotion\n    );\n    const turnLayout = buildTurnLayout();\n    const blackPlayerNameLayout = buildPlayerNameLayout(Color.BLACK);\n    const whitePlayerNameLayout = buildPlayerNameLayout(Color.WHITE);\n    const blackClockLayout = buildClockLayout(Color.BLACK);\n    const whiteClockLayout = buildClockLayout(Color.WHITE);\n    const controlLayout = buildControlLayout();\n    return {\n      frame: frameLayout,\n      board: boardLayout,\n      labels: labelLayout,\n      piece: pieceLayout,\n      square: squareLayout,\n      blackHand: blackHandLayout,\n      whiteHand: whiteHandLayout,\n      promotion: promotionLayout,\n      turn: turnLayout,\n      blackPlayerName: blackPlayerNameLayout,\n      whitePlayerName: whitePlayerNameLayout,\n      blackClock: blackClockLayout,\n      whiteClock: whiteClockLayout,\n      control: controlLayout,\n    };\n  }\n}\n","\nimport {\n  PieceType,\n  Square,\n  Piece,\n  Color,\n  Move,\n  ImmutablePosition,\n} from \"@/shogi\";\nimport { computed, reactive, watch, defineComponent, PropType } from \"vue\";\nimport LayoutBuilder, {\n  BoardImageType,\n  BoardLabelType,\n  PieceImageType,\n} from \"@/components/primitive/BoardLayout\";\nimport { RectSize } from \"./Types\";\nimport { secondsToHMMSS } from \"@/helpers/time\";\n\ntype State = {\n  pointer: Square | Piece | null;\n  reservedMove: Move | null;\n};\n\nexport default defineComponent({\n  name: \"BoardView\",\n  props: {\n    pieceImageType: {\n      type: String as PropType<PieceImageType>,\n      required: true,\n    },\n    boardImageType: {\n      type: String as PropType<BoardImageType>,\n      required: true,\n    },\n    boardLabelType: {\n      type: String as PropType<BoardLabelType>,\n      required: true,\n    },\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n    position: {\n      type: Object as PropType<ImmutablePosition>,\n      required: true,\n    },\n    lastMove: {\n      type: Object as PropType<Move | null>,\n      required: false,\n      default: null,\n    },\n    flip: {\n      type: Boolean,\n      required: false,\n    },\n    allowEdit: {\n      type: Boolean,\n      required: false,\n    },\n    allowMove: {\n      type: Boolean,\n      required: false,\n    },\n    blackPlayerName: {\n      type: String,\n      required: false,\n      default: \"先手\",\n    },\n    whitePlayerName: {\n      type: String,\n      required: false,\n      default: \"後手\",\n    },\n    blackPlayerTime: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    blackPlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerTime: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n    whitePlayerByoyomi: {\n      type: Number,\n      required: false,\n      default: undefined,\n    },\n  },\n  emits: [\"resize\", \"move\", \"edit\"],\n  setup(props, context) {\n    const state = reactive({\n      pointer: null,\n      reservedMove: null,\n    } as State);\n\n    const resetState = () => {\n      state.pointer = null;\n      state.reservedMove = null;\n    };\n\n    watch(\n      [() => props.position, () => props.allowEdit, () => props.allowMove],\n      () => {\n        resetState();\n      }\n    );\n\n    const clickFrame = () => {\n      resetState();\n    };\n\n    const updatePointer = (\n      newPointer: Square | Piece,\n      empty: boolean,\n      color: Color | undefined\n    ) => {\n      const prevPointer = state.pointer;\n      resetState();\n      if (\n        newPointer instanceof Square &&\n        prevPointer instanceof Square &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (\n        newPointer instanceof Piece &&\n        prevPointer instanceof Piece &&\n        newPointer.equals(prevPointer)\n      ) {\n        return;\n      }\n      if (prevPointer) {\n        const editFrom = prevPointer;\n        const editTo =\n          newPointer instanceof Square ? newPointer : newPointer.color;\n        if (\n          props.allowEdit &&\n          props.position.isValidEditing(editFrom, editTo)\n        ) {\n          context.emit(\"edit\", {\n            move: {\n              from: prevPointer,\n              to: editTo,\n            },\n          });\n          return;\n        }\n        if (props.allowMove && newPointer instanceof Square) {\n          const moveFrom =\n            prevPointer instanceof Square ? prevPointer : prevPointer.type;\n          const moveTo = newPointer;\n          const move = props.position.createMove(moveFrom, moveTo);\n          if (!move) {\n            return;\n          }\n          const noProm = props.position.isValidMove(move);\n          const prom = props.position.isValidMove(move.withPromote());\n          if (noProm && prom) {\n            state.reservedMove = move;\n            return;\n          }\n          if (noProm) {\n            context.emit(\"move\", move);\n            return;\n          }\n          if (prom) {\n            context.emit(\"move\", move.withPromote());\n            return;\n          }\n        }\n      }\n      if ((!props.allowMove && !props.allowEdit) || empty) {\n        return;\n      }\n      if (!props.allowEdit && color !== props.position.color) {\n        return;\n      }\n      state.pointer = newPointer;\n    };\n\n    const clickSquare = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const square = new Square(file, rank);\n      const piece = props.position.board.at(square);\n      const empty = !piece;\n      updatePointer(square, empty, piece?.color);\n    };\n\n    const clickHand = (event: Event, color: Color, type: PieceType) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const empty = props.position.hand(color).count(type) === 0;\n      updatePointer(new Piece(color, type), empty, color);\n    };\n\n    const clickSquareR = (event: Event, file: number, rank: number) => {\n      event.stopPropagation();\n      event.preventDefault();\n      resetState();\n      const square = new Square(file, rank);\n      if (props.allowEdit && props.position.board.at(square)) {\n        context.emit(\"edit\", { rotate: square });\n      }\n    };\n\n    const clickPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move.withPromote())) {\n        context.emit(\"move\", move.withPromote());\n      }\n    };\n\n    const clickNotPromote = (event: Event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      const move = state.reservedMove;\n      resetState();\n      if (move && props.position.isValidMove(move)) {\n        context.emit(\"move\", move);\n      }\n    };\n\n    const layoutBuilder = computed(() => {\n      const builder = new LayoutBuilder(\n        props.pieceImageType,\n        props.boardImageType,\n        props.boardLabelType\n      );\n      builder.preload();\n      return builder;\n    });\n\n    const layout = computed(() => {\n      const margin = new RectSize(20, 20);\n      const layout = layoutBuilder.value.build(\n        props.maxSize.reduce(margin),\n        props.position,\n        props.lastMove,\n        state.pointer,\n        state.reservedMove,\n        props.flip\n      );\n      context.emit(\"resize\", layout.frame.size.add(margin));\n      return layout;\n    });\n\n    const formatTime = (time?: number, byoyomi?: number): string => {\n      if (time) {\n        return secondsToHMMSS(time);\n      } else if (byoyomi !== undefined) {\n        return \"\" + byoyomi;\n      }\n      return \"0:00:00\";\n    };\n\n    const timeSeverity = (time?: number, byoyomi?: number) => {\n      if (!time && !byoyomi) {\n        return \"normal\";\n      }\n      const rem = (time || 0) + (byoyomi || 0);\n      if (rem <= 5) {\n        return \"danger\";\n      } else if (rem <= 10) {\n        return \"warning\";\n      }\n      return \"normal\";\n    };\n\n    const blackPlayerTimeText = computed(() => {\n      return formatTime(props.blackPlayerTime, props.blackPlayerByoyomi);\n    });\n\n    const blackPlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.blackPlayerTime, props.blackPlayerByoyomi);\n    });\n\n    const whitePlayerTimeText = computed(() => {\n      return formatTime(props.whitePlayerTime, props.whitePlayerByoyomi);\n    });\n\n    const whitePlayerTimeSeverity = computed(() => {\n      return timeSeverity(props.whitePlayerTime, props.whitePlayerByoyomi);\n    });\n\n    return {\n      clickFrame,\n      clickSquare,\n      clickHand,\n      clickSquareR,\n      clickPromote,\n      clickNotPromote,\n      layout,\n      blackPlayerTimeText,\n      blackPlayerTimeSeverity,\n      whitePlayerTimeText,\n      whitePlayerTimeSeverity,\n      Color,\n    };\n  },\n});\n","import { render } from \"./BoardView.vue?vue&type=template&id=7f489073&scoped=true&ts=true\"\nimport script from \"./BoardView.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardView.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardView.vue?vue&type=style&index=0&id=7f489073&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7f489073\"]])\n\nexport default __exports__","export const ES_HUMAN = \"es://human\";\nexport const ES_USI_ENGINE = \"es://usi-engine/\";\n\nexport function isUSIEngine(uri: string): boolean {\n  return uri.startsWith(ES_USI_ENGINE);\n}\n\nexport function issueEngineURI(): string {\n  const now = Date.now();\n  const rand = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16);\n  return ES_USI_ENGINE + `${now}/${rand}`;\n}\n","import { issueEngineURI } from \"@/uri\";\n\n// reserved option names\nexport const USIPonder = \"USI_Ponder\";\nexport const USIHash = \"USI_Hash\";\nexport const USIMultiPV = \"USI_MultiPV\";\n\n// well-known option names\nexport const Threads = \"Threads\";\nexport const NumberOfThreads = \"NumberOfThreads\";\nexport const MultiPV = \"MultiPV\";\n\nexport type USIEngineOptionType =\n  | \"check\"\n  | \"spin\"\n  | \"combo\"\n  | \"button\"\n  | \"string\"\n  | \"filename\";\n\nexport type USIEngineOption = {\n  name: string;\n  type: USIEngineOptionType;\n  default?: string | number;\n  min?: number;\n  max?: number;\n  vars: string[];\n  value?: string | number;\n};\n\nexport function getUSIEngineOptionCurrentValue(\n  option: USIEngineOption | null | undefined\n): string | number | undefined {\n  if (!option) {\n    return;\n  }\n  if (option.value !== undefined) {\n    return option.value;\n  }\n  if (option.default !== undefined) {\n    if (option.type === \"string\" && option.default === \"<empty>\") {\n      return \"\";\n    }\n    return option.default;\n  }\n  return;\n}\n\nexport type USIEngineOptions = { [name: string]: USIEngineOption };\n\nexport type USIEngineSetting = {\n  uri: string;\n  name: string;\n  defaultName: string;\n  author: string;\n  path: string;\n  options: { [name: string]: USIEngineOption };\n};\n\nexport function duplicateEngineSetting(\n  src: USIEngineSetting\n): USIEngineSetting {\n  const engine: USIEngineSetting = JSON.parse(JSON.stringify(src));\n  engine.uri = issueEngineURI();\n  engine.name += \" のコピー\";\n  return engine;\n}\n\nexport function mergeUSIEngineSetting(\n  engine: USIEngineSetting,\n  local: USIEngineSetting\n): void {\n  engine.uri = local.uri;\n  engine.name = local.name;\n  Object.keys(local.options).forEach((name) => {\n    if (!engine.options[name]) {\n      return;\n    }\n    engine.options[name].value = local.options[name].value;\n  });\n}\n\nexport class USIEngineSettings {\n  private engines: { [uri: string]: USIEngineSetting } = {};\n\n  constructor(json?: string) {\n    if (json) {\n      const src = JSON.parse(json);\n      if (src.engines instanceof Object) {\n        this.engines = src.engines;\n      }\n    }\n  }\n\n  hasEngine(uri: string): boolean {\n    return !!this.engines[uri];\n  }\n\n  addEngine(engine: USIEngineSetting): void {\n    this.engines[engine.uri] = engine;\n  }\n\n  updateEngine(engine: USIEngineSetting): boolean {\n    if (!this.engines[engine.uri]) {\n      return false;\n    }\n    this.engines[engine.uri] = engine;\n    return true;\n  }\n\n  removeEngine(uri: string): boolean {\n    if (!this.engines[uri]) {\n      return false;\n    }\n    delete this.engines[uri];\n    return true;\n  }\n\n  getEngine(uri: string): USIEngineSetting | undefined {\n    return this.engines[uri];\n  }\n\n  get engineList(): USIEngineSetting[] {\n    return Object.values(this.engines).sort((a, b): number => {\n      if (a.name !== b.name) {\n        return a.name > b.name ? 1 : -1;\n      }\n      if (a.defaultName !== b.defaultName) {\n        return a.defaultName > b.defaultName ? 1 : -1;\n      }\n      return a.uri > b.uri ? 1 : -1;\n    });\n  }\n\n  get json(): string {\n    return JSON.stringify(this);\n  }\n\n  get jsonWithIndent(): string {\n    return JSON.stringify(this, undefined, 2);\n  }\n}\n","export function getDateString(date?: Date): string {\n  return (date || new Date()).toLocaleDateString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n  });\n}\n\nexport function getDateTimeString(date?: Date): string {\n  return (date || new Date()).toLocaleTimeString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: false,\n  });\n}\n","import { getDateString, getDateTimeString } from \"@/helpers/datetime\";\nimport { secondsToMSS } from \"@/helpers/time\";\nimport { TimeLimitSetting } from \"@/settings/game\";\nimport {\n  detectRecordFormat,\n  DoMoveOption,\n  exportCSA,\n  exportKakinoki,\n  ImmutableRecord,\n  importCSA,\n  importKakinoki,\n  InitialPositionType,\n  Move,\n  Position,\n  PositionChange,\n  Record,\n  RecordFormatType,\n  RecordMetadataKey,\n  reverseColor,\n  SpecialMove,\n} from \"@/shogi\";\nimport iconv from \"iconv-lite\";\nimport { getSituationText } from \"./score\";\nimport { SearchInfo } from \"@/players/player\";\n\nexport enum SearchEngineType {\n  PLAYER,\n  RESEARCHER,\n}\n\nexport type RecordCustomData = {\n  playerSearchInfo?: SearchInfo;\n  enemySearchInfo?: SearchInfo;\n  researchInfo?: SearchInfo;\n};\n\nfunction parsePlayerScoreComment(line: string): number | undefined {\n  const matched = /^\\*評価値=([+-]?[.0-9]+)/.exec(line);\n  return matched ? Number(matched[1]) : undefined;\n}\n\nfunction parseResearchScoreComment(line: string): number | undefined {\n  const matched = /^#評価値=([+-]?[.0-9]+)/.exec(line);\n  return matched ? Number(matched[1]) : undefined;\n}\n\nfunction parseFloodgateScoreComment(line: string): number | undefined {\n  const matched = /^\\* *([+-]?[.0-9]+)/.exec(line);\n  return matched ? Number(matched[1]) : undefined;\n}\n\nfunction restoreCustomData(record: Record): void {\n  record.forEach((node) => {\n    const data = (node.customData || {}) as RecordCustomData;\n    const lines = node.comment.split(\"\\n\");\n    for (const line of lines) {\n      const playerScore =\n        parsePlayerScoreComment(line) || parseFloodgateScoreComment(line);\n      if (playerScore !== undefined) {\n        data.playerSearchInfo = {\n          usi: record.usi,\n          score: playerScore,\n        };\n      }\n      const researchScore = parseResearchScoreComment(line);\n      if (researchScore !== undefined) {\n        data.researchInfo = {\n          usi: record.usi,\n          score: researchScore,\n        };\n      }\n    }\n    node.customData = data;\n  });\n}\n\nfunction searchCommentKeyPrefix(type: SearchEngineType): string {\n  switch (type) {\n    case SearchEngineType.PLAYER:\n      return \"*\";\n    case SearchEngineType.RESEARCHER:\n      return \"#\";\n  }\n}\n\nexport function buildSearchComment(\n  type: SearchEngineType,\n  searchInfo: SearchInfo\n): string {\n  const prefix = searchCommentKeyPrefix(type);\n  let comment = \"\";\n  if (searchInfo.mate) {\n    comment += `${Math.abs(searchInfo.mate)}手詰\\n`;\n  }\n  if (searchInfo.score !== undefined) {\n    comment += getSituationText(searchInfo.score) + \"\\n\";\n    comment += `${prefix}評価値=${searchInfo.score}\\n`;\n  }\n  if (searchInfo.pv && searchInfo.pv.length !== 0) {\n    comment += `${prefix}読み筋=`;\n    for (const move of searchInfo.pv) {\n      comment += `${move.getDisplayText()}`;\n    }\n    comment += \"\\n\";\n  }\n  return comment;\n}\n\nexport enum CommentBehavior {\n  NONE = \"none\",\n  INSERT = \"insert\",\n  APPEND = \"append\",\n  OVERWRITE = \"overwrite\",\n}\n\nfunction formatTimeLimitCSA(setting: TimeLimitSetting): string {\n  return (\n    secondsToMSS(setting.timeSeconds) +\n    \"+\" +\n    String(setting.byoyomi).padStart(2, \"0\")\n  );\n}\n\ntype GameStartMetadata = {\n  gameTitle?: string;\n  blackName?: string;\n  whiteName?: string;\n  timeLimit?: TimeLimitSetting;\n};\n\ntype AppendMoveParams = {\n  move: Move | SpecialMove;\n  moveOption?: DoMoveOption;\n  elapsedMs?: number;\n};\n\ntype ExportOptions = {\n  returnCode?: string;\n};\n\nexport class RecordManager {\n  private _record = new Record();\n  private _recordFilePath?: string;\n  private onChangePosition = (): void => {\n    /* noop */\n  };\n\n  constructor() {\n    this.setupHandler();\n  }\n\n  get record(): ImmutableRecord {\n    return this._record;\n  }\n\n  get recordFilePath(): string | undefined {\n    return this._recordFilePath;\n  }\n\n  private updateRecordFilePath(recordFilePath: string): void {\n    this._recordFilePath = recordFilePath;\n  }\n\n  private clearRecordFilePath(): void {\n    this._recordFilePath = undefined;\n  }\n\n  reset(startPosition?: InitialPositionType): void {\n    if (startPosition) {\n      const position = new Position();\n      position.reset(startPosition);\n      this._record.clear(position);\n    } else {\n      this._record.clear();\n    }\n    this.clearRecordFilePath();\n  }\n\n  resetByCurrentPosition(): void {\n    this._record.clear(this._record.position);\n    this.clearRecordFilePath();\n  }\n\n  importRecord(data: string, type?: RecordFormatType): Error | undefined {\n    let recordOrError: Record | Error;\n    if (!type) {\n      type = detectRecordFormat(data);\n    }\n    switch (type) {\n      case RecordFormatType.SFEN: {\n        const position = Position.newBySFEN(data);\n        recordOrError = position\n          ? new Record(position)\n          : new Error(\"局面を読み込めませんでした。\");\n        break;\n      }\n      case RecordFormatType.USI:\n        recordOrError = Record.newByUSI(data);\n        break;\n      case RecordFormatType.KIF:\n        recordOrError = importKakinoki(data);\n        break;\n      case RecordFormatType.CSA:\n        recordOrError = importCSA(data);\n        break;\n      default:\n        recordOrError = new Error(\"棋譜フォーマットの検出ができませんでした。\");\n        break;\n    }\n    if (recordOrError instanceof Error) {\n      return recordOrError;\n    }\n    this._record = recordOrError;\n    this.setupHandler();\n    this.clearRecordFilePath();\n    restoreCustomData(this._record);\n    return;\n  }\n\n  importRecordFromBuffer(data: Buffer, path: string): Error | undefined {\n    let recordOrError: Record | Error;\n    if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n      const str = path.match(/\\.kif$/)\n        ? iconv.decode(data as Buffer, \"Shift_JIS\")\n        : new TextDecoder().decode(data);\n      recordOrError = importKakinoki(str);\n    } else if (path.match(/\\.csa$/)) {\n      recordOrError = importCSA(new TextDecoder().decode(data));\n    } else {\n      recordOrError = new Error(\"不明なファイル形式: \" + path);\n    }\n    if (recordOrError instanceof Error) {\n      return recordOrError;\n    }\n    this._record = recordOrError;\n    this.setupHandler();\n    this._recordFilePath = path;\n    restoreCustomData(this._record);\n    return;\n  }\n\n  exportRecordAsBuffer(path: string, opt: ExportOptions): Buffer | Error {\n    let data: Uint8Array;\n    if (path.match(/\\.kif$/) || path.match(/\\.kifu$/)) {\n      const str = exportKakinoki(this.record, opt);\n      data = path.match(/\\.kif$/)\n        ? iconv.encode(str, \"Shift_JIS\")\n        : new TextEncoder().encode(str);\n    } else if (path.match(/\\.csa$/)) {\n      data = new TextEncoder().encode(exportCSA(this.record, opt));\n    } else {\n      return new Error(\"不明なファイル形式: \" + path);\n    }\n    this.updateRecordFilePath(path);\n    return data as Buffer;\n  }\n\n  swapNextTurn(): void {\n    const position = this.record.position.clone();\n    position.setColor(reverseColor(position.color));\n    this._record.clear(position);\n    this.clearRecordFilePath();\n  }\n\n  changePosition(change: PositionChange): void {\n    const position = this.record.position.clone();\n    position.edit(change);\n    this._record.clear(position);\n    this.clearRecordFilePath();\n  }\n\n  changeMoveNumber(number: number): void {\n    this._record.goto(number);\n  }\n\n  changeBranch(index: number): boolean {\n    return this._record.switchBranchByIndex(index);\n  }\n\n  removeCurrentMove(): void {\n    this._record.removeCurrentMove();\n  }\n\n  removeNextMove(): void {\n    this._record.removeNextMove();\n  }\n\n  updateComment(comment: string): void {\n    this._record.current.comment = comment;\n  }\n\n  appendComment(add: string, behavior: CommentBehavior): void {\n    if (!add) {\n      return;\n    }\n    const org = this._record.current.comment;\n    const sep = this.record.current.comment ? \"\\n\" : \"\";\n    switch (behavior) {\n      case CommentBehavior.NONE:\n        break;\n      case CommentBehavior.INSERT:\n        this._record.current.comment = add + sep + org;\n        break;\n      case CommentBehavior.APPEND:\n        this._record.current.comment = org + sep + add;\n        break;\n      case CommentBehavior.OVERWRITE:\n        this._record.current.comment = add;\n        break;\n    }\n  }\n\n  setGameStartMetadata(metadata: GameStartMetadata): void {\n    if (metadata.gameTitle) {\n      this._record.metadata.setStandardMetadata(\n        RecordMetadataKey.TITLE,\n        metadata.gameTitle\n      );\n    }\n    if (metadata.blackName) {\n      this._record.metadata.setStandardMetadata(\n        RecordMetadataKey.BLACK_NAME,\n        metadata.blackName\n      );\n    }\n    if (metadata.whiteName) {\n      this._record.metadata.setStandardMetadata(\n        RecordMetadataKey.WHITE_NAME,\n        metadata.whiteName\n      );\n    }\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.DATE,\n      getDateString()\n    );\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.START_DATETIME,\n      getDateTimeString()\n    );\n    if (metadata.timeLimit) {\n      this._record.metadata.setStandardMetadata(\n        RecordMetadataKey.TIME_LIMIT,\n        formatTimeLimitCSA(metadata.timeLimit)\n      );\n    }\n  }\n\n  setGameEndMetadata(): void {\n    this._record.metadata.setStandardMetadata(\n      RecordMetadataKey.END_DATETIME,\n      getDateTimeString()\n    );\n  }\n\n  updateSearchInfo(type: SearchEngineType, searchInfo: SearchInfo): void {\n    const data = (this.record.current.customData || {}) as RecordCustomData;\n    switch (type) {\n      case SearchEngineType.PLAYER:\n        data.playerSearchInfo = searchInfo;\n        break;\n      case SearchEngineType.RESEARCHER:\n        data.researchInfo = searchInfo;\n        break;\n    }\n    this._record.current.customData = data;\n  }\n\n  updateEnemySearchInfo(searchInfo: SearchInfo): void {\n    const data = (this.record.current.customData || {}) as RecordCustomData;\n    data.enemySearchInfo = searchInfo;\n    this._record.current.customData = data;\n  }\n\n  appendMove(params: AppendMoveParams): boolean {\n    const ok = this._record.append(params.move, params.moveOption);\n    if (!ok) {\n      return false;\n    }\n    if (params.elapsedMs !== undefined) {\n      this._record.current.setElapsedMs(params.elapsedMs);\n    }\n    return true;\n  }\n\n  updateStandardMetadata(update: {\n    key: RecordMetadataKey;\n    value: string;\n  }): void {\n    this._record.metadata.setStandardMetadata(update.key, update.value);\n  }\n\n  on(event: \"changePosition\", handler: () => void): void;\n  on(event: string, handler: unknown): void {\n    switch (event) {\n      case \"changePosition\":\n        this.onChangePosition = handler as () => void;\n        break;\n    }\n    this.setupHandler();\n  }\n\n  private setupHandler(): void {\n    this._record.on(\"changePosition\", this.onChangePosition);\n  }\n}\n","import {\n  PieceImageType,\n  BoardImageType,\n  BoardLabelType,\n} from \"@/components/primitive/BoardLayout\";\n\nexport enum Thema {\n  STANDARD = \"standard\",\n  CHERRY_BLOSSOM = \"cherry-blossom\",\n  DARK = \"dark\",\n}\n\nexport enum Tab {\n  RECORD_INFO = \"recordInfo\",\n  COMMENT = \"comment\",\n  SEARCH = \"search\",\n  PV = \"pv\",\n  CHART = \"chart\",\n  PERCENTAGE_CHART = \"percentageChart\",\n  INVISIBLE = \"invisible\",\n}\n\nexport enum ClockSoundTarget {\n  ALL = \"all\",\n  ONLY_USER = \"onlyUser\",\n}\n\nexport type AppSetting = {\n  thema: Thema;\n  pieceImage: PieceImageType;\n  boardImage: BoardImageType;\n  boardLabelType: BoardLabelType;\n  pieceVolume: number;\n  clockVolume: number;\n  clockPitch: number;\n  clockSoundTarget: ClockSoundTarget;\n  boardFlipping: boolean;\n  tab: Tab;\n  returnCode: string;\n  autoSaveDirectory: string;\n  coefficientInSigmoid: number;\n  badMoveLevelThreshold1: number;\n  badMoveLevelThreshold2: number;\n  badMoveLevelThreshold3: number;\n  badMoveLevelThreshold4: number;\n  showElapsedTimeInRecordView: boolean;\n  showCommentInRecordView: boolean;\n  enableAppLog: boolean;\n  enableUSILog: boolean;\n  enableCSALog: boolean;\n};\n\nexport type AppSettingUpdate = {\n  thema?: Thema;\n  pieceImage?: PieceImageType;\n  boardImage?: BoardImageType;\n  boardLabelType?: BoardLabelType;\n  pieceVolume?: number;\n  clockVolume?: number;\n  clockPitch?: number;\n  clockSoundTarget?: ClockSoundTarget;\n  boardFlipping?: boolean;\n  tab?: Tab;\n  returnCode?: string;\n  autoSaveDirectory?: string;\n  coefficientInSigmoid?: number;\n  badMoveLevelThreshold1?: number;\n  badMoveLevelThreshold2?: number;\n  badMoveLevelThreshold3?: number;\n  badMoveLevelThreshold4?: number;\n  showElapsedTimeInRecordView?: boolean;\n  showCommentInRecordView?: boolean;\n  enableAppLog?: boolean;\n  enableUSILog?: boolean;\n  enableCSALog?: boolean;\n};\n\nexport function defaultAppSetting(opt?: {\n  returnCode?: string;\n  autoSaveDirectory?: string;\n}): AppSetting {\n  return {\n    thema: Thema.STANDARD,\n    pieceImage: PieceImageType.HITOMOJI,\n    boardImage: BoardImageType.LIGHT,\n    boardLabelType: BoardLabelType.STANDARD,\n    pieceVolume: 30,\n    clockVolume: 30,\n    clockPitch: 500,\n    clockSoundTarget: ClockSoundTarget.ONLY_USER,\n    boardFlipping: false,\n    tab: Tab.RECORD_INFO,\n    returnCode: opt?.returnCode || \"\\r\\n\",\n    autoSaveDirectory: opt?.autoSaveDirectory || \"\",\n    coefficientInSigmoid: 600,\n    badMoveLevelThreshold1: 5,\n    badMoveLevelThreshold2: 10,\n    badMoveLevelThreshold3: 20,\n    badMoveLevelThreshold4: 50,\n    showElapsedTimeInRecordView: true,\n    showCommentInRecordView: true,\n    enableAppLog: false,\n    enableUSILog: false,\n    enableCSALog: false,\n  };\n}\n\nexport function validateAppSetting(setting: AppSetting): Error | undefined {\n  if (setting.pieceVolume < 0 || setting.pieceVolume > 100) {\n    return new Error(\"駒音の大きさには0%～100%の値を指定してください。\");\n  }\n  if (setting.clockVolume < 0 || setting.clockVolume > 100) {\n    return new Error(\"時計音の大きさには0%～100%の値を指定してください。\");\n  }\n  if (setting.clockPitch < 220 || setting.clockPitch > 880) {\n    return new Error(\"時計音の高さには220Hz～880Hzの値を指定してください。\");\n  }\n  if (setting.coefficientInSigmoid <= 0) {\n    return new Error(\"勝率換算係数には0より大きい値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold1 < 1 ||\n    setting.badMoveLevelThreshold1 > 100\n  ) {\n    return new Error(\"緩手には1%～100%の値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold2 < 1 ||\n    setting.badMoveLevelThreshold2 > 100\n  ) {\n    return new Error(\"疑問手には1%～100%の値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold3 < 1 ||\n    setting.badMoveLevelThreshold3 > 100\n  ) {\n    return new Error(\"悪手には1%～100%の閾値を指定してください。\");\n  }\n  if (\n    setting.badMoveLevelThreshold4 < 1 ||\n    setting.badMoveLevelThreshold4 > 100\n  ) {\n    return new Error(\"大悪手には1%～100%の値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold1 >= setting.badMoveLevelThreshold2) {\n    return new Error(\"緩手には疑問手より小さい値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold2 >= setting.badMoveLevelThreshold3) {\n    return new Error(\"疑問手には悪手より小さい値を指定してください。\");\n  }\n  if (setting.badMoveLevelThreshold3 >= setting.badMoveLevelThreshold4) {\n    return new Error(\"悪手には大悪手より小さい値を指定してください。\");\n  }\n}\n","export enum LogLevel {\n  INFO = \"info\",\n  WARN = \"warn\",\n  ERROR = \"error\",\n}\n","import { defaultAnalysisSetting } from \"@/settings/analysis\";\nimport { defaultAppSetting } from \"@/settings/app\";\nimport { defaultGameSetting } from \"@/settings/game\";\nimport { defaultResearchSetting } from \"@/settings/research\";\nimport { USIEngineSettings } from \"@/settings/usi\";\nimport { LogLevel } from \"./log\";\nimport { Bridge } from \"./api\";\n\nenum STORAGE_KEY {\n  APP_SETTING = \"appSetting\",\n  RESEARCH_SETTING = \"researchSetting\",\n  ANALYSIS_SETTING = \"analysisSetting\",\n  GAME_SETTING = \"gameSetting\",\n  CSA_GAME_SETTING_HISTORY = \"csaGameSettingHistory\",\n}\n\n// Electron を使わずにシンプルな Web アプリケーションとして実行した場合に使用します。\nexport const webAPI: Bridge = {\n  async getRecordPathFromProcArg(): Promise<string> {\n    return \"\";\n  },\n  updateMenuState(): void {\n    // DO NOTHING\n  },\n  async showOpenRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async openRecord(): Promise<Uint8Array> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSaveRecordDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async saveRecord(): Promise<void> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSelectFileDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async showSelectDirectoryDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async loadAppSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.APP_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAppSetting());\n    }\n    return JSON.stringify({\n      ...defaultAppSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAppSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.APP_SETTING, json);\n  },\n  async loadResearchSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.RESEARCH_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultResearchSetting());\n    }\n    return JSON.stringify({\n      ...defaultResearchSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveResearchSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.RESEARCH_SETTING, json);\n  },\n  async loadAnalysisSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.ANALYSIS_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultAnalysisSetting());\n    }\n    return JSON.stringify({\n      ...defaultAnalysisSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveAnalysisSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.ANALYSIS_SETTING, json);\n  },\n  async loadGameSetting(): Promise<string> {\n    const json = localStorage.getItem(STORAGE_KEY.GAME_SETTING);\n    if (!json) {\n      return JSON.stringify(defaultGameSetting());\n    }\n    return JSON.stringify({\n      ...defaultGameSetting(),\n      ...JSON.parse(json),\n    });\n  },\n  async saveGameSetting(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.GAME_SETTING, json);\n  },\n  async loadCSAGameSettingHistory(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async saveCSAGameSettingHistory(json: string): Promise<void> {\n    localStorage.setItem(STORAGE_KEY.CSA_GAME_SETTING_HISTORY, json);\n  },\n  async loadUSIEngineSetting(): Promise<string> {\n    return new USIEngineSettings().json;\n  },\n  async saveUSIEngineSetting(): Promise<void> {\n    // Do Nothing\n  },\n  async showSelectUSIEngineDialog(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async getUSIEngineInfo(): Promise<string> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async sendUSISetOption(): Promise<void> {\n    // Do Nothing\n  },\n  async usiLaunch(): Promise<number> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async usiGo(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGoPonder(): Promise<void> {\n    // Do Nothing\n  },\n  async usiPonderHit(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGoInfinite(): Promise<void> {\n    // Do Nothing\n  },\n  async usiStop(): Promise<void> {\n    // Do Nothing\n  },\n  async usiGameover(): Promise<void> {\n    // Do Nothing\n  },\n  async usiQuit(): Promise<void> {\n    // Do Nothing\n  },\n  async csaLogin(): Promise<number> {\n    throw \"Web版では利用できない機能です。\";\n  },\n  async csaLogout(): Promise<void> {\n    // Do Nothing\n  },\n  async csaAgree(): Promise<void> {\n    // Do Nothing\n  },\n  async csaMove(): Promise<void> {\n    // Do Nothing\n  },\n  async csaResign(): Promise<void> {\n    // Do Nothing\n  },\n  async csaWin(): Promise<void> {\n    // Do Nothing\n  },\n  async csaStop(): Promise<void> {\n    // Do Nothing\n  },\n  log(level: LogLevel, message: string): void {\n    switch (level) {\n      case LogLevel.INFO:\n        console.log(message);\n        break;\n      case LogLevel.WARN:\n        console.warn(message);\n        break;\n      case LogLevel.ERROR:\n        console.error(message);\n        break;\n    }\n  },\n  onSendError(): void {\n    // Do Nothing\n  },\n  onMenuEvent(): void {\n    // Do Nothing\n  },\n  onUSIBestMove(): void {\n    // Do Nothing\n  },\n  onUSIInfo(): void {\n    // Do Nothing\n  },\n  onUSIPonderInfo(): void {\n    // Do Nothing\n  },\n  onCSAGameSummary(): void {\n    // Do Nothing\n  },\n  onCSAReject(): void {\n    // Do Nothing\n  },\n  onCSAStart(): void {\n    // Do Nothing\n  },\n  onCSAMove(): void {\n    // Do Nothing\n  },\n  onCSAGameResult(): void {\n    // Do Nothing\n  },\n  onCSAClose(): void {\n    // Do Nothing\n  },\n};\n","export function getSituationText(score: number): string {\n  if (score >= 1500) {\n    return \"先手勝勢\";\n  } else if (score >= 600) {\n    return \"先手優勢\";\n  } else if (score >= 400) {\n    return \"先手有利\";\n  } else if (score >= 200) {\n    return \"先手有望\";\n  } else if (score >= -200) {\n    return \"互角\";\n  } else if (score >= -400) {\n    return \"後手有望\";\n  } else if (score >= -600) {\n    return \"後手有利\";\n  } else if (score >= -1500) {\n    return \"後手優勢\";\n  } else {\n    return \"後手勝勢\";\n  }\n}\n\nexport function scoreToPercentage(\n  score: number,\n  coefficientInSigmoid: number\n): number {\n  return 100 / (1 + Math.exp(-score / coefficientInSigmoid));\n}\n","import { CommentBehavior } from \"@/store/record\";\nimport { USIEngineSetting } from \"./usi\";\n\ntype StartCriteria = {\n  enableNumber: boolean;\n  number: number;\n};\n\ntype EndCriteria = {\n  enableNumber: boolean;\n  number: number;\n};\n\ntype PerMoveCriteria = {\n  maxSeconds: number;\n};\n\nexport type AnalysisSetting = {\n  usi?: USIEngineSetting;\n  startCriteria: StartCriteria;\n  endCriteria: EndCriteria;\n  perMoveCriteria: PerMoveCriteria;\n  commentBehavior: CommentBehavior;\n};\n\nexport function defaultAnalysisSetting(): AnalysisSetting {\n  return {\n    startCriteria: {\n      enableNumber: false,\n      number: 20,\n    },\n    endCriteria: {\n      enableNumber: false,\n      number: 100,\n    },\n    perMoveCriteria: {\n      maxSeconds: 5,\n    },\n    commentBehavior: CommentBehavior.INSERT,\n  };\n}\n","import { InitialPositionType } from \"@/shogi\";\nimport * as uri from \"@/uri\";\nimport { PlayerSetting } from \"./player\";\n\nexport type TimeLimitSetting = {\n  timeSeconds: number;\n  byoyomi: number;\n  increment: number;\n};\n\nexport type GameSetting = {\n  black: PlayerSetting;\n  white: PlayerSetting;\n  timeLimit: TimeLimitSetting;\n  startPosition?: InitialPositionType;\n  enableEngineTimeout: boolean;\n  humanIsFront: boolean;\n  enableComment: boolean;\n  enableAutoSave: boolean;\n  repeat: number;\n  swapPlayers: boolean;\n  maxMoves: number;\n};\n\nexport function defaultGameSetting(): GameSetting {\n  return {\n    black: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    white: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    timeLimit: {\n      timeSeconds: 0,\n      byoyomi: 30,\n      increment: 0,\n    },\n    enableEngineTimeout: false,\n    humanIsFront: true,\n    enableComment: true,\n    enableAutoSave: true,\n    repeat: 1,\n    swapPlayers: false,\n    maxMoves: 1000,\n  };\n}\n\nexport function validateGameSetting(\n  gameSetting: GameSetting\n): Error | undefined {\n  if (\n    gameSetting.timeLimit.timeSeconds === 0 &&\n    gameSetting.timeLimit.byoyomi === 0\n  ) {\n    return new Error(\"持ち時間と秒読みが両方とも0です。\");\n  }\n  if (\n    gameSetting.timeLimit.byoyomi !== 0 &&\n    gameSetting.timeLimit.increment !== 0\n  ) {\n    return new Error(\"秒読みとフィッシャールールは併用できません。\");\n  }\n  return;\n}\n\nexport function validateGameSettingForWeb(\n  gameSetting: GameSetting\n): Error | undefined {\n  const result = validateGameSetting(gameSetting);\n  if (result) {\n    return result;\n  }\n  if (gameSetting.enableAutoSave) {\n    return new Error(\"自動保存はWeb版で利用できません。\");\n  }\n  return;\n}\n","import { USIEngineSetting } from \"./usi\";\n\nexport type ResearchSetting = {\n  usi?: USIEngineSetting;\n};\n\nexport function defaultResearchSetting(): ResearchSetting {\n  return {};\n}\n","import { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { GameSetting, TimeLimitSetting } from \"@/settings/game\";\nimport { AppSetting } from \"@/settings/app\";\nimport { MenuEvent } from \"@/ipc/menu\";\nimport { USIInfoSender } from \"./usi\";\nimport { webAPI } from \"./web\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { AppState } from \"@/store/state\";\nimport { GameResult } from \"@/players/player\";\nimport { AnalysisSetting } from \"@/settings/analysis\";\nimport { LogLevel } from \"./log\";\nimport { CSAGameResult, CSASpecialMove } from \"./csa\";\nimport { CSAGameSettingHistory, CSAServerSetting } from \"@/settings/csa\";\n\nexport interface Bridge {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(appState: AppState, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Uint8Array>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Uint8Array): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  showSelectDirectoryDialog(defaultPath?: string): Promise<string>;\n  loadAppSetting(): Promise<string>;\n  saveAppSetting(setting: string): Promise<void>;\n  loadResearchSetting(): Promise<string>;\n  saveResearchSetting(setting: string): Promise<void>;\n  loadAnalysisSetting(): Promise<string>;\n  saveAnalysisSetting(setting: string): Promise<void>;\n  loadGameSetting(): Promise<string>;\n  saveGameSetting(setting: string): Promise<void>;\n  loadCSAGameSettingHistory(): Promise<string>;\n  saveCSAGameSettingHistory(setting: string): Promise<void>;\n  loadUSIEngineSetting(): Promise<string>;\n  saveUSIEngineSetting(setting: string): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<string>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  usiLaunch(json: string): Promise<number>;\n  usiGo(\n    sessionID: number,\n    usi: string,\n    json: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiGoPonder(\n    sessionID: number,\n    usi: string,\n    json: string,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiPonderHit(sessionID: number): Promise<void>;\n  usiGoInfinite(sessionID: number, usi: string): Promise<void>;\n  usiStop(sessionID: number): Promise<void>;\n  usiGameover(sessionID: number, result: GameResult): Promise<void>;\n  usiQuit(sessionID: number): Promise<void>;\n  csaLogin(json: string): Promise<number>;\n  csaLogout(sessionID: number): Promise<void>;\n  csaAgree(sessionID: number, gameID: string): Promise<void>;\n  csaMove(sessionID: number, move: string): Promise<void>;\n  csaResign(sessionID: number): Promise<void>;\n  csaWin(sessionID: number): Promise<void>;\n  csaStop(sessionID: number): Promise<void>;\n  log(level: LogLevel, message: string): void;\n  onSendError(callback: (e: Error) => void): void;\n  onMenuEvent(callback: (event: MenuEvent) => void): void;\n  onUSIBestMove(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sfen: string,\n      ponder?: string\n    ) => void\n  ): void;\n  onUSIInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n  onUSIPonderInfo(\n    callback: (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => void\n  ): void;\n  onCSAGameSummary(\n    callback: (sessionID: number, gameSummary: string) => void\n  ): void;\n  onCSAReject(callback: (sessionID: number) => void): void;\n  onCSAStart(callback: (sessionID: number, playerStates: string) => void): void;\n  onCSAMove(\n    callback: (sessionID: number, mvoe: string, playerStates: string) => void\n  ): void;\n  onCSAGameResult(\n    callback: (\n      sessionID: number,\n      specialMove: CSASpecialMove,\n      gameResult: CSAGameResult\n    ) => void\n  ): void;\n  onCSAClose(callback: (sessionID: number) => void): void;\n}\n\nexport interface API {\n  getRecordPathFromProcArg(): Promise<string>;\n  updateMenuState(appState: AppState, bussy: boolean): void;\n  showOpenRecordDialog(): Promise<string>;\n  openRecord(path: string): Promise<Uint8Array>;\n  showSaveRecordDialog(defaultPath: string): Promise<string>;\n  saveRecord(path: string, data: Uint8Array): Promise<void>;\n  showSelectFileDialog(): Promise<string>;\n  showSelectDirectoryDialog(defaultPath?: string): Promise<string>;\n  loadAppSetting(): Promise<AppSetting>;\n  saveAppSetting(setting: AppSetting): Promise<void>;\n  loadResearchSetting(): Promise<ResearchSetting>;\n  saveResearchSetting(setting: ResearchSetting): Promise<void>;\n  loadAnalysisSetting(): Promise<AnalysisSetting>;\n  saveAnalysisSetting(setting: AnalysisSetting): Promise<void>;\n  loadGameSetting(): Promise<GameSetting>;\n  saveGameSetting(setting: GameSetting): Promise<void>;\n  loadCSAGameSettingHistory(): Promise<CSAGameSettingHistory>;\n  saveCSAGameSettingHistory(setting: CSAGameSettingHistory): Promise<void>;\n  loadUSIEngineSetting(): Promise<USIEngineSettings>;\n  saveUSIEngineSetting(setting: USIEngineSettings): Promise<void>;\n  showSelectUSIEngineDialog(): Promise<string>;\n  getUSIEngineInfo(path: string): Promise<USIEngineSetting>;\n  sendUSISetOption(path: string, name: string): Promise<void>;\n  usiLaunch(setting: USIEngineSetting): Promise<number>;\n  usiGo(\n    sessionID: number,\n    usi: string,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiGoPonder(\n    sessionID: number,\n    usi: string,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  usiPonderHit(sessionID: number): Promise<void>;\n  usiGoInfinite(sessionID: number, usi: string): Promise<void>;\n  usiStop(sessionID: number): Promise<void>;\n  usiGameover(sessionID: number, result: GameResult): Promise<void>;\n  usiQuit(sessionID: number): Promise<void>;\n  csaLogin(setting: CSAServerSetting): Promise<number>;\n  csaLogout(sessionID: number): Promise<void>;\n  csaAgree(sessionID: number, gameID: string): Promise<void>;\n  csaMove(sessionID: number, move: string): Promise<void>;\n  csaResign(sessionID: number): Promise<void>;\n  csaWin(sessionID: number): Promise<void>;\n  csaStop(sessionID: number): Promise<void>;\n  log(level: LogLevel, message: string): void;\n}\n\ninterface ExtendedWindow extends Window {\n  electronShogiAPI?: Bridge;\n}\n\nfunction getWindowObject(): ExtendedWindow {\n  return window as unknown as ExtendedWindow;\n}\n\nexport const bridge: Bridge = getWindowObject().electronShogiAPI || webAPI;\n\nconst api: API = {\n  ...bridge,\n  async loadAppSetting(): Promise<AppSetting> {\n    return JSON.parse(await bridge.loadAppSetting());\n  },\n  saveAppSetting(setting: AppSetting): Promise<void> {\n    return bridge.saveAppSetting(JSON.stringify(setting));\n  },\n  async loadResearchSetting(): Promise<ResearchSetting> {\n    return JSON.parse(await bridge.loadResearchSetting());\n  },\n  saveResearchSetting(setting: ResearchSetting): Promise<void> {\n    return bridge.saveResearchSetting(JSON.stringify(setting));\n  },\n  async loadAnalysisSetting(): Promise<AnalysisSetting> {\n    return JSON.parse(await bridge.loadAnalysisSetting());\n  },\n  saveAnalysisSetting(setting: AnalysisSetting): Promise<void> {\n    return bridge.saveAnalysisSetting(JSON.stringify(setting));\n  },\n  async loadGameSetting(): Promise<GameSetting> {\n    return JSON.parse(await bridge.loadGameSetting());\n  },\n  saveGameSetting(setting: GameSetting): Promise<void> {\n    return bridge.saveGameSetting(JSON.stringify(setting));\n  },\n  async loadCSAGameSettingHistory(): Promise<CSAGameSettingHistory> {\n    return JSON.parse(await bridge.loadCSAGameSettingHistory());\n  },\n  saveCSAGameSettingHistory(setting: CSAGameSettingHistory): Promise<void> {\n    return bridge.saveCSAGameSettingHistory(JSON.stringify(setting));\n  },\n  async loadUSIEngineSetting(): Promise<USIEngineSettings> {\n    return new USIEngineSettings(await bridge.loadUSIEngineSetting());\n  },\n  saveUSIEngineSetting(settings: USIEngineSettings): Promise<void> {\n    return bridge.saveUSIEngineSetting(settings.json);\n  },\n  async getUSIEngineInfo(path: string): Promise<USIEngineSetting> {\n    return JSON.parse(await bridge.getUSIEngineInfo(path));\n  },\n  usiLaunch(setting: USIEngineSetting): Promise<number> {\n    return bridge.usiLaunch(JSON.stringify(setting));\n  },\n  usiGo(\n    sessionID: number,\n    usi: string,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void> {\n    return bridge.usiGo(\n      sessionID,\n      usi,\n      JSON.stringify(timeLimit),\n      blackTimeMs,\n      whiteTimeMs\n    );\n  },\n  usiGoPonder(\n    sessionID: number,\n    usi: string,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void> {\n    return bridge.usiGoPonder(\n      sessionID,\n      usi,\n      JSON.stringify(timeLimit),\n      blackTimeMs,\n      whiteTimeMs\n    );\n  },\n  csaLogin(setting: CSAServerSetting): Promise<number> {\n    return bridge.csaLogin(JSON.stringify(setting));\n  },\n};\n\nexport default api;\n\nexport function isNative(): boolean {\n  return !!getWindowObject().electronShogiAPI;\n}\n","export interface AudioEventHandler {\n  stop(): void;\n}\n\nfunction beep(options?: {\n  type?: OscillatorType;\n  frequency?: number;\n  time?: number;\n  volume?: number;\n}): AudioEventHandler {\n  const type = options?.type || \"sine\";\n  const frequency = options?.frequency || 440;\n  const volume = options?.volume || 2;\n  const context = new AudioContext();\n  const oscillator = context.createOscillator();\n  const gain = context.createGain();\n  oscillator.connect(gain);\n  gain.connect(context.destination);\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  gain.gain.value = volume * 0.005;\n  oscillator.onended = () => {\n    gain.disconnect(context.destination);\n    oscillator.disconnect(gain);\n  };\n  oscillator.start(context.currentTime);\n  if (options?.time) {\n    oscillator.stop(context.currentTime + options.time);\n  }\n  return {\n    stop: () => {\n      if (!options?.time) {\n        oscillator.stop();\n      }\n    },\n  };\n}\n\nexport function beepShort(options: {\n  frequency?: number;\n  volume?: number;\n}): void {\n  beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    time: 0.1,\n    volume: options.volume,\n  });\n}\n\nexport function beepUnlimited(options: {\n  frequency?: number;\n  volume?: number;\n}): AudioEventHandler {\n  return beep({\n    type: \"sine\",\n    frequency: options.frequency,\n    volume: options.volume,\n  });\n}\n\nlet lastPieceBeatTime: number;\n\nexport function playPieceBeat(volume: number): void {\n  const time = Date.now();\n  if (lastPieceBeatTime && time < lastPieceBeatTime + 200) {\n    return;\n  }\n  const audio = new Audio(\"sound/piece.mp3\");\n  audio.volume = volume * 0.01;\n  audio.play();\n  lastPieceBeatTime = time;\n}\n","import { TimeLimitSetting } from \"@/settings/game\";\nimport { ImmutableRecord, Move } from \"@/shogi\";\n\nexport type SearchInfo = {\n  usi: string; // 局面\n  score?: number; // 先手から見た評価値\n  mate?: number; // 先手勝ちの場合に正の値、後手勝ちの場合に負の値\n  pv?: Move[];\n};\n\nexport enum GameResult {\n  WIN = \"win\",\n  LOSE = \"lose\",\n  DRAW = \"draw\",\n}\n\nexport interface SearchHandler {\n  onMove: (move: Move, info?: SearchInfo) => void;\n  onResign: () => void;\n  onWin: () => void;\n  onError: (e: unknown) => void;\n}\n\nexport interface PonderHandler {\n  onSearchInfo: (info: SearchInfo) => void;\n}\n\nexport interface Player {\n  isEngine(): boolean;\n  startSearch(\n    record: ImmutableRecord,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void>;\n  startPonder(\n    record: ImmutableRecord,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void>;\n  stop(): Promise<void>;\n  gameover(result: GameResult): Promise<void>;\n  close(): Promise<void>;\n}\n","import { LogLevel } from \"@/ipc/log\";\nimport api from \"@/ipc/api\";\nimport { GameResult, Player, SearchInfo } from \"@/players/player\";\nimport { defaultGameSetting, GameSetting } from \"@/settings/game\";\nimport { Color, Move, reverseColor, SpecialMove } from \"@/shogi\";\nimport {\n  buildSearchComment,\n  CommentBehavior,\n  RecordManager,\n  SearchEngineType,\n} from \"./record\";\nimport { Clock } from \"./clock\";\nimport { PlayerBuilder } from \"@/players/builder\";\n\nexport interface GameHandlers {\n  onSaveRecord(): Promise<void>;\n  onGameNext(): void;\n  onGameEnd(gameResults: GameResults, specialMove: SpecialMove): void;\n  onPieceBeat(): void;\n  onBeepShort(): void;\n  onBeepUnlimited(): void;\n  onStopBeep(): void;\n  onError(e: unknown): void;\n}\n\nenum GameState {\n  IDLE = \"idle\",\n  ACTIVE = \"active\",\n  PENDING = \"pending\",\n  BUSSY = \"bussy\",\n}\n\nexport type PlayerGameResults = {\n  name: string;\n  win: number;\n};\n\nexport type GameResults = {\n  player1: PlayerGameResults;\n  player2: PlayerGameResults;\n  draw: number;\n  invalid: number;\n  total: number;\n};\n\nfunction newGameResults(name1: string, name2: string): GameResults {\n  return {\n    player1: { name: name1, win: 0 },\n    player2: { name: name2, win: 0 },\n    draw: 0,\n    invalid: 0,\n    total: 0,\n  };\n}\n\nexport class GameManager {\n  private state: GameState;\n  private _setting: GameSetting;\n  private startMoveNumber = 0;\n  private repeat = 0;\n  private blackPlayer?: Player;\n  private whitePlayer?: Player;\n  private gameResults: GameResults = newGameResults(\"\", \"\");\n  private lastEventID: number;\n\n  constructor(\n    private recordManager: RecordManager,\n    private blackClock: Clock,\n    private whiteClock: Clock,\n    private playerBuilder: PlayerBuilder,\n    private handlers: GameHandlers\n  ) {\n    this.state = GameState.IDLE;\n    this._setting = defaultGameSetting();\n    this.lastEventID = 0;\n  }\n\n  get setting(): GameSetting {\n    return this._setting;\n  }\n\n  async startGame(setting: GameSetting): Promise<void> {\n    if (this.state !== GameState.IDLE) {\n      throw Error(\n        \"GameManager#startGame: 前回の対局が正常に終了できていません。アプリを再起動してください。\"\n      );\n    }\n    this._setting = setting;\n    this.repeat = 0;\n    if (!setting.startPosition) {\n      this.startMoveNumber = this.recordManager.record.current.number;\n    }\n    this.gameResults = newGameResults(setting.black.name, setting.white.name);\n    await this.nextGame();\n  }\n\n  private async nextGame(): Promise<void> {\n    this.repeat++;\n    if (this.setting.startPosition) {\n      this.recordManager.reset(this.setting.startPosition);\n    } else if (\n      this.recordManager.record.current.number !== this.startMoveNumber\n    ) {\n      this.recordManager.changeMoveNumber(this.startMoveNumber);\n      this.recordManager.removeNextMove();\n    }\n    this.recordManager.setGameStartMetadata({\n      gameTitle:\n        this.setting.repeat >= 2\n          ? `連続対局 ${this.repeat}/${this.setting.repeat}`\n          : undefined,\n      blackName: this.setting.black.name,\n      whiteName: this.setting.white.name,\n      timeLimit: this.setting.timeLimit,\n    });\n    const clockSetting = {\n      timeMs: this.setting.timeLimit.timeSeconds * 1e3,\n      byoyomi: this.setting.timeLimit.byoyomi,\n      increment: this.setting.timeLimit.increment,\n      onBeepShort: () => this.handlers.onBeepShort(),\n      onBeepUnlimited: () => this.handlers.onBeepUnlimited(),\n      onStopBeep: () => this.handlers.onStopBeep(),\n    };\n    this.blackClock.setup({\n      ...clockSetting,\n      onTimeout: () => {\n        this.timeout(Color.BLACK);\n      },\n    });\n    this.whiteClock.setup({\n      ...clockSetting,\n      onTimeout: () => {\n        this.timeout(Color.WHITE);\n      },\n    });\n    try {\n      this.blackPlayer = await this.playerBuilder.build(\n        this.setting.black,\n        (info) => this.recordManager.updateEnemySearchInfo(info)\n      );\n      this.whitePlayer = await this.playerBuilder.build(\n        this.setting.white,\n        (info) => this.recordManager.updateEnemySearchInfo(info)\n      );\n    } catch (e) {\n      try {\n        await this.closePlayers();\n      } catch (errorOnClose) {\n        this.handlers.onError(errorOnClose);\n      }\n      throw e;\n    }\n    this.state = GameState.ACTIVE;\n    this.handlers.onGameNext();\n    setTimeout(() => this.nextMove());\n  }\n\n  private nextMove(): void {\n    if (this.state !== GameState.ACTIVE) {\n      this.handlers.onError(\n        \"GameManager#nextMove: 予期せぬステータスです:\" + this.state\n      );\n      return;\n    }\n    if (\n      this._setting.maxMoves &&\n      this.recordManager.record.current.number >= this._setting.maxMoves\n    ) {\n      this.endGame(SpecialMove.DRAW);\n      return;\n    }\n    const color = this.recordManager.record.position.color;\n    this.getActiveClock().start();\n    const player = this.getPlayer(color);\n    const ponderPlayer = this.getPlayer(reverseColor(color));\n    if (!player || !ponderPlayer) {\n      this.handlers.onError(\n        \"GameManager#nextMove: プレイヤーが初期化されていません。\"\n      );\n      return;\n    }\n    const eventID = this.issueEventID();\n    player\n      .startSearch(\n        this.recordManager.record,\n        this.setting.timeLimit,\n        this.blackClock.timeMs,\n        this.whiteClock.timeMs,\n        {\n          onMove: (move, info) => this.onMove(eventID, move, info),\n          onResign: () => this.onResign(eventID),\n          onWin: () => this.onWin(eventID),\n          onError: (e) => this.handlers.onError(e),\n        }\n      )\n      .catch((e) => {\n        this.handlers.onError(\n          new Error(\n            \"GameManager#nextMove: プレイヤーにコマンドを送信できませんでした: \" +\n              e\n          )\n        );\n      });\n    ponderPlayer\n      .startPonder(\n        this.recordManager.record,\n        this.setting.timeLimit,\n        this.blackClock.timeMs,\n        this.whiteClock.timeMs\n      )\n      .catch((e) => {\n        this.handlers.onError(\n          new Error(\n            \"GameManager#nextMove: プレイヤーにPonderコマンドを送信できませんでした: \" +\n              e\n          )\n        );\n      });\n  }\n\n  private onMove(eventID: number, move: Move, info?: SearchInfo): void {\n    if (eventID !== this.lastEventID) {\n      api.log(LogLevel.ERROR, \"GameManager#onMove: event ID already disabled\");\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      api.log(\n        LogLevel.ERROR,\n        \"GameManager#onMove: invalid state: \" + this.state\n      );\n      return;\n    }\n    if (!this.recordManager.record.position.isValidMove(move)) {\n      this.handlers.onError(\"反則手: \" + move.getDisplayText());\n      this.endGame(SpecialMove.FOUL_LOSE);\n      return;\n    }\n    this.getActiveClock().stop();\n    this.recordManager.appendMove({\n      move,\n      moveOption: { ignoreValidation: true },\n      elapsedMs: this.getActiveClock().elapsedMs,\n    });\n    if (info) {\n      this.recordManager.updateSearchInfo(SearchEngineType.PLAYER, info);\n    }\n    if (info && this.setting.enableComment) {\n      const comment = buildSearchComment(SearchEngineType.PLAYER, info);\n      this.recordManager.appendComment(comment, CommentBehavior.APPEND);\n    }\n    this.handlers.onPieceBeat();\n    const faulColor = this.recordManager.record.perpetualCheck;\n    if (faulColor) {\n      if (faulColor === this.recordManager.record.position.color) {\n        this.endGame(SpecialMove.FOUL_LOSE);\n        return;\n      } else {\n        this.endGame(SpecialMove.FOUL_WIN);\n        return;\n      }\n    } else if (this.recordManager.record.repetition) {\n      this.endGame(SpecialMove.REPETITION_DRAW);\n      return;\n    }\n    this.nextMove();\n  }\n\n  private onResign(eventID: number): void {\n    if (eventID !== this.lastEventID) {\n      api.log(\n        LogLevel.ERROR,\n        \"GameManager#onResign: event ID already disabled\"\n      );\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      api.log(\n        LogLevel.ERROR,\n        \"GameManager#onResign: invalid state: \" + this.state\n      );\n      return;\n    }\n    this.endGame(SpecialMove.RESIGN);\n  }\n\n  private onWin(eventID: number): void {\n    if (eventID !== this.lastEventID) {\n      api.log(LogLevel.ERROR, \"GameManager#onWin: event ID already disabled\");\n      return;\n    }\n    if (this.state !== GameState.ACTIVE) {\n      api.log(\n        LogLevel.ERROR,\n        \"GameManager#onWin: invalid state: \" + this.state\n      );\n      return;\n    }\n    this.endGame(SpecialMove.ENTERING_OF_KING);\n  }\n\n  private onTimeout(): void {\n    if (this.state !== GameState.ACTIVE) {\n      this.handlers.onError(\n        \"GameManager#onTimeout: 予期せぬステータスです: \" + this.state\n      );\n      return;\n    }\n    this.endGame(SpecialMove.TIMEOUT);\n  }\n\n  private timeout(color: Color): void {\n    this.handlers.onStopBeep();\n    const player = this.getPlayer(color);\n    if (player && player.isEngine() && !this.setting.enableEngineTimeout) {\n      player.stop().catch((e) => {\n        this.handlers.onError(\n          new Error(\n            \"GameManager#timeout: プレイヤーにコマンドを送信できませんでした: \" +\n              e\n          )\n        );\n      });\n      return;\n    }\n    this.onTimeout();\n  }\n\n  endGame(specialMove: SpecialMove): void {\n    if (this.state !== GameState.ACTIVE && this.state !== GameState.PENDING) {\n      return;\n    }\n    this.state = GameState.BUSSY;\n    const color = this.recordManager.record.position.color;\n    Promise.resolve()\n      .then(() => {\n        return this.sendGameResults(color, specialMove);\n      })\n      .then(() => {\n        return this.closePlayers();\n      })\n      .then(() => {\n        this.getActiveClock().pause();\n        this.recordManager.appendMove({\n          move: specialMove,\n          elapsedMs: this.getActiveClock().elapsedMs,\n        });\n        this.recordManager.setGameEndMetadata();\n        this.updateGameResults(color, specialMove);\n        this.state = GameState.IDLE;\n      })\n      .then(() => {\n        if (this._setting.enableAutoSave) {\n          return this.handlers.onSaveRecord();\n        }\n      })\n      .then(() => {\n        const complete =\n          specialMove === SpecialMove.INTERRUPT ||\n          this.repeat >= this.setting.repeat;\n        if (complete) {\n          this.handlers.onGameEnd(this.gameResults, specialMove);\n          return;\n        }\n        if (this.setting.swapPlayers) {\n          this.swapPlayers();\n        }\n        this.nextGame().catch((e) => {\n          this.handlers.onError(e);\n        });\n      })\n      .catch((e) => {\n        this.handlers.onError(e);\n        this.state = GameState.PENDING;\n      });\n  }\n\n  private updateGameResults(color: Color, specialMove: SpecialMove): void {\n    const gameResult = specialMoveToPlayerGameResult(\n      color,\n      Color.BLACK,\n      specialMove\n    );\n    switch (gameResult) {\n      case GameResult.WIN:\n        this.gameResults.player1.win++;\n        break;\n      case GameResult.LOSE:\n        this.gameResults.player2.win++;\n        break;\n      case GameResult.DRAW:\n        this.gameResults.draw++;\n        break;\n      default:\n        this.gameResults.invalid++;\n        break;\n    }\n    this.gameResults.total++;\n  }\n\n  private swapPlayers(): void {\n    this._setting = {\n      ...this.setting,\n      black: this.setting.white,\n      white: this.setting.black,\n    };\n    this.gameResults = {\n      ...this.gameResults,\n      player1: this.gameResults.player2,\n      player2: this.gameResults.player1,\n    };\n  }\n\n  private async sendGameResults(\n    color: Color,\n    specialMove: SpecialMove\n  ): Promise<void> {\n    if (this.blackPlayer) {\n      const gameResult = specialMoveToPlayerGameResult(\n        color,\n        Color.BLACK,\n        specialMove\n      );\n      if (gameResult) {\n        await this.blackPlayer.gameover(gameResult);\n      }\n    }\n    if (this.whitePlayer) {\n      const gameResult = specialMoveToPlayerGameResult(\n        color,\n        Color.WHITE,\n        specialMove\n      );\n      if (gameResult) {\n        await this.whitePlayer.gameover(gameResult);\n      }\n    }\n  }\n\n  private async closePlayers(): Promise<void> {\n    if (this.blackPlayer) {\n      await this.blackPlayer.close();\n      this.blackPlayer = undefined;\n    }\n    if (this.whitePlayer) {\n      await this.whitePlayer.close();\n      this.whitePlayer = undefined;\n    }\n  }\n\n  private getPlayer(color: Color): Player | undefined {\n    switch (color) {\n      case Color.BLACK:\n        return this.blackPlayer;\n      case Color.WHITE:\n        return this.whitePlayer;\n    }\n  }\n\n  private getActiveClock(): Clock {\n    const color = this.recordManager.record.position.color;\n    switch (color) {\n      case Color.BLACK:\n        return this.blackClock;\n      case Color.WHITE:\n        return this.whiteClock;\n    }\n  }\n\n  private issueEventID(): number {\n    this.lastEventID += 1;\n    return this.lastEventID;\n  }\n}\n\nfunction specialMoveToPlayerGameResult(\n  currentColor: Color,\n  playerColor: Color,\n  specialMove: SpecialMove\n): GameResult | null {\n  switch (specialMove) {\n    case SpecialMove.FOUL_WIN:\n    case SpecialMove.ENTERING_OF_KING:\n      return currentColor == playerColor ? GameResult.WIN : GameResult.LOSE;\n    case SpecialMove.RESIGN:\n    case SpecialMove.MATE:\n    case SpecialMove.TIMEOUT:\n    case SpecialMove.FOUL_LOSE:\n      return currentColor == playerColor ? GameResult.LOSE : GameResult.WIN;\n    case SpecialMove.DRAW:\n    case SpecialMove.REPETITION_DRAW:\n      return GameResult.DRAW;\n  }\n  return null;\n}\n","import { ImmutablePosition, Move } from \"@/shogi\";\n\nexport enum USIInfoSender {\n  BLACK_PLAYER = \"blackPlayer\",\n  WHITE_PLAYER = \"whitePlayer\",\n  RESEARCHER = \"researcher\",\n}\n\nexport type USIInfoCommand = {\n  depth?: number;\n  seldepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  pv?: string[];\n  multipv?: number;\n  scoreCP?: number;\n  scoreMate?: number;\n  lowerbound?: boolean;\n  upperbound?: boolean;\n  currmove?: string;\n  hashfullPerMill?: number;\n  nps?: number;\n  string?: string;\n};\n\nexport function parseSFENPV(\n  position: ImmutablePosition,\n  sfenPV: string[]\n): Move[] {\n  const pv: Move[] = [];\n  const pos = position.clone();\n  for (const sfen of sfenPV) {\n    const move = pos.createMoveBySFEN(sfen);\n    if (!move || !pos.doMove(move)) {\n      break;\n    }\n    pv.push(move);\n  }\n  return pv;\n}\n","export enum AppState {\n  NORMAL = \"normal\",\n  PASTE_DIALOG = \"pasteDialog\",\n  POSITION_EDITING = \"positionEditing\",\n  GAME_DIALOG = \"gameDialog\",\n  GAME = \"game\",\n  CSA_GAME_DIALOG = \"csaGameDialog\",\n  CSA_GAME = \"csaGame\",\n  RESEARCH = \"research\",\n  RESEARCH_DIALOG = \"researchDialog\",\n  ANALYSIS = \"analysis\",\n  ANALYSIS_DIALOG = \"analysisDialog\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSettingDialog\",\n  TEMPORARY = \"temporary\",\n}\n","import { RecordMetadataKey } from \"@/shogi\";\nimport { ImmutableRecordMetadata } from \"@/shogi/record\";\n\nexport function defaultRecordFileName(\n  metadata: ImmutableRecordMetadata\n): string {\n  let ret = getDateString(metadata);\n  const title =\n    metadata.getStandardMetadata(RecordMetadataKey.TITLE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.TOURNAMENT) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.OPUS_NO) ||\n    metadata.getStandardMetadata(RecordMetadataKey.PLACE) ||\n    metadata.getStandardMetadata(RecordMetadataKey.POSTED_ON) ||\n    metadata.getStandardMetadata(RecordMetadataKey.AUTHOR);\n  if (title) {\n    ret += \"_\" + title;\n  }\n  const black =\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.BLACK_SHORT_NAME);\n  if (black) {\n    ret += \"_\" + black;\n  }\n  const white =\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_NAME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.WHITE_SHORT_NAME);\n  if (white) {\n    ret += \"_\" + white;\n  }\n  return ret.trim().replaceAll(\"/\", \"_\").replaceAll(\"\\\\\", \"_\") + \".kif\";\n}\n\nfunction getDateString(metadata: ImmutableRecordMetadata): string {\n  const date =\n    metadata.getStandardMetadata(RecordMetadataKey.START_DATETIME) ||\n    metadata.getStandardMetadata(RecordMetadataKey.DATE);\n  if (date) {\n    return date\n      .trim()\n      .replaceAll(\" \", \"_\")\n      .replaceAll(\"/\", \"\")\n      .replaceAll(\":\", \"\");\n  }\n  return new Date()\n    .toLocaleDateString(undefined, {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n    })\n    .replaceAll(\"/\", \"\");\n}\n","export class BussyStore {\n  private count = 0;\n\n  get isBussy(): boolean {\n    return this.count !== 0;\n  }\n\n  retain(): void {\n    this.count += 1;\n  }\n\n  release(): void {\n    this.count -= 1;\n  }\n}\n","import { USIInfoCommand, USIInfoSender } from \"@/ipc/usi\";\nimport { ImmutablePosition, Move, Position } from \"@/shogi\";\n\nexport type USIIteration = {\n  position: string;\n  depth?: number;\n  selectiveDepth?: number;\n  timeMs?: number;\n  nodes?: number;\n  score?: number;\n  scoreMate?: number;\n  lowerBound?: boolean;\n  upperBound?: boolean;\n  multiPV?: number;\n  pv?: string[];\n  text?: string;\n};\n\nfunction formatPV(position: ImmutablePosition, pv: string[]): string {\n  const p = position.clone();\n  let prev: Move | undefined;\n  let result = \"\";\n  for (const sfen of pv) {\n    const move = p.createMoveBySFEN(sfen);\n    if (!move) {\n      break;\n    }\n    p.doMove(move, {\n      ignoreValidation: true,\n    });\n    result += move.getDisplayText(prev);\n    prev = move;\n  }\n  return result;\n}\n\nexport class USIPlayerMonitor {\n  public nodes?: number;\n  public nps?: number;\n  public iterates: USIIteration[] = [];\n  public hashfull?: number;\n  public currentMove?: string;\n  public currentMoveText?: string;\n  public ponderMove?: string;\n\n  constructor(\n    public sessionID: number,\n    public name: string,\n    public sfen: string\n  ) {}\n\n  get latestIteration(): USIIteration[] {\n    const result: USIIteration[] = [];\n    const multiPVSet = new Set();\n    const moveSet = new Set();\n    for (const iterate of this.iterates) {\n      const move = iterate.pv ? iterate.pv[0] : undefined;\n      if (!multiPVSet.has(iterate.multiPV) && !moveSet.has(move)) {\n        result.push(iterate);\n        multiPVSet.add(iterate.multiPV);\n        moveSet.add(move);\n      }\n    }\n    return result.sort((a, b) => {\n      return (a.multiPV || 1) - (b.multiPV || 1);\n    });\n  }\n\n  update(sfen: string, update: USIInfoCommand, ponderMove?: Move): void {\n    const position = Position.newBySFEN(sfen);\n    const iterate: USIIteration = {\n      position: sfen,\n    };\n    if (update.depth !== undefined) {\n      iterate.depth = update.depth;\n    }\n    if (update.seldepth !== undefined) {\n      iterate.selectiveDepth = update.seldepth;\n    }\n    if (update.timeMs !== undefined) {\n      iterate.timeMs = update.timeMs;\n    }\n    if (update.nodes !== undefined) {\n      this.nodes = update.nodes;\n    }\n    if (update.pv) {\n      iterate.pv = update.pv;\n      iterate.text = position ? formatPV(position, update.pv) : \"\";\n    }\n    if (update.multipv !== undefined) {\n      iterate.multiPV = update.multipv;\n    }\n    if (update.scoreCP !== undefined) {\n      iterate.score = update.scoreCP;\n    }\n    if (update.scoreMate !== undefined) {\n      iterate.scoreMate = update.scoreMate;\n    }\n    if (update.lowerbound !== undefined) {\n      iterate.lowerBound = update.lowerbound;\n    }\n    if (update.upperbound !== undefined) {\n      iterate.upperBound = update.upperbound;\n    }\n    if (update.currmove !== undefined) {\n      this.currentMove = update.currmove;\n      const move = position && position.createMoveBySFEN(update.currmove);\n      if (move) {\n        this.currentMoveText = move.getDisplayText();\n      }\n    }\n    if (update.hashfullPerMill !== undefined) {\n      this.hashfull = update.hashfullPerMill / 1000;\n    }\n    if (update.nps !== undefined) {\n      this.nps = update.nps;\n    }\n    if (update.string) {\n      iterate.text = update.string;\n    }\n    if (Object.keys(iterate).length !== 0) {\n      // USI プロトコルにおいて nodes は読み筋と関係なく定期的に送る事ができるとされている。\n      // ただ、多くのエンジンが読み筋と一緒に送ってくるため読み筋等がある場合にはそちらにも記録する。\n      if (update.nodes !== undefined) {\n        iterate.nodes = update.nodes;\n      }\n      this.iterates.unshift(iterate);\n    }\n    this.ponderMove = ponderMove?.getDisplayText();\n  }\n}\n\ntype USIUpdate = {\n  sessionID: number;\n  sfen: string;\n  sender: USIInfoSender;\n  name: string;\n  info: USIInfoCommand;\n  ponderMove?: Move;\n};\n\nexport class USIMonitor {\n  private _blackPlayer?: USIPlayerMonitor;\n  private _whitePlayer?: USIPlayerMonitor;\n  private _researcher?: USIPlayerMonitor;\n  private updateQueue: USIUpdate[] = [];\n  private timeoutHandle?: number;\n\n  get blackPlayer(): USIPlayerMonitor | undefined {\n    return this._blackPlayer;\n  }\n\n  get whitePlayer(): USIPlayerMonitor | undefined {\n    return this._whitePlayer;\n  }\n\n  get researcher(): USIPlayerMonitor | undefined {\n    return this._researcher;\n  }\n\n  clear(): void {\n    this._blackPlayer = undefined;\n    this._whitePlayer = undefined;\n    this._researcher = undefined;\n    this.updateQueue = [];\n  }\n\n  update(\n    sessionID: number,\n    position: ImmutablePosition,\n    sender: USIInfoSender,\n    name: string,\n    info: USIInfoCommand,\n    ponderMove?: Move\n  ): void {\n    this.updateQueue.push({\n      sessionID,\n      sfen: position.sfen,\n      sender,\n      name,\n      info,\n      ponderMove,\n    });\n    // 高頻度でコマンドが送られてくると描画が追いつかないので、一定時間ごとに反映する。\n    if (!this.timeoutHandle) {\n      this.timeoutHandle = window.setTimeout(() => {\n        this.dequeue();\n      }, 500);\n    }\n  }\n\n  private dequeue() {\n    for (const update of this.updateQueue) {\n      this._update(update);\n    }\n    this.updateQueue = [];\n    this.timeoutHandle = undefined;\n  }\n\n  private _update(update: USIUpdate) {\n    switch (update.sender) {\n      case USIInfoSender.BLACK_PLAYER:\n        if (\n          !this._blackPlayer ||\n          this._blackPlayer.sessionID !== update.sessionID ||\n          this._blackPlayer.sfen !== update.sfen\n        ) {\n          this._blackPlayer = new USIPlayerMonitor(\n            update.sessionID,\n            update.name,\n            update.sfen\n          );\n        }\n        this._blackPlayer.update(update.sfen, update.info, update.ponderMove);\n        this._researcher = undefined;\n        break;\n      case USIInfoSender.WHITE_PLAYER:\n        if (\n          !this._whitePlayer ||\n          this._whitePlayer.sessionID !== update.sessionID ||\n          this._whitePlayer.sfen !== update.sfen\n        ) {\n          this._whitePlayer = new USIPlayerMonitor(\n            update.sessionID,\n            update.name,\n            update.sfen\n          );\n        }\n        this._whitePlayer.update(update.sfen, update.info, update.ponderMove);\n        this._researcher = undefined;\n        break;\n      case USIInfoSender.RESEARCHER:\n        if (\n          !this._researcher ||\n          this._researcher.sessionID !== update.sessionID ||\n          this._researcher.sfen !== update.sfen\n        ) {\n          this._researcher = new USIPlayerMonitor(\n            update.sessionID,\n            update.name,\n            update.sfen\n          );\n        }\n        this._researcher.update(update.sfen, update.info);\n        this._blackPlayer = undefined;\n        this._whitePlayer = undefined;\n        break;\n    }\n  }\n}\n","export type ListItem = {\n  text: string;\n  children?: string[];\n};\n\nexport type List = {\n  type: \"list\";\n  items: ListItem[];\n};\n\nexport type Attachment = List;\n\nexport type Message = {\n  text: string;\n  attachments?: Attachment[];\n};\n\nexport class MessageStore {\n  private _queue: Message[] = [];\n\n  get message(): Message {\n    return this._queue[0];\n  }\n\n  get hasMessage(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  enqueue(message: Message): void {\n    this._queue.push(message);\n  }\n\n  dequeue(): void {\n    this._queue.shift();\n  }\n}\n","export class ErrorStore {\n  private _queue: Error[] = [];\n\n  get errors(): Error[] {\n    return this._queue;\n  }\n\n  get hasError(): boolean {\n    return this._queue.length !== 0;\n  }\n\n  push(e: unknown): void {\n    if (e instanceof Error) {\n      this._queue.push(e);\n    } else {\n      this._queue.push(new Error(\"\" + e));\n    }\n  }\n\n  clear(): void {\n    this._queue = [];\n  }\n}\n","import api from \"@/ipc/api\";\nimport { parseSFENPV, USIInfoCommand } from \"@/ipc/usi\";\nimport { TimeLimitSetting } from \"@/settings/game\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  USIEngineSetting,\n  USIPonder,\n} from \"@/settings/usi\";\nimport { Color, ImmutableRecord, Position } from \"@/shogi\";\nimport { GameResult, Player, SearchInfo, SearchHandler } from \"./player\";\n\nexport class USIPlayer implements Player {\n  private sessionID = 0;\n  private usi?: string;\n  private position?: Position;\n  private searchHandler?: SearchHandler;\n  private ponder?: string;\n  private inPonder = false;\n  private info?: SearchInfo;\n  private usiInfoTimeout?: number;\n\n  constructor(\n    private setting: USIEngineSetting,\n    private onSearchInfo?: (info: SearchInfo) => void\n  ) {}\n\n  async launch(): Promise<void> {\n    this.sessionID = await api.usiLaunch(this.setting);\n    usiPlayers[this.sessionID] = this;\n  }\n\n  isEngine(): boolean {\n    return true;\n  }\n\n  async startSearch(\n    record: ImmutableRecord,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void> {\n    this.searchHandler = handler;\n    this.usi = record.usi;\n    this.position = record.position.clone();\n    if (this.inPonder && this.ponder === this.usi) {\n      api.usiPonderHit(this.sessionID);\n    } else {\n      this.info = undefined;\n      await api.usiGo(\n        this.sessionID,\n        this.usi,\n        timeLimit,\n        blackTimeMs,\n        whiteTimeMs\n      );\n    }\n    this.inPonder = false;\n    this.ponder = undefined;\n  }\n\n  async startPonder(\n    record: ImmutableRecord,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number\n  ): Promise<void> {\n    const baseUSI = record.usi;\n    if (!this.ponder || !this.ponder.startsWith(baseUSI)) {\n      return;\n    }\n    const ponderSetting = getUSIEngineOptionCurrentValue(\n      this.setting.options[USIPonder]\n    );\n    if (ponderSetting !== \"true\") {\n      return;\n    }\n    this.searchHandler = undefined;\n    this.usi = this.ponder;\n    this.position = record.position.clone();\n    const ponderMove = this.position.createMoveBySFEN(\n      this.ponder.slice(baseUSI.length + 1)\n    );\n    if (!ponderMove) {\n      return;\n    }\n    this.position.doMove(ponderMove);\n    this.info = undefined;\n    this.inPonder = true;\n    await api.usiGoPonder(\n      this.sessionID,\n      this.ponder,\n      timeLimit,\n      blackTimeMs,\n      whiteTimeMs\n    );\n  }\n\n  async startResearch(record: ImmutableRecord): Promise<void> {\n    this.searchHandler = undefined;\n    this.usi = record.usi;\n    this.info = undefined;\n    this.position = record.position.clone();\n    await api.usiGoInfinite(this.sessionID, record.usi);\n  }\n\n  async stop(): Promise<void> {\n    await api.usiStop(this.sessionID);\n  }\n\n  async gameover(result: GameResult): Promise<void> {\n    await api.usiGameover(this.sessionID, result);\n  }\n\n  async close(): Promise<void> {\n    this.searchHandler = undefined;\n    await api.usiQuit(this.sessionID);\n    delete usiPlayers[this.sessionID];\n  }\n\n  onBestMove(usi: string, sfen: string, ponder?: string): void {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (!searchHandler || !this.position) {\n      return;\n    }\n    if (usi !== this.usi) {\n      return;\n    }\n    if (sfen === \"resign\") {\n      searchHandler.onResign();\n      return;\n    }\n    if (sfen === \"win\") {\n      searchHandler.onWin();\n      return;\n    }\n    const move = this.position.createMoveBySFEN(sfen);\n    if (!move) {\n      searchHandler.onError(\"エンジンから不明な指し手を受信しました:\" + sfen);\n      searchHandler.onResign();\n      return;\n    }\n    this.ponder = ponder && `${usi} ${sfen} ${ponder}`;\n    this.flushUSIInfo();\n    if (\n      this.info &&\n      this.info.pv &&\n      this.info.pv.length >= 1 &&\n      this.info.pv[0].equals(move)\n    ) {\n      const info = {\n        ...this.info,\n        pv: this.info.pv.slice(1),\n      };\n      searchHandler.onMove(move, info);\n    } else {\n      searchHandler.onMove(move);\n    }\n  }\n\n  onUSIInfo(usi: string, infoCommand: USIInfoCommand) {\n    if (usi !== this.usi || !this.position) {\n      return;\n    }\n    if (infoCommand.multipv && infoCommand.multipv !== 1) {\n      return;\n    }\n    const sign = this.position.color === Color.BLACK ? 1 : -1;\n    const pv =\n      infoCommand.pv && infoCommand.pv.length >= 1\n        ? infoCommand.pv\n        : infoCommand.currmove\n        ? [infoCommand.currmove]\n        : undefined;\n    const info = {\n      usi: usi,\n      score: infoCommand.scoreCP && infoCommand.scoreCP * sign,\n      mate: infoCommand.scoreMate && infoCommand.scoreMate * sign,\n      pv: pv && parseSFENPV(this.position, pv),\n    };\n    this.updateUSIInfo(info);\n  }\n\n  private updateUSIInfo(info: SearchInfo) {\n    this.info = info;\n    // 高頻度でコマンドが送られてくると描画が追いつかないので、一定時間ごとに反映する。\n    if (this.usiInfoTimeout) {\n      return;\n    }\n    this.usiInfoTimeout = window.setTimeout(() => {\n      this.flushUSIInfo();\n    }, 500);\n  }\n\n  private flushUSIInfo() {\n    if (this.usiInfoTimeout) {\n      clearTimeout(this.usiInfoTimeout);\n      this.usiInfoTimeout = undefined;\n    }\n    if (this.onSearchInfo && this.info) {\n      this.onSearchInfo(this.info);\n    }\n  }\n}\n\nexport const usiPlayers: { [sessionID: number]: USIPlayer } = {};\n\nexport function onUSIBestMove(\n  sessionID: number,\n  usi: string,\n  sfen: string,\n  ponder?: string\n) {\n  const player = usiPlayers[sessionID];\n  if (!player) {\n    return;\n  }\n  player.onBestMove(usi, sfen, ponder);\n}\n\nexport function onUSIInfo(\n  sessionID: number,\n  usi: string,\n  info: USIInfoCommand\n) {\n  const player = usiPlayers[sessionID];\n  if (!player) {\n    return;\n  }\n  player.onUSIInfo(usi, info);\n}\n","import { SearchInfo } from \"@/players/player\";\nimport { USIPlayer } from \"@/players/usi\";\nimport { AnalysisSetting } from \"@/settings/analysis\";\nimport { AppSetting } from \"@/settings/app\";\nimport { USIEngineSetting } from \"@/settings/usi\";\nimport { Color, Move, reverseColor } from \"@/shogi\";\nimport { buildSearchComment, RecordManager, SearchEngineType } from \"./record\";\nimport { scoreToPercentage } from \"./score\";\n\nexport interface AnalysisHandler {\n  // 終了した際に呼び出されます。\n  onFinish(): void;\n  // エラーを通知します。\n  onError(e: unknown): void;\n}\n\nexport class AnalysisManager {\n  private researcher?: USIPlayer;\n  private number?: number;\n  private actualMove?: Move;\n  private color = Color.BLACK;\n  private lastSearchInfo?: SearchInfo;\n  private searchInfo?: SearchInfo;\n  private timerHandle?: number;\n\n  constructor(\n    private recordManager: RecordManager,\n    private _setting: AnalysisSetting,\n    private appSetting: AppSetting,\n    private handler: AnalysisHandler\n  ) {\n    if (!_setting.usi) {\n      throw new Error(\"エンジンが設定されていません。\");\n    }\n  }\n\n  get setting(): AnalysisSetting {\n    return this._setting;\n  }\n\n  async start(): Promise<void> {\n    await this.setupEngine(this.setting.usi as USIEngineSetting);\n    setTimeout(() => this.next());\n  }\n\n  close(): void {\n    this.clearTimer();\n    this.closeEngine().catch((e) => {\n      this.handler.onError(e);\n    });\n  }\n\n  private async setupEngine(setting: USIEngineSetting): Promise<void> {\n    await this.closeEngine();\n    const researcher = new USIPlayer(setting, this.updateSearchInfo.bind(this));\n    await researcher.launch();\n    this.researcher = researcher;\n  }\n\n  private next(): void {\n    if (!this.researcher) {\n      this.handler.onError(new Error(\"エンジンが初期化されていません。\"));\n      this.finish();\n      return;\n    }\n    this.clearTimer();\n\n    this.actualMove = undefined;\n    this.lastSearchInfo = this.searchInfo;\n    this.searchInfo = undefined;\n    this.number =\n      this.number !== undefined\n        ? this.number + 1\n        : this.setting.startCriteria.enableNumber\n        ? this.setting.startCriteria.number - 1\n        : 0;\n    if (\n      this.setting.endCriteria.enableNumber &&\n      this.number >= this.setting.endCriteria.number\n    ) {\n      this.finish();\n      return;\n    }\n\n    this.recordManager.changeMoveNumber(this.number);\n    const record = this.recordManager.record;\n    if (record.current.number !== this.number) {\n      this.finish();\n      return;\n    }\n    if (!record.current.next && !(record.current.move instanceof Move)) {\n      this.finish();\n      return;\n    }\n    this.actualMove =\n      record.current.move instanceof Move ? record.current.move : undefined;\n    this.color = reverseColor(record.position.color);\n    this.timerHandle = window.setTimeout(() => {\n      this.onResult();\n      this.next();\n    }, this.setting.perMoveCriteria.maxSeconds * 1e3);\n    this.researcher.startResearch(record).catch((e) => {\n      this.handler.onError(e);\n    });\n  }\n\n  private finish(): void {\n    this.handler.onFinish();\n    this.close();\n  }\n\n  private clearTimer(): void {\n    if (this.timerHandle) {\n      clearTimeout(this.timerHandle);\n      this.timerHandle = undefined;\n    }\n  }\n\n  private onResult(): void {\n    if (!this.searchInfo || !this.lastSearchInfo) {\n      return;\n    }\n    const sign = this.color === Color.BLACK ? 1 : -1;\n    const negaScore =\n      this.searchInfo.score !== undefined\n        ? this.searchInfo.score * sign\n        : undefined;\n    const scoreDelta =\n      this.searchInfo.score !== undefined &&\n      this.lastSearchInfo.score !== undefined\n        ? (this.searchInfo.score - this.lastSearchInfo.score) * sign\n        : undefined;\n    const isBestMove =\n      this.actualMove && this.lastSearchInfo.pv\n        ? this.actualMove.equals(this.lastSearchInfo.pv[0])\n        : undefined;\n    let comment = \"\";\n    if (scoreDelta !== undefined && negaScore !== undefined && !isBestMove) {\n      const text = getMoveAccuracyText(\n        negaScore - scoreDelta,\n        negaScore,\n        this.appSetting\n      );\n      if (text) {\n        comment += `【${text}】\\n`;\n      }\n    }\n    comment += buildSearchComment(SearchEngineType.RESEARCHER, this.searchInfo);\n    this.recordManager.appendComment(comment, this.setting.commentBehavior);\n  }\n\n  private async closeEngine(): Promise<void> {\n    if (this.researcher) {\n      this.researcher.close();\n      this.researcher = undefined;\n    }\n  }\n\n  updateSearchInfo(info: SearchInfo): void {\n    this.recordManager.updateSearchInfo(SearchEngineType.RESEARCHER, info);\n    this.searchInfo = info;\n  }\n}\n\nfunction getMoveAccuracyText(\n  before: number,\n  after: number,\n  appSetting: AppSetting\n): string | null {\n  const loss =\n    scoreToPercentage(before, appSetting.coefficientInSigmoid) -\n    scoreToPercentage(after, appSetting.coefficientInSigmoid);\n  if (loss >= appSetting.badMoveLevelThreshold4) {\n    return \"大悪手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold3) {\n    return \"悪手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold2) {\n    return \"疑問手\";\n  } else if (loss >= appSetting.badMoveLevelThreshold1) {\n    return \"緩手\";\n  }\n  return null;\n}\n","import { Color } from \"@/shogi\";\n\nexport type CSAGameSummary = {\n  id: string;\n  blackPlayerName?: string;\n  whitePlayerName?: string;\n  myColor: Color.BLACK | Color.WHITE;\n  toMove: Color.BLACK | Color.WHITE;\n  position: string;\n  timeUnitMs: number;\n  totalTime: number;\n  byoyomi: number;\n  delay: number;\n  increment: number;\n};\n\nexport function emptyCSAGameSummary(): CSAGameSummary {\n  return {\n    id: \"\",\n    myColor: Color.BLACK,\n    toMove: Color.BLACK,\n    position: \"\",\n    timeUnitMs: 1e3,\n    totalTime: 0,\n    byoyomi: 0,\n    delay: 0,\n    increment: 0,\n  };\n}\n\nexport type CSAPlayerState = {\n  time: number;\n};\n\nexport type CSAPlayerStates = {\n  black: CSAPlayerState;\n  white: CSAPlayerState;\n};\n\nexport function emptyCSAPlayerStates(): CSAPlayerStates {\n  return {\n    black: { time: 0 },\n    white: { time: 0 },\n  };\n}\n\nexport enum CSASpecialMove {\n  UNKNOWN = \"unknown\",\n  RESIGN = \"resign\",\n  SENNICHITE = \"sennichite\",\n  OUTE_SENNICHITE = \"oute_sennichite\",\n  ILLEGAL_MOVE = \"illegal_move\",\n  ILLEGAL_ACTION = \"illegal_action\",\n  TIME_UP = \"time_up\",\n  JISHOGI = \"jishogi\",\n  MAX_MOVES = \"max_moves\",\n}\n\nexport enum CSAGameResult {\n  WIN = \"win\",\n  LOSE = \"lose\",\n  DRAW = \"draw\",\n  CENSORED = \"censored\",\n  CHUDAN = \"chudan\",\n}\n","import * as uri from \"@/uri\";\nimport { PlayerSetting } from \"./player\";\n\nexport type CSAServerSetting = {\n  host: string;\n  port: number;\n  id: string;\n  password: string;\n};\n\nexport type CSAGameSetting = {\n  player: PlayerSetting;\n  server: CSAServerSetting;\n  autoFlip: boolean;\n  enableComment: boolean;\n  enableAutoSave: boolean;\n  repeat: number;\n};\n\nexport function defaultCSAServerSetting(): CSAServerSetting {\n  return {\n    host: \"localhost\",\n    port: 4081,\n    id: \"\",\n    password: \"\",\n  };\n}\n\nexport function defaultCSAGameSetting(): CSAGameSetting {\n  return {\n    player: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    server: defaultCSAServerSetting(),\n    autoFlip: true,\n    enableComment: true,\n    enableAutoSave: true,\n    repeat: 1,\n  };\n}\n\nexport function validateCSAGameSetting(\n  csaGameSetting: CSAGameSetting\n): Error | undefined {\n  if (csaGameSetting.server.host === \"\") {\n    return new Error(\"ホスト名が空です。\");\n  }\n  if (csaGameSetting.server.port < 0 || csaGameSetting.server.port > 65535) {\n    return new Error(\"無効なポート番号です。\");\n  }\n  if (csaGameSetting.server.id === \"\") {\n    return new Error(\"IDが空です。\");\n  }\n  return;\n}\n\nexport type CSAGameSettingHistory = {\n  player: PlayerSetting;\n  serverHistory: CSAServerSetting[];\n  autoFlip: boolean;\n  enableComment: boolean;\n  enableAutoSave: boolean;\n  repeat: number;\n};\n\nexport function defaultCSAGameSettingHistory(): CSAGameSettingHistory {\n  return {\n    player: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    serverHistory: [],\n    autoFlip: true,\n    enableComment: true,\n    enableAutoSave: true,\n    repeat: 1,\n  };\n}\n\nexport function buildCSAGameSettingByHistory(\n  history: CSAGameSettingHistory,\n  index: number\n): CSAGameSetting {\n  return {\n    player: history.player,\n    server:\n      history.serverHistory?.length > index\n        ? history.serverHistory[index]\n        : defaultCSAServerSetting(),\n    autoFlip: history.autoFlip,\n    enableComment: history.enableComment,\n    enableAutoSave: history.enableAutoSave,\n    repeat: history.repeat,\n  };\n}\n\nexport const maxServerHistoryLenght = 10;\n\nexport function appendCSAGameSettingHistory(\n  history: CSAGameSettingHistory,\n  setting: CSAGameSetting\n): CSAGameSettingHistory {\n  const newServerHistory = [setting.server];\n  for (const server of history.serverHistory) {\n    if (\n      server.host !== setting.server.host ||\n      server.port !== setting.server.port ||\n      server.id !== setting.server.id ||\n      server.password !== setting.server.password\n    ) {\n      newServerHistory.push(server);\n    }\n    if (newServerHistory.length === maxServerHistoryLenght) {\n      break;\n    }\n  }\n  return {\n    player: setting.player,\n    serverHistory: newServerHistory,\n    autoFlip: setting.autoFlip,\n    enableComment: setting.enableComment,\n    enableAutoSave: setting.enableAutoSave,\n    repeat: setting.repeat,\n  };\n}\n\nexport type SecureCSAServerSetting = {\n  host: string;\n  port: number;\n  id: string;\n  encryptedPassword: string;\n};\n\nexport type SecureCSAGameSettingHistory = {\n  player: PlayerSetting;\n  serverHistory: SecureCSAServerSetting[];\n  autoFlip: boolean;\n  enableComment: boolean;\n  enableAutoSave: boolean;\n  repeat: number;\n};\n\nexport function defaultSecureCSAGameSettingHistory(): SecureCSAGameSettingHistory {\n  return {\n    player: {\n      name: \"人\",\n      uri: uri.ES_HUMAN,\n    },\n    serverHistory: [],\n    autoFlip: true,\n    enableComment: true,\n    enableAutoSave: true,\n    repeat: 1,\n  };\n}\n\nexport function encryptCSAGameSettingHistory(\n  history: CSAGameSettingHistory,\n  encryptor: (plainText: string) => string\n): SecureCSAGameSettingHistory {\n  const serverHistory = [];\n  for (const setting of history.serverHistory) {\n    serverHistory.push({\n      host: setting.host,\n      port: setting.port,\n      id: setting.id,\n      encryptedPassword: encryptor(setting.password),\n    });\n  }\n  return {\n    player: history.player,\n    serverHistory: serverHistory,\n    autoFlip: history.autoFlip,\n    enableComment: history.enableComment,\n    enableAutoSave: history.enableAutoSave,\n    repeat: history.repeat,\n  };\n}\n\nexport function decryptCSAGameSettingHistory(\n  history: SecureCSAGameSettingHistory,\n  decryptor: (encrypted: string) => string\n): CSAGameSettingHistory {\n  const serverHistory = [];\n  for (const setting of history.serverHistory) {\n    serverHistory.push({\n      host: setting.host,\n      port: setting.port,\n      id: setting.id,\n      password: decryptor(setting.encryptedPassword),\n    });\n  }\n  return {\n    player: history.player,\n    serverHistory: serverHistory,\n    autoFlip: history.autoFlip,\n    enableComment: history.enableComment,\n    enableAutoSave: history.enableAutoSave,\n    repeat: history.repeat,\n  };\n}\n","import api from \"@/ipc/api\";\nimport {\n  CSAGameResult,\n  CSAGameSummary,\n  CSAPlayerStates,\n  CSASpecialMove,\n  emptyCSAGameSummary,\n} from \"@/ipc/csa\";\nimport { PlayerBuilder } from \"@/players/builder\";\nimport { Player, SearchInfo } from \"@/players/player\";\nimport { CSAGameSetting, defaultCSAGameSetting } from \"@/settings/csa\";\nimport {\n  Color,\n  RecordFormatType,\n  parseCSAMove,\n  formatCSAMove,\n  SpecialMove,\n} from \"@/shogi\";\nimport { Clock } from \"./clock\";\nimport {\n  buildSearchComment,\n  CommentBehavior,\n  RecordManager,\n  SearchEngineType,\n} from \"./record\";\n\nexport enum CSAGameState {\n  OFFLINE,\n  WAITING_LOGIN,\n  READY,\n  GAME,\n}\n\nexport interface CSAGameHandlers {\n  onSaveRecord(): Promise<void>;\n  onGameNext(): void;\n  onGameEnd(): void;\n  onFlipBoard(flip: boolean): void;\n  onPieceBeat(): void;\n  onBeepShort(): void;\n  onBeepUnlimited(): void;\n  onStopBeep(): void;\n  onError(e: unknown): void;\n}\n\nexport class CSAGameManager {\n  private _state = CSAGameState.OFFLINE;\n  private _setting = defaultCSAGameSetting();\n  private sessionID = 0;\n  private repeat = 0;\n  private player?: Player;\n  private gameSummary = emptyCSAGameSummary();\n  private searchInfo?: SearchInfo;\n\n  constructor(\n    private recordManager: RecordManager,\n    private blackClock: Clock,\n    private whiteClock: Clock,\n    private playerBuilder: PlayerBuilder,\n    private handlers: CSAGameHandlers\n  ) {}\n\n  get state(): CSAGameState {\n    return this._state;\n  }\n\n  get setting(): CSAGameSetting {\n    return this._setting;\n  }\n\n  get isMyTurn(): boolean {\n    const color = this.recordManager.record.position.color;\n    return color === this.gameSummary.myColor;\n  }\n\n  login(setting: CSAGameSetting): Promise<void> {\n    if (this.sessionID) {\n      throw new Error(\"CSAGameManager#start: session already exists\");\n    }\n    this._setting = setting;\n    this.repeat = 0;\n    return this.relogin();\n  }\n\n  private async relogin(): Promise<void> {\n    this.repeat++;\n    this._state = CSAGameState.WAITING_LOGIN;\n    try {\n      this.player = await this.playerBuilder.build(\n        this._setting.player,\n        (info) => this.recordManager.updateEnemySearchInfo(info)\n      );\n      this.sessionID = await api.csaLogin(this._setting.server);\n      this._state = CSAGameState.READY;\n      csaGameManagers[this.sessionID] = this;\n      this.handlers.onGameNext();\n    } catch (e) {\n      this.close(true);\n      throw e;\n    }\n  }\n\n  stop(): void {\n    if (this.sessionID) {\n      api.csaStop(this.sessionID);\n      this.close(true);\n    }\n  }\n\n  logout(): void {\n    this.close(true);\n  }\n\n  private close(doNotRepeat?: boolean): void {\n    if (this._state === CSAGameState.OFFLINE) {\n      return;\n    }\n    if (this.sessionID) {\n      delete csaGameManagers[this.sessionID];\n      api.csaLogout(this.sessionID).catch((e) => {\n        this.handlers.onError(e);\n      });\n      this.sessionID = 0;\n    }\n    if (this.player) {\n      this.player.close().catch((e) => {\n        this.handlers.onError(e);\n      });\n      this.player = undefined;\n    }\n    this.blackClock.stop();\n    this.whiteClock.stop();\n    this._state = CSAGameState.OFFLINE;\n    if (doNotRepeat || this.repeat >= this.setting.repeat) {\n      this.handlers.onGameEnd();\n      return;\n    }\n    this.relogin().catch((e) => {\n      this.handlers.onError(e);\n    });\n  }\n\n  onGameSummary(gameSummary: CSAGameSummary): void {\n    this.gameSummary = gameSummary;\n    api.csaAgree(this.sessionID, this.gameSummary.id);\n  }\n\n  onReject(): void {\n    this.close();\n  }\n\n  onStart(playerStates: CSAPlayerStates): void {\n    this.recordManager.importRecord(\n      this.gameSummary.position,\n      RecordFormatType.CSA\n    );\n    this.recordManager.setGameStartMetadata({\n      gameTitle: this.gameSummary.id,\n      blackName: this.gameSummary.blackPlayerName,\n      whiteName: this.gameSummary.whitePlayerName,\n      timeLimit: {\n        timeSeconds:\n          (this.gameSummary.totalTime * this.gameSummary.timeUnitMs) / 1e3,\n        byoyomi: (this.gameSummary.byoyomi * this.gameSummary.timeUnitMs) / 1e3,\n        increment:\n          (this.gameSummary.increment * this.gameSummary.timeUnitMs) / 1e3,\n      },\n    });\n    if (this.setting.autoFlip && this.handlers.onFlipBoard) {\n      this.handlers.onFlipBoard(this.gameSummary.myColor === Color.WHITE);\n    }\n    this._state = CSAGameState.GAME;\n    this.next(playerStates);\n  }\n\n  onMove(data: string, playerStates: CSAPlayerStates) {\n    const isMyMove = this.isMyTurn;\n    const move = parseCSAMove(this.recordManager.record.position, data);\n    if (move instanceof Error) {\n      this.handlers.onError(`解釈できない指し手 [${data}]: ${move.message}`);\n      return;\n    }\n    const parsed = /^.*,T([0-9]+)$/.exec(data);\n    const elapsedMs = parsed\n      ? Number(parseInt(parsed[1])) * this.gameSummary.timeUnitMs\n      : 0;\n    this.recordManager.appendMove({\n      move,\n      moveOption: {\n        ignoreValidation: true,\n      },\n      elapsedMs,\n    });\n    if (isMyMove && this.searchInfo) {\n      this.recordManager.updateSearchInfo(\n        SearchEngineType.PLAYER,\n        this.searchInfo\n      );\n    }\n    if (isMyMove && this.searchInfo && this.setting.enableComment) {\n      const comment = buildSearchComment(\n        SearchEngineType.PLAYER,\n        this.searchInfo\n      );\n      this.recordManager.appendComment(comment, CommentBehavior.APPEND);\n    }\n    this.handlers.onPieceBeat();\n    this.next(playerStates);\n  }\n\n  async onGameResult(\n    move: CSASpecialMove,\n    gameResult: CSAGameResult\n  ): Promise<void> {\n    if (move === CSASpecialMove.RESIGN) {\n      this.recordManager.appendMove({\n        move: SpecialMove.RESIGN,\n      });\n    } else if (move === CSASpecialMove.JISHOGI) {\n      this.recordManager.appendMove({\n        move: SpecialMove.ENTERING_OF_KING,\n      });\n    } else if (move === CSASpecialMove.ILLEGAL_MOVE) {\n      const color = this.recordManager.record.position.color;\n      if (gameResult === CSAGameResult.WIN) {\n        this.recordManager.appendMove({\n          move:\n            color === this.gameSummary.myColor\n              ? SpecialMove.FOUL_WIN\n              : SpecialMove.FOUL_LOSE,\n        });\n      } else if (gameResult === CSAGameResult.LOSE) {\n        this.recordManager.appendMove({\n          move:\n            color === this.gameSummary.myColor\n              ? SpecialMove.FOUL_LOSE\n              : SpecialMove.FOUL_WIN,\n        });\n      }\n    } else if (move === CSASpecialMove.TIME_UP) {\n      this.recordManager.appendMove({\n        move: SpecialMove.TIMEOUT,\n      });\n    } else if (gameResult === CSAGameResult.DRAW) {\n      this.recordManager.appendMove({\n        move: SpecialMove.DRAW,\n      });\n    } else if (\n      gameResult === CSAGameResult.CHUDAN ||\n      gameResult === CSAGameResult.CENSORED\n    ) {\n      this.recordManager.appendMove({\n        move: SpecialMove.INTERRUPT,\n      });\n    }\n    if (this.setting.enableAutoSave) {\n      await this.handlers.onSaveRecord();\n    }\n    this.close();\n  }\n\n  async onClose(): Promise<void> {\n    this.close(true);\n  }\n\n  private next(playerStates: CSAPlayerStates): void {\n    this.blackClock.stop();\n    this.whiteClock.stop();\n    const clockSetting = {\n      byoyomi: (this.gameSummary.byoyomi * this.gameSummary.timeUnitMs) / 1e3,\n      onBeepShort: () => this.handlers.onBeepShort(),\n      onBeepUnlimited: () => this.handlers.onBeepUnlimited(),\n      onStopBeep: () => this.handlers.onStopBeep(),\n    };\n    this.blackClock.setup({\n      ...clockSetting,\n      timeMs: playerStates.black.time * this.gameSummary.timeUnitMs,\n    });\n    this.whiteClock.setup({\n      ...clockSetting,\n      timeMs: playerStates.white.time * this.gameSummary.timeUnitMs,\n    });\n    const color = this.recordManager.record.position.color;\n    if (color === Color.BLACK) {\n      this.blackClock.start();\n    } else {\n      this.whiteClock.start();\n    }\n    if (!this.player) {\n      this.handlers.onError(\n        \"想定されない問題が発生しました。CSA サーバーからデータを受信しましたが、プレイヤーが初期化されていません。\"\n      );\n      return;\n    }\n    const timeLimit = {\n      timeSeconds:\n        (this.gameSummary.totalTime * this.gameSummary.timeUnitMs) / 1e3,\n      byoyomi: (this.gameSummary.byoyomi * this.gameSummary.timeUnitMs) / 1e3,\n      increment:\n        (this.gameSummary.increment * this.gameSummary.timeUnitMs) / 1e3,\n    };\n    if (color === this.gameSummary.myColor) {\n      this.player\n        .startSearch(\n          this.recordManager.record,\n          timeLimit,\n          playerStates.black.time * this.gameSummary.timeUnitMs,\n          playerStates.white.time * this.gameSummary.timeUnitMs,\n          {\n            onMove: (move, info) => {\n              this.searchInfo = info;\n              api.csaMove(this.sessionID, formatCSAMove(move));\n            },\n            onResign: () => {\n              api.csaResign(this.sessionID);\n            },\n            onWin: () => {\n              api.csaWin(this.sessionID);\n            },\n            onError: (e: unknown) => {\n              this.handlers.onError(e);\n            },\n          }\n        )\n        .catch((e) => {\n          this.handlers.onError(\n            new Error(\n              \"CSAGameManager#next: プレイヤーにコマンドを送信できませんでした: \" +\n                e\n            )\n          );\n        });\n    } else {\n      this.player\n        .startPonder(\n          this.recordManager.record,\n          timeLimit,\n          this.blackClock.timeMs,\n          this.whiteClock.timeMs\n        )\n        .catch((e) => {\n          this.handlers.onError(\n            new Error(\n              \"CSAGameManager#next: プレイヤーにPonderコマンドを送信できませんでした: \" +\n                e\n            )\n          );\n        });\n    }\n  }\n}\n\nconst csaGameManagers: { [sessionID: number]: CSAGameManager } = {};\n\nexport function onCSAGameSummary(\n  sessionID: number,\n  gameSummary: CSAGameSummary\n): void {\n  const manager = csaGameManagers[sessionID];\n  if (manager) {\n    manager.onGameSummary(gameSummary);\n  }\n}\n\nexport function onCSAReject(sessionID: number): void {\n  const manager = csaGameManagers[sessionID];\n  if (manager) {\n    manager.onReject();\n  }\n}\n\nexport function onCSAStart(\n  sessionID: number,\n  playerStates: CSAPlayerStates\n): void {\n  const manager = csaGameManagers[sessionID];\n  if (manager) {\n    manager.onStart(playerStates);\n  }\n}\n\nexport function onCSAMove(\n  sessionID: number,\n  move: string,\n  playerStates: CSAPlayerStates\n): void {\n  const manager = csaGameManagers[sessionID];\n  if (manager) {\n    manager.onMove(move, playerStates);\n  }\n}\n\nexport function onCSAGameResult(\n  sessionID: number,\n  specialMove: CSASpecialMove,\n  gameResult: CSAGameResult\n) {\n  const manager = csaGameManagers[sessionID];\n  if (manager) {\n    manager.onGameResult(specialMove, gameResult);\n  }\n}\n\nexport function onCSAClose(sessionID: number) {\n  const manager = csaGameManagers[sessionID];\n  if (manager) {\n    manager.onClose();\n  }\n}\n","type ClockSetting = {\n  timeMs?: number;\n  byoyomi?: number;\n  increment?: number;\n  onBeepShort?: () => void;\n  onBeepUnlimited?: () => void;\n  onStopBeep?: () => void;\n  onTimeout?: () => void;\n};\n\nexport class Clock {\n  private setting: ClockSetting = {\n    timeMs: 0,\n    byoyomi: 0,\n    increment: 0,\n  };\n  private _timeMs = 0;\n  private _byoyomi = 0;\n  private _elapsedMs = 0;\n  private timerHandle = 0;\n  private timerStart = 0;\n  private lastTimeMs = 0;\n\n  setup(setting: ClockSetting): void {\n    this.setting = setting;\n    this._timeMs = setting.timeMs || 0;\n    this._byoyomi = setting.byoyomi || 0;\n    this._elapsedMs = 0;\n  }\n\n  get time(): number {\n    return Math.ceil(this._timeMs / 1e3);\n  }\n\n  get timeMs(): number {\n    return this._timeMs;\n  }\n\n  get byoyomi(): number {\n    return this._byoyomi;\n  }\n\n  get elapsedMs(): number {\n    return this._elapsedMs;\n  }\n\n  start(): void {\n    this.clearTimer();\n    this.timerStart = Date.now();\n    this.lastTimeMs = this._timeMs;\n    this._byoyomi = this.setting.byoyomi || 0;\n    this._elapsedMs = 0;\n    this.timerHandle = window.setInterval(() => {\n      const lastTimeMs = this.timeMs;\n      const lastByoyomi = this.byoyomi;\n      this._elapsedMs = Date.now() - this.timerStart;\n      const timeMs = this.lastTimeMs - this._elapsedMs;\n      if (timeMs >= 0) {\n        this._timeMs = timeMs;\n      } else {\n        this._timeMs = 0;\n        this._byoyomi = Math.max(\n          Math.ceil((this.setting.byoyomi || 0) + timeMs / 1e3),\n          0\n        );\n      }\n      if (this.timeMs === 0 && this.byoyomi === 0) {\n        this.timeout();\n        return;\n      }\n      this.fireBeep(lastTimeMs, lastByoyomi);\n    }, 100);\n  }\n\n  private fireBeep(lastTimeMs: number, lastByoyomi: number): void {\n    // 秒に切り上げる。\n    let time = Math.ceil(this.timeMs / 1e3);\n    let lastTime = Math.ceil(lastTimeMs / 1e3);\n    // 持ち時間があって秒読みが付いていれば何もしない。\n    if (time !== 0 && this.byoyomi !== 0) {\n      return;\n    }\n    // 持ち時間がなくなった瞬間に短いビープを鳴らす。\n    if (time === 0 && lastTime !== 0) {\n      if (this.setting.onBeepShort) {\n        this.setting.onBeepShort();\n      }\n      return;\n    }\n    // 秒読みがある場合はその値を使う。\n    if (this.byoyomi !== 0) {\n      time = this.byoyomi;\n      lastTime = lastByoyomi;\n    }\n    // 前回から秒が変わっていなければ何もしない。\n    if (time === lastTime) {\n      return;\n    }\n    // 残り 5 秒で長音, 10 秒以下, 20, 30, 60 秒で単音を鳴らす。\n    if (time <= 5) {\n      if (this.setting.onBeepUnlimited) {\n        this.setting.onBeepUnlimited();\n      }\n    } else if (time <= 10 || time === 20 || time === 30 || time === 60) {\n      if (this.setting.onBeepShort) {\n        this.setting.onBeepShort();\n      }\n    }\n  }\n\n  pause(): void {\n    this.clearTimer();\n  }\n\n  stop(): void {\n    this.clearTimer();\n    this.incrementTime();\n  }\n\n  private timeout(): void {\n    this.clearTimer();\n    if (this.setting.onTimeout) {\n      this.setting.onTimeout();\n    }\n  }\n\n  private clearTimer(): void {\n    if (this.timerHandle) {\n      window.clearInterval(this.timerHandle);\n      this.timerHandle = 0;\n    }\n    if (this.setting.onStopBeep) {\n      this.setting.onStopBeep();\n    }\n  }\n\n  private incrementTime(): void {\n    this._timeMs += (this.setting.increment || 0) * 1e3;\n  }\n}\n","import { TimeLimitSetting } from \"@/settings/game\";\nimport { ImmutableRecord, Move } from \"@/shogi\";\nimport { Player, SearchHandler } from \"./player\";\n\nexport class HumanPlayer implements Player {\n  private searchHandler?: SearchHandler;\n\n  isEngine(): boolean {\n    return false;\n  }\n\n  async startSearch(\n    record: ImmutableRecord,\n    timeLimit: TimeLimitSetting,\n    blackTimeMs: number,\n    whiteTimeMs: number,\n    handler: SearchHandler\n  ): Promise<void> {\n    this.searchHandler = handler;\n  }\n\n  async startPonder(): Promise<void> {\n    // do nothing\n  }\n\n  async stop(): Promise<void> {\n    // do nothing\n  }\n\n  async gameover(): Promise<void> {\n    // do nothing\n  }\n\n  async close(): Promise<void> {\n    this.searchHandler = undefined;\n  }\n\n  doMove(move: Move) {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (searchHandler) {\n      searchHandler.onMove(move);\n    }\n  }\n\n  resign() {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (searchHandler) {\n      searchHandler.onResign();\n    }\n  }\n\n  win() {\n    const searchHandler = this.searchHandler;\n    this.searchHandler = undefined;\n    if (searchHandler) {\n      searchHandler.onWin();\n    }\n  }\n}\n\nexport const humanPlayer = new HumanPlayer();\n","import { PlayerSetting } from \"@/settings/player\";\nimport { humanPlayer } from \"./human\";\nimport { Player, SearchInfo } from \"./player\";\nimport { USIPlayer } from \"./usi\";\nimport * as uri from \"@/uri\";\n\nexport interface PlayerBuilder {\n  build(\n    playerSetting: PlayerSetting,\n    onSearchInfo?: (info: SearchInfo) => void\n  ): Promise<Player>;\n}\n\nexport const defaultPlayerBuilder: PlayerBuilder = {\n  async build(\n    playerSetting: PlayerSetting,\n    onSearchInfo?: (info: SearchInfo) => void\n  ): Promise<Player> {\n    if (playerSetting.uri === uri.ES_HUMAN) {\n      return humanPlayer;\n    } else if (uri.isUSIEngine(playerSetting.uri) && playerSetting.usi) {\n      const player = new USIPlayer(playerSetting.usi, onSearchInfo);\n      await player.launch();\n      return player;\n    }\n    throw new Error(\n      \"defaultPlayerBuilder#build: 予期せぬプレイヤーURIです: \" +\n        playerSetting.uri\n    );\n  },\n};\n","import api from \"@/ipc/api\";\nimport {\n  Color,\n  exportCSA,\n  ImmutableRecord,\n  InitialPositionType,\n  Move,\n  PositionChange,\n  Record,\n  SpecialMove,\n  specialMoveToDisplayString,\n  exportKakinoki,\n  RecordMetadataKey,\n} from \"@/shogi\";\nimport { reactive, UnwrapNestedRefs } from \"vue\";\nimport { GameSetting } from \"@/settings/game\";\nimport {\n  AppSetting,\n  AppSettingUpdate,\n  ClockSoundTarget,\n  defaultAppSetting,\n  validateAppSetting,\n} from \"@/settings/app\";\nimport {\n  AudioEventHandler,\n  beepShort,\n  beepUnlimited,\n  playPieceBeat,\n} from \"@/audio\";\nimport { RecordManager, SearchEngineType } from \"./record\";\nimport { GameManager, GameResults } from \"./game\";\nimport { defaultRecordFileName } from \"@/helpers/path\";\nimport { ResearchSetting } from \"@/settings/research\";\nimport { BussyStore } from \"./bussy\";\nimport { USIPlayerMonitor, USIMonitor } from \"./usi\";\nimport { AppState } from \"./state\";\nimport { Message, MessageStore } from \"./message\";\nimport { ErrorStore } from \"./error\";\nimport * as uri from \"@/uri\";\nimport { Confirmation } from \"./confirm\";\nimport { AnalysisManager } from \"./analysis\";\nimport { AnalysisSetting } from \"@/settings/analysis\";\nimport { USIPlayer } from \"@/players/usi\";\nimport { LogLevel } from \"@/ipc/log\";\nimport { formatPercentage, toString } from \"@/helpers/string\";\nimport { CSAGameManager, CSAGameState } from \"./csa\";\nimport { Clock } from \"./clock\";\nimport { CSAGameSetting, appendCSAGameSettingHistory } from \"@/settings/csa\";\nimport { defaultPlayerBuilder } from \"@/players/builder\";\nimport { USIInfoCommand, USIInfoSender } from \"@/ipc/usi\";\n\nexport class Store {\n  private _bussy = new BussyStore();\n  private _message = new MessageStore();\n  private _error = new ErrorStore();\n  private recordManager = new RecordManager();\n  private _appSetting = defaultAppSetting();\n  private _appState = AppState.NORMAL;\n  private lastAppState?: AppState;\n  private _isAppSettingDialogVisible = false;\n  private _confirmation?: Confirmation;\n  private usiMonitor = new USIMonitor();\n  private blackClock = new Clock();\n  private whiteClock = new Clock();\n  private gameManager = new GameManager(\n    this.recordManager,\n    this.blackClock,\n    this.whiteClock,\n    defaultPlayerBuilder,\n    this\n  );\n  private csaGameManager = new CSAGameManager(\n    this.recordManager,\n    this.blackClock,\n    this.whiteClock,\n    defaultPlayerBuilder,\n    this\n  );\n  private researcher?: USIPlayer;\n  private analysisManager?: AnalysisManager;\n  private unlimitedBeepHandler?: AudioEventHandler;\n\n  constructor() {\n    this.recordManager.on(\"changePosition\", () => {\n      this.onUpdatePosition();\n    });\n  }\n\n  get isBussy(): boolean {\n    return this._bussy.isBussy;\n  }\n\n  retainBussyState(): void {\n    return this._bussy.retain();\n  }\n\n  releaseBussyState(): void {\n    return this._bussy.release();\n  }\n\n  get message(): Message {\n    return this._message.message;\n  }\n\n  get hasMessage(): boolean {\n    return this._message.hasMessage;\n  }\n\n  enqueueMessage(message: Message): void {\n    this._message.enqueue(message);\n  }\n\n  dequeueMessage(): void {\n    this._message.dequeue();\n  }\n\n  get errors(): Error[] {\n    return this._error.errors;\n  }\n\n  get hasError(): boolean {\n    return this._error.hasError;\n  }\n\n  pushError(e: unknown): void {\n    api.log(LogLevel.ERROR, toString(e));\n    this._error.push(e);\n  }\n\n  clearErrors(): void {\n    this._error.clear();\n  }\n\n  get record(): ImmutableRecord {\n    return this.recordManager.record;\n  }\n\n  get recordFilePath(): string | undefined {\n    return this.recordManager.recordFilePath;\n  }\n\n  updateStandardRecordMetadata(update: {\n    key: RecordMetadataKey;\n    value: string;\n  }): void {\n    this.recordManager.updateStandardMetadata(update);\n  }\n\n  get appSetting(): AppSetting {\n    return this._appSetting;\n  }\n\n  async updateAppSetting(update: AppSettingUpdate): Promise<void> {\n    const newAppSetting = {\n      ...this.appSetting,\n      ...update,\n    };\n    const error = validateAppSetting(newAppSetting);\n    if (error) {\n      throw error;\n    }\n    await api.saveAppSetting(newAppSetting);\n    this._appSetting = newAppSetting;\n  }\n\n  flipBoard(): void {\n    this._appSetting.boardFlipping = !this.appSetting.boardFlipping;\n    api.saveAppSetting(this.appSetting);\n  }\n\n  get appState(): AppState {\n    return this._appState;\n  }\n\n  get confirmation(): string | undefined {\n    return this._confirmation?.message;\n  }\n\n  showConfirmation(confirmation: Confirmation): void {\n    if (this.appState == AppState.TEMPORARY) {\n      api.log(\n        LogLevel.ERROR,\n        \"Store#showConfirmation: 確認ダイアログを多重に表示しようとしました。\" +\n          ` lastAppState=${this.lastAppState}` +\n          (this._confirmation\n            ? ` currentMessage=${this._confirmation.message}`\n            : \"\") +\n          ` newMessage=${confirmation.message}`\n      );\n      if (confirmation.onCancel) {\n        confirmation.onCancel();\n      }\n      return;\n    }\n    this._confirmation = confirmation;\n    this.lastAppState = this.appState;\n    this._appState = AppState.TEMPORARY;\n  }\n\n  confirmationOk(): void {\n    const onOk = this._confirmation?.onOk;\n    this._confirmation = undefined;\n    if (this.lastAppState) {\n      this._appState = this.lastAppState;\n      this.lastAppState = undefined;\n    }\n    if (onOk) {\n      onOk();\n    }\n  }\n\n  confirmationCancel(): void {\n    const onCancel = this._confirmation?.onCancel;\n    this._confirmation = undefined;\n    if (this.lastAppState) {\n      this._appState = this.lastAppState;\n      this.lastAppState = undefined;\n    }\n    if (onCancel) {\n      onCancel();\n    }\n  }\n\n  showPasteDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.PASTE_DIALOG;\n    }\n  }\n\n  showGameDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.GAME_DIALOG;\n    }\n  }\n\n  showCSAGameDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.CSA_GAME_DIALOG;\n    }\n  }\n\n  showResearchDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.RESEARCH_DIALOG;\n    }\n  }\n\n  showAnalysisDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.ANALYSIS_DIALOG;\n    }\n  }\n\n  showUsiEngineManagementDialog(): void {\n    if (this.appState === AppState.NORMAL) {\n      this._appState = AppState.USI_ENGINE_SETTING_DIALOG;\n    }\n  }\n\n  closeModalDialog(): void {\n    if (\n      this.appState === AppState.PASTE_DIALOG ||\n      this.appState === AppState.GAME_DIALOG ||\n      this.appState === AppState.CSA_GAME_DIALOG ||\n      this.appState === AppState.RESEARCH_DIALOG ||\n      this.appState === AppState.ANALYSIS_DIALOG ||\n      this.appState === AppState.USI_ENGINE_SETTING_DIALOG\n    ) {\n      this._appState = AppState.NORMAL;\n    }\n  }\n\n  get isAppSettingDialogVisible(): boolean {\n    return this._isAppSettingDialogVisible;\n  }\n\n  showAppSettingDialog(): void {\n    this._isAppSettingDialogVisible = true;\n  }\n\n  closeAppSettingDialog(): void {\n    this._isAppSettingDialogVisible = false;\n  }\n\n  get usiBlackPlayerMonitor(): USIPlayerMonitor | undefined {\n    return this.usiMonitor.blackPlayer;\n  }\n\n  get usiWhitePlayerMonitor(): USIPlayerMonitor | undefined {\n    return this.usiMonitor.whitePlayer;\n  }\n\n  get usiResearcherMonitor(): USIPlayerMonitor | undefined {\n    return this.usiMonitor.researcher;\n  }\n\n  updateUSIInfo(\n    sessionID: number,\n    usi: string,\n    sender: USIInfoSender,\n    name: string,\n    info: USIInfoCommand\n  ): void {\n    if (this.recordManager.record.usi !== usi) {\n      return;\n    }\n    this.usiMonitor.update(\n      sessionID,\n      this.recordManager.record.position,\n      sender,\n      name,\n      info\n    );\n  }\n\n  updateUSIPonderInfo(\n    sessionID: number,\n    usi: string,\n    sender: USIInfoSender,\n    name: string,\n    info: USIInfoCommand\n  ): void {\n    const record = Record.newByUSI(usi);\n    if (record instanceof Error) {\n      api.log(LogLevel.ERROR, `invalid USI: ${usi} (updateUSIPonderInfo)`);\n      return;\n    }\n    const ponderMove = record.current.move;\n    if (!(ponderMove instanceof Move)) {\n      return;\n    }\n    this.usiMonitor.update(\n      sessionID,\n      record.position,\n      sender,\n      name,\n      info,\n      ponderMove\n    );\n  }\n\n  get blackTime(): number {\n    return this.blackClock.time;\n  }\n\n  get blackByoyomi(): number {\n    return this.blackClock.byoyomi;\n  }\n\n  get whiteTime(): number {\n    return this.whiteClock.time;\n  }\n\n  get whiteByoyomi(): number {\n    return this.whiteClock.byoyomi;\n  }\n\n  startGame(setting: GameSetting): void {\n    if (this.appState !== AppState.GAME_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    api\n      .saveGameSetting(setting)\n      .then(() => {\n        this.initializeDisplaySettingForGame(setting);\n        return this.gameManager.startGame(setting);\n      })\n      .then(() => (this._appState = AppState.GAME))\n      .catch((e) => {\n        this.pushError(\"対局の初期化中にエラーが出ました: \" + e);\n      })\n      .finally(() => {\n        this.releaseBussyState();\n      });\n  }\n\n  get csaGameState(): CSAGameState {\n    return this.csaGameManager.state;\n  }\n\n  loginCSAGame(setting: CSAGameSetting, opt: { saveHistory: boolean }): void {\n    if (this.appState !== AppState.CSA_GAME_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    Promise.resolve()\n      .then(async () => {\n        if (opt.saveHistory) {\n          const latestHistory = await api.loadCSAGameSettingHistory();\n          const history = appendCSAGameSettingHistory(latestHistory, setting);\n          await api.saveCSAGameSettingHistory(history);\n        }\n      })\n      .then(() => this.csaGameManager.login(setting))\n      .then(() => (this._appState = AppState.CSA_GAME))\n      .catch((e) => {\n        this.pushError(\"対局の初期化中にエラーが出ました: \" + e);\n      })\n      .finally(() => {\n        this.releaseBussyState();\n      });\n  }\n\n  logoutCSAGame(): void {\n    if (this.appState !== AppState.CSA_GAME) {\n      return;\n    }\n    if (this.csaGameManager.state === CSAGameState.GAME) {\n      this.pushError(\"ログアウトするには対局を終了してください。\");\n      return;\n    }\n    this.csaGameManager.logout();\n    this._appState = AppState.NORMAL;\n  }\n\n  private initializeDisplaySettingForGame(setting: GameSetting): void {\n    if (setting.humanIsFront) {\n      let flip = this.appSetting.boardFlipping;\n      if (\n        setting.black.uri === uri.ES_HUMAN &&\n        setting.white.uri !== uri.ES_HUMAN\n      ) {\n        flip = false;\n      } else if (\n        setting.black.uri !== uri.ES_HUMAN &&\n        setting.white.uri === uri.ES_HUMAN\n      ) {\n        flip = true;\n      }\n      if (flip !== this.appSetting.boardFlipping) {\n        this.flipBoard();\n      }\n    }\n  }\n\n  stopGame(): void {\n    if (this.appState === AppState.GAME) {\n      this.gameManager.endGame(SpecialMove.INTERRUPT);\n    } else if (this.appState === AppState.CSA_GAME) {\n      this.showConfirmation({\n        message: \"中断を要求すると負けになる可能性があります。よろしいですか？\",\n        onOk: () => {\n          this.csaGameManager.stop();\n        },\n      });\n    }\n  }\n\n  onGameNext(): void {\n    this.usiMonitor.clear();\n  }\n\n  onGameEnd(gameResults?: GameResults, specialMove?: SpecialMove): void {\n    if (\n      this.appState !== AppState.GAME &&\n      this.appState !== AppState.CSA_GAME\n    ) {\n      return;\n    }\n    if (gameResults && gameResults.total >= 2) {\n      const validTotal = gameResults.total - gameResults.invalid;\n      this.enqueueMessage({\n        text: \"連続対局終了\",\n        attachments: [\n          {\n            type: \"list\",\n            items: [\n              {\n                text: gameResults.player1.name,\n                children: [\n                  `勝ち数: ${gameResults.player1.win}`,\n                  `勝率: ${formatPercentage(\n                    gameResults.player1.win,\n                    validTotal,\n                    1\n                  )}`,\n                ],\n              },\n              {\n                text: gameResults.player2.name,\n                children: [\n                  `勝ち数: ${gameResults.player2.win}`,\n                  `勝率: ${formatPercentage(\n                    gameResults.player2.win,\n                    validTotal,\n                    1\n                  )}`,\n                ],\n              },\n              { text: `引き分け: ${gameResults.draw}` },\n              { text: `有効対局数: ${validTotal}` },\n              { text: `無効対局数: ${gameResults.invalid}` },\n            ],\n          },\n        ],\n      });\n    } else if (specialMove) {\n      this.enqueueMessage({\n        text: `対局終了（${specialMoveToDisplayString(specialMove)})`,\n      });\n    }\n    this._appState = AppState.NORMAL;\n  }\n\n  onFlipBoard(flip: boolean): void {\n    if (this._appSetting.boardFlipping !== flip) {\n      this.flipBoard();\n    }\n  }\n\n  onSaveRecord(): Promise<void> {\n    const fname = defaultRecordFileName(this.recordManager.record.metadata);\n    const path = `${this.appSetting.autoSaveDirectory}/${fname}`;\n    return this.saveRecordByPath(path);\n  }\n\n  onPieceBeat(): void {\n    playPieceBeat(this.appSetting.pieceVolume);\n  }\n\n  onBeepShort(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    beepShort({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  onBeepUnlimited(): void {\n    if (\n      this.appSetting.clockSoundTarget === ClockSoundTarget.ONLY_USER &&\n      !this.isMovableByUser\n    ) {\n      return;\n    }\n    if (this.unlimitedBeepHandler) {\n      return;\n    }\n    this.unlimitedBeepHandler = beepUnlimited({\n      frequency: this.appSetting.clockPitch,\n      volume: this.appSetting.clockVolume,\n    });\n  }\n\n  onStopBeep(): void {\n    if (this.unlimitedBeepHandler) {\n      this.unlimitedBeepHandler.stop();\n      this.unlimitedBeepHandler = undefined;\n    }\n  }\n\n  doMove(move: Move): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    if (!this.recordManager.appendMove({ move })) {\n      return;\n    }\n    playPieceBeat(this.appSetting.pieceVolume);\n  }\n\n  onFinish(): void {\n    if (this.appState === AppState.ANALYSIS) {\n      this._message.enqueue({ text: \"棋譜解析が終了しました。\" });\n      this._appState = AppState.NORMAL;\n    }\n  }\n\n  onError(e: unknown): void {\n    this.pushError(e);\n  }\n\n  startResearch(researchSetting: ResearchSetting): void {\n    if (this.appState !== AppState.RESEARCH_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    if (!researchSetting.usi) {\n      this.pushError(new Error(\"エンジンが設定されていません。\"));\n      return;\n    }\n    const usiSetting = researchSetting.usi;\n    api\n      .saveResearchSetting(researchSetting)\n      .then(() => {\n        this.researcher = new USIPlayer(usiSetting, (info) => {\n          this.recordManager.updateSearchInfo(\n            SearchEngineType.RESEARCHER,\n            info\n          );\n        });\n        return this.researcher.launch();\n      })\n      .then(() => {\n        this._appState = AppState.RESEARCH;\n        this.onUpdatePosition();\n      })\n      .catch((e) => {\n        this.researcher = undefined;\n        this.pushError(\"検討の初期化中にエラーが出ました: \" + e);\n      })\n      .finally(() => {\n        this.releaseBussyState();\n      });\n  }\n\n  stopResearch(): void {\n    if (this.appState !== AppState.RESEARCH) {\n      return;\n    }\n    if (this.researcher) {\n      this.researcher.close();\n      this.researcher = undefined;\n    }\n    this._appState = AppState.NORMAL;\n  }\n\n  startAnalysis(analysisSetting: AnalysisSetting): void {\n    if (this.appState !== AppState.ANALYSIS_DIALOG) {\n      return;\n    }\n    this.retainBussyState();\n    api\n      .saveAnalysisSetting(analysisSetting)\n      .then(() => {\n        this.analysisManager = new AnalysisManager(\n          this.recordManager,\n          analysisSetting,\n          this.appSetting,\n          this\n        );\n        return this.analysisManager.start();\n      })\n      .then(() => {\n        this._appState = AppState.ANALYSIS;\n      })\n      .catch((e) => {\n        this.analysisManager = undefined;\n        this.pushError(\"検討の初期化中にエラーが出ました: \" + e);\n      })\n      .finally(() => {\n        this.releaseBussyState();\n      });\n  }\n\n  stopAnalysis(): void {\n    if (this.appState !== AppState.ANALYSIS) {\n      return;\n    }\n    if (this.analysisManager) {\n      this.analysisManager.close();\n      this.analysisManager = undefined;\n    }\n    this._appState = AppState.NORMAL;\n  }\n\n  onUpdatePosition(): void {\n    if (this.researcher) {\n      this.researcher.startResearch(this.recordManager.record);\n    }\n  }\n\n  resetRecord(): void {\n    if (this.appState != AppState.NORMAL) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の棋譜は削除されます。よろしいですか？\",\n      onOk: () => {\n        this.recordManager.reset();\n      },\n    });\n  }\n\n  updateRecordComment(comment: string): void {\n    this.recordManager.updateComment(comment);\n  }\n\n  insertSpecialMove(specialMove: SpecialMove): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    this.recordManager.appendMove({ move: specialMove });\n  }\n\n  startPositionEditing(): void {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の棋譜は削除されます。よろしいですか？\",\n      onOk: () => {\n        this._appState = AppState.POSITION_EDITING;\n        this.recordManager.resetByCurrentPosition();\n      },\n    });\n  }\n\n  endPositionEditing(): void {\n    if (this.appState === AppState.POSITION_EDITING) {\n      this._appState = AppState.NORMAL;\n    }\n  }\n\n  initializePosition(initialPositionType: InitialPositionType): void {\n    if (this.appState != AppState.POSITION_EDITING) {\n      return;\n    }\n    this.showConfirmation({\n      message: \"現在の局面は破棄されます。よろしいですか？\",\n      onOk: () => {\n        this.recordManager.reset(initialPositionType);\n      },\n    });\n  }\n\n  changeTurn(): void {\n    if (this.appState == AppState.POSITION_EDITING) {\n      this.recordManager.swapNextTurn();\n    }\n  }\n\n  editPosition(change: PositionChange): void {\n    if (this.appState === AppState.POSITION_EDITING) {\n      this.recordManager.changePosition(change);\n    }\n  }\n\n  changeMoveNumber(number: number): void {\n    if (\n      this.appState === AppState.NORMAL ||\n      this.appState === AppState.RESEARCH\n    ) {\n      this.recordManager.changeMoveNumber(number);\n    }\n  }\n\n  changeBranch(index: number): void {\n    if (\n      this.appState === AppState.NORMAL ||\n      this.appState === AppState.RESEARCH\n    ) {\n      this.recordManager.changeBranch(index);\n    }\n  }\n\n  removeCurrentMove(): void {\n    if (\n      this.appState !== AppState.NORMAL &&\n      this.appState !== AppState.RESEARCH\n    ) {\n      return;\n    }\n    if (this.recordManager.record.current.isLastMove) {\n      this.recordManager.removeCurrentMove();\n      return;\n    }\n    this.showConfirmation({\n      message: `${this.recordManager.record.current.number}手目以降を削除します。よろしいですか？`,\n      onOk: () => {\n        this.recordManager.removeCurrentMove();\n      },\n    });\n  }\n\n  copyRecordKIF(): void {\n    const str = exportKakinoki(this.recordManager.record, {\n      returnCode: this.appSetting.returnCode,\n    });\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordCSA(): void {\n    const str = exportCSA(this.recordManager.record, {\n      returnCode: this.appSetting.returnCode,\n    });\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordUSIBefore(): void {\n    const str = this.recordManager.record.usi;\n    navigator.clipboard.writeText(str);\n  }\n\n  copyRecordUSIAll(): void {\n    const str = this.recordManager.record.usiAll;\n    navigator.clipboard.writeText(str);\n  }\n\n  copyBoardSFEN(): void {\n    const str = this.recordManager.record.sfen;\n    navigator.clipboard.writeText(str);\n  }\n\n  pasteRecord(data: string): void {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    const error = this.recordManager.importRecord(data);\n    if (error) {\n      this.pushError(error);\n      return;\n    }\n  }\n\n  openRecord(path?: string): void {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    this.retainBussyState();\n    Promise.resolve()\n      .then(() => {\n        return path || api.showOpenRecordDialog();\n      })\n      .then((path) => {\n        if (!path) {\n          return;\n        }\n        return api.openRecord(path as string).then((data) => {\n          const e = this.recordManager.importRecordFromBuffer(\n            data as Buffer,\n            path as string\n          );\n          return e && Promise.reject(e);\n        });\n      })\n      .catch((e) => {\n        this.pushError(\"棋譜の読み込み中にエラーが出ました: \" + e);\n      })\n      .finally(() => {\n        this.releaseBussyState();\n      });\n  }\n\n  saveRecord(options?: { overwrite: boolean }): void {\n    if (this.appState !== AppState.NORMAL) {\n      return;\n    }\n    this.retainBussyState();\n    Promise.resolve()\n      .then(() => {\n        const path = this.recordManager.recordFilePath;\n        if (options?.overwrite && path) {\n          return path;\n        }\n        const defaultPath = defaultRecordFileName(\n          this.recordManager.record.metadata\n        );\n        return api.showSaveRecordDialog(defaultPath);\n      })\n      .then((path) => {\n        if (!path) {\n          return;\n        }\n        return this.saveRecordByPath(path);\n      })\n      .catch((e) => {\n        this.pushError(e);\n      })\n      .finally(() => {\n        this.releaseBussyState();\n      });\n  }\n\n  private async saveRecordByPath(path: string): Promise<void> {\n    const dataOrError = this.recordManager.exportRecordAsBuffer(path, {\n      returnCode: this.appSetting.returnCode,\n    });\n    if (dataOrError instanceof Error) {\n      throw dataOrError;\n    }\n    this.retainBussyState();\n    try {\n      await api.saveRecord(path, dataOrError);\n    } catch (e) {\n      throw new Error(`棋譜の保存に失敗しました: ${e}`);\n    } finally {\n      this.releaseBussyState();\n    }\n  }\n\n  get isMovableByUser() {\n    switch (this.appState) {\n      case AppState.NORMAL:\n      case AppState.RESEARCH:\n        return true;\n      case AppState.GAME:\n        return (\n          (this.recordManager.record.position.color === Color.BLACK\n            ? this.gameManager.setting.black.uri\n            : this.gameManager.setting.white.uri) === uri.ES_HUMAN\n        );\n      case AppState.CSA_GAME:\n        return (\n          this.csaGameManager.isMyTurn &&\n          this.csaGameManager.setting.player.uri === uri.ES_HUMAN\n        );\n    }\n    return false;\n  }\n}\n\nconst store = reactive<Store>(new Store());\n\nexport function useStore(): UnwrapNestedRefs<Store> {\n  return store;\n}\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"img\", {\n    class: \"icon\",\n    src: _ctx.source,\n    draggable: \"false\"\n  }, null, 8, _hoisted_1))\n}","import preloadImage from \"./preload\";\n\nexport enum Icon {\n  BUSSY = \"bussy\",\n  ERROR = \"error\",\n  INFO = \"info\",\n  GAME = \"game\",\n  INTERNET = \"internet\",\n  STOP = \"stop\",\n  RESIGN = \"resign\",\n  RESEARCH = \"research\",\n  END = \"end\",\n  QUIZ = \"quiz\",\n  EDIT = \"edit\",\n  CHECK = \"check\",\n  SWAP = \"swap\",\n  SWAP_H = \"swap_h\",\n  SETTINGS = \"settings\",\n  ENGINE_SETTINGS = \"engineSettings\",\n  FLIP = \"flip\",\n  FILE = \"file\",\n  OPEN = \"open\",\n  SAVE = \"save\",\n  SAVE_AS = \"saveAs\",\n  PASTE = \"paste\",\n  COPY = \"copy\",\n  DELETE = \"delete\",\n  COMMENT = \"comment\",\n  BRAIN = \"brain\",\n  PV = \"pv\",\n  CHART = \"chart\",\n  PERCENT = \"percent\",\n  ARROW_DROP = \"arrowDrop\",\n  FIRST = \"first\",\n  BACK = \"back\",\n  NEXT = \"next\",\n  LAST = \"last\",\n  QUESTION = \"question\",\n  ANALYSIS = \"analysis\",\n  DESCRIPTION = \"description\",\n  PLAY = \"play\",\n  CLOSE = \"close\",\n  CALL = \"call\",\n}\n\nexport const iconSourceMap = {\n  [Icon.BUSSY]: \"icon/hourglass_empty_white_24dp.svg\",\n  [Icon.ERROR]: \"icon/error_outline_white_24dp.svg\",\n  [Icon.INFO]: \"icon/info_white_24dp.svg\",\n  [Icon.GAME]: \"icon/sports_esports_white_24dp.svg\",\n  [Icon.INTERNET]: \"icon/language_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.STOP]: \"icon/block_white_24dp.svg\",\n  [Icon.RESIGN]: \"icon/flag_white_24dp.svg\",\n  [Icon.RESEARCH]: \"icon/science_white_24dp.svg\",\n  [Icon.END]: \"icon/do_disturb_on_white_24dp.svg\",\n  [Icon.QUIZ]: \"icon/quiz_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.EDIT]: \"icon/app_registration_white_24dp.svg\",\n  [Icon.CHECK]: \"icon/check_circle_white_24dp.svg\",\n  [Icon.SWAP]: \"icon/swap_vert_white_24dp.svg\",\n  [Icon.SWAP_H]: \"icon/swap_horiz_white_24dp.svg\",\n  [Icon.SETTINGS]: \"icon/settings_white_24dp.svg\",\n  [Icon.ENGINE_SETTINGS]: \"icon/settings_input_component_white_24dp.svg\",\n  [Icon.FLIP]: \"icon/flip_camera_android_white_24dp.svg\",\n  [Icon.FILE]: \"icon/draft_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.OPEN]: \"icon/file_open_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.SAVE]: \"icon/save_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.SAVE_AS]: \"icon/save_as_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.PASTE]: \"icon/content_paste_white_24dp.svg\",\n  [Icon.COPY]: \"icon/content_copy_white_24dp.svg\",\n  [Icon.DELETE]: \"icon/backspace_white_24dp.svg\",\n  [Icon.COMMENT]: \"icon/edit_note_white_24dp.svg\",\n  [Icon.BRAIN]: \"icon/psychology_white_24dp.svg\",\n  [Icon.PV]: \"icon/manage_search_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.CHART]: \"icon/show_chart_white_24dp.svg\",\n  [Icon.PERCENT]: \"icon/percent_white_24dp.svg\",\n  [Icon.ARROW_DROP]: \"icon/arrow_drop_down_white_24dp.svg\",\n  [Icon.FIRST]: \"icon/first_page_white_24dp.svg\",\n  [Icon.BACK]: \"icon/chevron_left_white_24dp.svg\",\n  [Icon.NEXT]: \"icon/chevron_right_white_24dp.svg\",\n  [Icon.LAST]: \"icon/last_page_white_24dp.svg\",\n  [Icon.QUESTION]: \"icon/help_white_24dp.svg\",\n  [Icon.ANALYSIS]: \"icon/query_stats_white_24dp.svg\",\n  [Icon.DESCRIPTION]: \"icon/description_white_24dp.svg\",\n  [Icon.PLAY]: \"icon/play_arrow_FILL1_wght400_GRAD0_opsz48.svg\",\n  [Icon.CLOSE]: \"icon/close_FILL0_wght400_GRAD0_opsz48.svg\",\n  [Icon.CALL]: \"icon/record_voice_over_FILL0_wght400_GRAD0_opsz48.svg\",\n};\n\nObject.values(iconSourceMap).forEach((source) => {\n  preloadImage(source);\n});\n","\nimport { Icon, iconSourceMap } from \"@/assets/icons\";\nimport { defineComponent, PropType } from \"vue\";\n\nexport default defineComponent({\n  name: \"ButtonIcon\",\n  props: {\n    icon: {\n      type: String as PropType<Icon>,\n      required: true,\n    },\n  },\n  setup(props) {\n    return {\n      source: iconSourceMap[props.icon],\n    };\n  },\n});\n","import { render } from \"./ButtonIcon.vue?vue&type=template&id=4208878a&ts=true\"\nimport script from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\nexport * from \"./ButtonIcon.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"menu\"\n}\nconst _hoisted_2 = { class: \"groups\" }\nconst _hoisted_3 = { class: \"group\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"戻る\", -1)\nconst _hoisted_5 = { class: \"group\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"ローカル対局\", -1)\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"通信対局（CSA）\", -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            class: \"close\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClose && _ctx.onClose(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.CLOSE\n            }, null, 8, [\"icon\"]),\n            _hoisted_4\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onLocalGame && _ctx.onLocalGame(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_6\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onCSAGame && _ctx.onCSAGame(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.INTERNET\n            }, null, 8, [\"icon\"]),\n            _hoisted_7\n          ])\n        ])\n      ])\n    ], 512)\n  ]))\n}","interface Dialog extends HTMLElement {\n  showModal(): void;\n}\n\nexport function showModalDialog(dialog: Dialog, onCancel?: () => void): void {\n  dialog.addEventListener(\"cancel\", (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (onCancel) {\n      onCancel();\n    }\n  });\n  dialog.addEventListener(\"copy\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.addEventListener(\"paste\", (event: ClipboardEvent) => {\n    event.stopPropagation();\n  });\n  dialog.showModal();\n}\n\ninterface FormItem extends HTMLElement {\n  value: string;\n}\n\nexport function getFormItemByID(id: string): FormItem | null {\n  return document.getElementById(id) as FormItem | null;\n}\n","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport { useStore } from \"@/store\";\n\nexport default defineComponent({\n  name: \"GameMenu\",\n  components: {\n    ButtonIcon,\n  },\n  emits: [\"close\"],\n  setup(_, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const onClose = () => {\n      context.emit(\"close\");\n    };\n    onMounted(() => {\n      showModalDialog(dialog.value, onClose);\n    });\n    const onLocalGame = () => {\n      store.showGameDialog();\n      context.emit(\"close\");\n    };\n    const onCSAGame = () => {\n      store.showCSAGameDialog();\n      context.emit(\"close\");\n    };\n    return {\n      dialog,\n      Icon,\n      onClose,\n      onLocalGame,\n      onCSAGame,\n    };\n  },\n});\n","import { render } from \"./GameMenu.vue?vue&type=template&id=dda12b74&ts=true\"\nimport script from \"./GameMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./GameMenu.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"menu\"\n}\nconst _hoisted_2 = { class: \"groups\" }\nconst _hoisted_3 = { class: \"group\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"戻る\", -1)\nconst _hoisted_5 = { class: \"group\" }\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"初期化\", -1)\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"開く\", -1)\nconst _hoisted_10 = [\"disabled\"]\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"上書き保存\", -1)\nconst _hoisted_12 = [\"disabled\"]\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"保存\", -1)\nconst _hoisted_14 = { class: \"group\" }\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・KIF\", -1)\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・CSA\", -1)\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・USI\", -1)\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"コピー・SFEN\", -1)\nconst _hoisted_19 = [\"disabled\"]\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"貼り付け\", -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            class: \"close\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClose && _ctx.onClose(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.CLOSE\n            }, null, 8, [\"icon\"]),\n            _hoisted_4\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.states.newFile,\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onNewFile && _ctx.onNewFile(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.FILE\n            }, null, 8, [\"icon\"]),\n            _hoisted_7\n          ], 8, _hoisted_6),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.states.open,\n            onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onOpen && _ctx.onOpen(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.OPEN\n            }, null, 8, [\"icon\"]),\n            _hoisted_9\n          ], 8, _hoisted_8),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.states.saveAs,\n            onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onSave && _ctx.onSave(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SAVE\n            }, null, 8, [\"icon\"]),\n            _hoisted_11\n          ], 8, _hoisted_10),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.states.save,\n            onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onSaveAs && _ctx.onSaveAs(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SAVE_AS\n            }, null, 8, [\"icon\"]),\n            _hoisted_13\n          ], 8, _hoisted_12)\n        ]),\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onCopyKIF && _ctx.onCopyKIF(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_15\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onCopyCSA && _ctx.onCopyCSA(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_16\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onCopyUSI && _ctx.onCopyUSI(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_17\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onCopySFEN && _ctx.onCopySFEN(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.COPY\n            }, null, 8, [\"icon\"]),\n            _hoisted_18\n          ]),\n          _createElementVNode(\"button\", {\n            disabled: !_ctx.states.paste,\n            onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onPaste && _ctx.onPaste(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.PASTE\n            }, null, 8, [\"icon\"]),\n            _hoisted_20\n          ], 8, _hoisted_19)\n        ])\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\n\nexport default defineComponent({\n  name: \"FileMenu\",\n  components: {\n    ButtonIcon,\n  },\n  emits: [\"close\"],\n  setup(_, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const onClose = () => {\n      context.emit(\"close\");\n    };\n    onMounted(() => {\n      showModalDialog(dialog.value, onClose);\n    });\n    const onNewFile = () => {\n      store.resetRecord();\n      context.emit(\"close\");\n    };\n    const onOpen = () => {\n      store.openRecord();\n      context.emit(\"close\");\n    };\n    const onSave = () => {\n      store.saveRecord({ overwrite: true });\n      context.emit(\"close\");\n    };\n    const onSaveAs = () => {\n      store.saveRecord();\n      context.emit(\"close\");\n    };\n    const onCopyKIF = () => {\n      store.copyRecordKIF();\n      context.emit(\"close\");\n    };\n    const onCopyCSA = () => {\n      store.copyRecordCSA();\n      context.emit(\"close\");\n    };\n    const onCopyUSI = () => {\n      store.copyRecordUSIAll();\n      context.emit(\"close\");\n    };\n    const onCopySFEN = () => {\n      store.copyBoardSFEN();\n      context.emit(\"close\");\n    };\n    const onPaste = () => {\n      store.showPasteDialog();\n      context.emit(\"close\");\n    };\n    const states = computed(() => {\n      return {\n        newFile: store.appState === AppState.NORMAL,\n        open: store.appState === AppState.NORMAL,\n        save: store.appState === AppState.NORMAL,\n        saveAs: store.appState === AppState.NORMAL,\n        paste: store.appState === AppState.NORMAL,\n      };\n    });\n    return {\n      dialog,\n      Icon,\n      onClose,\n      onNewFile,\n      onOpen,\n      onSave,\n      onSaveAs,\n      onCopyKIF,\n      onCopyCSA,\n      onCopyUSI,\n      onCopySFEN,\n      onPaste,\n      states,\n    };\n  },\n});\n","import { render } from \"./FileMenu.vue?vue&type=template&id=6db01c90&ts=true\"\nimport script from \"./FileMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./FileMenu.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"menu\"\n}\nconst _hoisted_2 = { class: \"groups\" }\nconst _hoisted_3 = { class: \"group\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"戻る\", -1)\nconst _hoisted_5 = { class: \"group\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"平手\", -1)\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"香落ち\", -1)\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"右香落ち\", -1)\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"角落ち\", -1)\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"飛車落ち\", -1)\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"飛車香落ち\", -1)\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"2枚落ち\", -1)\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"4枚落ち\", -1)\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"6枚落ち\", -1)\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"8枚落ち\", -1)\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"詰め将棋\", -1)\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"label\" }, \"双玉詰め将棋\", -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"button\", {\n            class: \"close\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onClose && _ctx.onClose(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.CLOSE\n            }, null, 8, [\"icon\"]),\n            _hoisted_4\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onStandard && _ctx.onStandard(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_6\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapLance && _ctx.onHandicapLance(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_7\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapRightLance && _ctx.onHandicapRightLance(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_8\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapBishop && _ctx.onHandicapBishop(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_9\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapRook && _ctx.onHandicapRook(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_10\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.onHandicapRookLance && _ctx.onHandicapRookLance(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_11\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap2Pieces && _ctx.onHandicap2Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_12\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[8] || (_cache[8] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap4Pieces && _ctx.onHandicap4Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_13\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap6Pieces && _ctx.onHandicap6Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_14\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_ctx.onHandicap8Pieces && _ctx.onHandicap8Pieces(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.GAME\n            }, null, 8, [\"icon\"]),\n            _hoisted_15\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.onTsumeShogi && _ctx.onTsumeShogi(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.QUIZ\n            }, null, 8, [\"icon\"]),\n            _hoisted_16\n          ]),\n          _createElementVNode(\"button\", {\n            onClick: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_ctx.onTsumeShogi2Kings && _ctx.onTsumeShogi2Kings(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.QUIZ\n            }, null, 8, [\"icon\"]),\n            _hoisted_17\n          ])\n        ])\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport { useStore } from \"@/store\";\nimport { InitialPositionType } from \"@/shogi\";\n\nexport default defineComponent({\n  name: \"InitialPositionMenu\",\n  components: {\n    ButtonIcon,\n  },\n  emits: [\"close\"],\n  setup(_, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const onClose = () => {\n      context.emit(\"close\");\n    };\n    onMounted(() => {\n      showModalDialog(dialog.value, onClose);\n    });\n    const onStandard = () => {\n      store.initializePosition(InitialPositionType.STANDARD);\n      context.emit(\"close\");\n    };\n    const onHandicapLance = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_LANCE);\n      context.emit(\"close\");\n    };\n    const onHandicapRightLance = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_RIGHT_LANCE);\n      context.emit(\"close\");\n    };\n    const onHandicapBishop = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_BISHOP);\n      context.emit(\"close\");\n    };\n    const onHandicapRook = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_ROOK);\n      context.emit(\"close\");\n    };\n    const onHandicapRookLance = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_ROOK_LANCE);\n      context.emit(\"close\");\n    };\n    const onHandicap2Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_2PIECES);\n      context.emit(\"close\");\n    };\n    const onHandicap4Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_4PIECES);\n      context.emit(\"close\");\n    };\n    const onHandicap6Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_6PIECES);\n      context.emit(\"close\");\n    };\n    const onHandicap8Pieces = () => {\n      store.initializePosition(InitialPositionType.HANDICAP_8PIECES);\n      context.emit(\"close\");\n    };\n    const onTsumeShogi = () => {\n      store.initializePosition(InitialPositionType.TSUME_SHOGI);\n      context.emit(\"close\");\n    };\n    const onTsumeShogi2Kings = () => {\n      store.initializePosition(InitialPositionType.TSUME_SHOGI_2KINGS);\n      context.emit(\"close\");\n    };\n    return {\n      dialog,\n      Icon,\n      onClose,\n      onStandard,\n      onHandicapLance,\n      onHandicapRightLance,\n      onHandicapBishop,\n      onHandicapRook,\n      onHandicapRookLance,\n      onHandicap2Pieces,\n      onHandicap4Pieces,\n      onHandicap6Pieces,\n      onHandicap8Pieces,\n      onTsumeShogi,\n      onTsumeShogi2Kings,\n    };\n  },\n});\n","import { render } from \"./InitialPositionMenu.vue?vue&type=template&id=18231c7f&ts=true\"\nimport script from \"./InitialPositionMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./InitialPositionMenu.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { computed, defineComponent, ref } from \"vue\";\nimport BoardView from \"@/components/primitive/BoardView.vue\";\nimport { Move, PositionChange, RecordMetadataKey } from \"@/shogi\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { AppState } from \"@/store/state\";\nimport { humanPlayer } from \"@/players/human\";\nimport { Icon } from \"@/assets/icons\";\nimport GameMenu from \"@/components/menu/GameMenu.vue\";\nimport FileMenu from \"@/components/menu/FileMenu.vue\";\nimport InitialPositionMenu from \"@/components/menu/InitialPositionMenu.vue\";\nimport { CSAGameState } from \"@/store/csa\";\n\nexport default defineComponent({\n  name: \"BoardPane\",\n  components: {\n    BoardView,\n    ButtonIcon,\n    GameMenu,\n    FileMenu,\n    InitialPositionMenu,\n  },\n  props: {\n    maxSize: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  emits: [\"resize\"],\n  setup(_, context) {\n    const store = useStore();\n    const isGameMenuVisible = ref(false);\n    const isFileMenuVisible = ref(false);\n    const isInitialPositionMenuVisible = ref(false);\n\n    const onResize = (size: RectSize) => {\n      context.emit(\"resize\", size);\n    };\n\n    const onMove = (move: Move) => {\n      if (\n        store.appState === AppState.GAME ||\n        store.appState === AppState.CSA_GAME\n      ) {\n        humanPlayer.doMove(move);\n      } else {\n        store.doMove(move);\n      }\n    };\n\n    const onEdit = (change: PositionChange) => {\n      store.editPosition(change);\n    };\n\n    const onGame = () => {\n      isGameMenuVisible.value = true;\n    };\n\n    const onStop = () => {\n      store.stopGame();\n    };\n\n    const onWin = () => {\n      humanPlayer.win();\n    };\n\n    const onResign = () => {\n      humanPlayer.resign();\n    };\n\n    const onResearch = () => {\n      store.showResearchDialog();\n    };\n\n    const onEndResearch = () => {\n      store.stopResearch();\n    };\n\n    const onAnalysis = () => {\n      store.showAnalysisDialog();\n    };\n\n    const onEndAnalysis = () => {\n      store.stopAnalysis();\n    };\n\n    const onStartEditPosition = () => {\n      store.startPositionEditing();\n    };\n\n    const onEndEditPosition = () => {\n      store.endPositionEditing();\n    };\n\n    const onInitPosition = () => {\n      isInitialPositionMenuVisible.value = true;\n    };\n\n    const onChangeTurn = () => {\n      store.changeTurn();\n    };\n\n    const onOpenAppSettings = () => {\n      store.showAppSettingDialog();\n    };\n\n    const onOpenEngineSettings = () => {\n      store.showUsiEngineManagementDialog();\n    };\n\n    const onFlip = () => {\n      useStore().flipBoard();\n    };\n\n    const onFileAction = () => {\n      isFileMenuVisible.value = true;\n    };\n\n    const onRemoveCurrentMove = () => {\n      store.removeCurrentMove();\n    };\n\n    const allowEdit = computed(\n      () => store.appState === AppState.POSITION_EDITING\n    );\n\n    const allowMove = computed(() => store.isMovableByUser);\n\n    const appSetting = computed(() => store.appSetting);\n\n    const position = computed(() => store.record.position);\n\n    const lastMove = computed(() => {\n      const move = store.record.current.move;\n      return move instanceof Move ? move : undefined;\n    });\n\n    const blackPlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.BLACK_NAME\n      );\n    });\n\n    const whitePlayerName = computed(() => {\n      return store.record.metadata.getStandardMetadata(\n        RecordMetadataKey.WHITE_NAME\n      );\n    });\n\n    const clock = computed(() => {\n      if (\n        store.appState === AppState.GAME ||\n        store.csaGameState === CSAGameState.GAME\n      ) {\n        return {\n          black: {\n            time: store.blackTime,\n            byoyomi: store.blackByoyomi,\n          },\n          white: {\n            time: store.whiteTime,\n            byoyomi: store.whiteByoyomi,\n          },\n        };\n      }\n      return undefined;\n    });\n\n    const controlStates = computed(() => {\n      return {\n        game: store.appState === AppState.NORMAL,\n        stop:\n          store.appState === AppState.GAME ||\n          store.appState === AppState.CSA_GAME,\n        win: store.appState === AppState.CSA_GAME && store.isMovableByUser,\n        resign:\n          (store.appState === AppState.GAME ||\n            store.appState === AppState.CSA_GAME) &&\n          store.isMovableByUser,\n        research: store.appState === AppState.NORMAL,\n        endResearch: store.appState === AppState.RESEARCH,\n        analysis: store.appState === AppState.NORMAL,\n        endAnalysis: store.appState === AppState.ANALYSIS,\n        startEditPosition: store.appState === AppState.NORMAL,\n        endEditPosition: store.appState === AppState.POSITION_EDITING,\n        initPosition: store.appState === AppState.POSITION_EDITING,\n        removeCurrentMove:\n          store.appState === AppState.NORMAL ||\n          store.appState === AppState.RESEARCH,\n        engineSettings: store.appState === AppState.NORMAL,\n      };\n    });\n\n    return {\n      isGameMenuVisible,\n      isFileMenuVisible,\n      isInitialPositionMenuVisible,\n      appSetting,\n      position,\n      lastMove,\n      blackPlayerName,\n      whitePlayerName,\n      clock,\n      controlStates,\n      onResize,\n      onMove,\n      onEdit,\n      onGame,\n      onStop,\n      onWin,\n      onResign,\n      onResearch,\n      onEndResearch,\n      onAnalysis,\n      onEndAnalysis,\n      onStartEditPosition,\n      onEndEditPosition,\n      onInitPosition,\n      onChangeTurn,\n      onOpenAppSettings,\n      onOpenEngineSettings,\n      onFlip,\n      onFileAction,\n      onRemoveCurrentMove,\n      allowEdit,\n      allowMove,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./BoardPane.vue?vue&type=template&id=58cfebfb&scoped=true&ts=true\"\nimport script from \"./BoardPane.vue?vue&type=script&lang=ts\"\nexport * from \"./BoardPane.vue?vue&type=script&lang=ts\"\n\nimport \"./BoardPane.vue?vue&type=style&index=0&id=58cfebfb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58cfebfb\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2f3c443f\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"record-pane\" }\nconst _hoisted_2 = { class: \"record\" }\nconst _hoisted_3 = { class: \"options\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = [\"checked\"]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"show-elapsed-time\" }, \"消費時間\", -1))\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = [\"checked\"]\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"show-comment\" }, \"コメント\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_RecordView = _resolveComponent(\"RecordView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_RecordView, {\n        record: _ctx.record,\n        operational: _ctx.isRecordOperational,\n        \"show-comment\": _ctx.showComment,\n        \"show-elapsed-time\": _ctx.showElapsedTime,\n        onGoBegin: _ctx.goBegin,\n        onGoBack: _ctx.goBack,\n        onGoForward: _ctx.goForward,\n        onGoEnd: _ctx.goEnd,\n        onSelectMove: _ctx.selectMove,\n        onSelectBranch: _ctx.selectBranch\n      }, null, 8, [\"record\", \"operational\", \"show-comment\", \"show-elapsed-time\", \"onGoBegin\", \"onGoBack\", \"onGoForward\", \"onGoEnd\", \"onSelectMove\", \"onSelectBranch\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"input\", {\n          id: \"show-elapsed-time\",\n          type: \"checkbox\",\n          checked: _ctx.showElapsedTime,\n          onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onToggleElapsedTime && _ctx.onToggleElapsedTime(...args)))\n        }, null, 40, _hoisted_5),\n        _hoisted_6\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"input\", {\n          id: \"show-comment\",\n          type: \"checkbox\",\n          checked: _ctx.showComment,\n          onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onToggleComment && _ctx.onToggleComment(...args)))\n        }, null, 40, _hoisted_8),\n        _hoisted_9\n      ])\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-006c6f53\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"record-view\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = [\"disabled\"]\nconst _hoisted_7 = {\n  ref: \"moveList\",\n  class: \"move-list\"\n}\nconst _hoisted_8 = [\"value\", \"onClick\"]\nconst _hoisted_9 = { class: \"move-number\" }\nconst _hoisted_10 = { class: \"move-text\" }\nconst _hoisted_11 = {\n  key: 0,\n  class: \"move-time\"\n}\nconst _hoisted_12 = {\n  key: 1,\n  class: \"move-comment\"\n}\nconst _hoisted_13 = {\n  ref: \"branchList\",\n  class: \"branch-list\"\n}\nconst _hoisted_14 = [\"value\", \"onClick\"]\nconst _hoisted_15 = { class: \"move-text\" }\nconst _hoisted_16 = {\n  key: 0,\n  class: \"move-comment\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.goBegin()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.FIRST\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_3),\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.goBack()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.BACK\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_4),\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.goForward()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.NEXT\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_5),\n      _createElementVNode(\"button\", {\n        class: \"control-button\",\n        disabled: !_ctx.operational,\n        onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.goEnd()))\n      }, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.LAST\n        }, null, 8, [\"icon\"])\n      ], 8, _hoisted_6)\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.moves, (move) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: move.number,\n          class: _normalizeClass([\"move-element\", { 'has-branch': move.hasBranch, selected: move.selected }]),\n          value: move.number,\n          onClick: ($event: any) => (_ctx.changeNumber(move.number))\n        }, [\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(move.number !== 0 ? move.number : \"\"), 1),\n          _createElementVNode(\"div\", _hoisted_10, _toDisplayString(move.text), 1),\n          (_ctx.showElapsedTime)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(move.time), 1))\n            : _createCommentVNode(\"\", true),\n          (_ctx.showComment)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString(move.comment), 1))\n            : _createCommentVNode(\"\", true)\n        ], 10, _hoisted_8))\n      }), 128))\n    ], 512),\n    _createElementVNode(\"div\", _hoisted_13, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.branches, (branch) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: branch.index,\n          class: _normalizeClass([\"move-element\", { selected: branch.selected }]),\n          value: branch.index,\n          onClick: ($event: any) => (_ctx.changeBranch(branch.index))\n        }, [\n          _createElementVNode(\"div\", _hoisted_15, _toDisplayString(branch.text), 1),\n          (_ctx.showComment)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _toDisplayString(branch.comment), 1))\n            : _createCommentVNode(\"\", true)\n        ], 10, _hoisted_14))\n      }), 128))\n    ], 512)\n  ]))\n}","\nimport { ImmutableRecord, ImmutableNode } from \"@/shogi\";\nimport { computed, ref, defineComponent, Ref, PropType, onUpdated } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"RecordView\",\n  components: {\n    ButtonIcon,\n  },\n  props: {\n    record: {\n      type: Object as PropType<ImmutableRecord>,\n      required: true,\n    },\n    operational: {\n      type: Boolean,\n      required: false,\n    },\n    showElapsedTime: {\n      type: Boolean,\n      required: false,\n    },\n    showComment: {\n      type: Boolean,\n      required: false,\n    },\n  },\n  emits: [\n    \"goBegin\",\n    \"goBack\",\n    \"goForward\",\n    \"goEnd\",\n    \"selectMove\",\n    \"selectBranch\",\n  ],\n  setup(props, context) {\n    const moveList: Ref<HTMLDivElement | null> = ref(null);\n    const branchList: Ref = ref(null);\n\n    const goBegin = () => {\n      if (props.operational) {\n        context.emit(\"goBegin\");\n      }\n    };\n\n    const goBack = () => {\n      if (props.operational) {\n        context.emit(\"goBack\");\n      }\n    };\n\n    const goForward = () => {\n      if (props.operational) {\n        context.emit(\"goForward\");\n      }\n    };\n\n    const goEnd = () => {\n      if (props.operational) {\n        context.emit(\"goEnd\");\n      }\n    };\n\n    const changeNumber = (number: number) => {\n      if (props.operational) {\n        context.emit(\"selectMove\", Number(number));\n      }\n    };\n\n    const changeBranch = (index: number) => {\n      if (props.operational) {\n        context.emit(\"selectBranch\", Number(index));\n      }\n    };\n\n    const beginPosSelected = computed(() => props.record.current.number === 0);\n\n    const moves = computed(() => {\n      const ret: {\n        number: number;\n        text: string;\n        time: string;\n        hasBranch: boolean;\n        comment: string;\n        selected: boolean;\n      }[] = [];\n      props.record.moves.forEach((elem) => {\n        ret.push({\n          number: elem.number,\n          text: elem.displayText,\n          time: elem.number != 0 ? elem.timeText : \"\",\n          hasBranch: elem.hasBranch,\n          comment: elem.comment,\n          selected: elem === props.record.current,\n        });\n      });\n      return ret;\n    });\n\n    const branches = computed(() => {\n      if (!props.record.branchBegin.branch) {\n        return null;\n      }\n      const ret: {\n        index: number;\n        text: string;\n        comment: string;\n        selected: boolean;\n      }[] = [];\n      let p: ImmutableNode | null;\n      for (p = props.record.branchBegin; p && p.move; p = p.branch) {\n        ret.push({\n          index: ret.length,\n          text: p.displayText,\n          comment: p.comment,\n          selected: p.activeBranch,\n        });\n      }\n      return ret;\n    });\n\n    onUpdated(() => {\n      const moveListElement = moveList.value as HTMLElement;\n      moveListElement.childNodes.forEach((elem) => {\n        if (\n          elem instanceof HTMLElement &&\n          elem.classList.contains(\"selected\")\n        ) {\n          elem.scrollIntoView({ behavior: \"auto\", block: \"nearest\" });\n        }\n      });\n    });\n\n    return {\n      beginPosSelected,\n      moves,\n      branches,\n      moveList,\n      branchList,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      changeNumber,\n      changeBranch,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./RecordView.vue?vue&type=template&id=006c6f53&scoped=true&ts=true\"\nimport script from \"./RecordView.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordView.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordView.vue?vue&type=style&index=0&id=006c6f53&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-006c6f53\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordView from \"@/components/primitive/RecordView.vue\";\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\n\nexport const minWidth = 200;\n\nexport default defineComponent({\n  name: \"RecordPane\",\n  components: {\n    RecordView,\n  },\n  setup() {\n    const store = useStore();\n\n    const goto = (number: number) => {\n      store.changeMoveNumber(number);\n    };\n\n    const goBegin = () => {\n      goto(0);\n    };\n\n    const goBack = () => {\n      goto(store.record.current.number - 1);\n    };\n\n    const goForward = () => {\n      goto(store.record.current.number + 1);\n    };\n\n    const goEnd = () => {\n      goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const selectMove = (number: number) => {\n      goto(number);\n    };\n\n    const selectBranch = (index: number) => {\n      store.changeBranch(index);\n    };\n\n    const onToggleElapsedTime = (event: Event) => {\n      const checkbox = event.target as HTMLInputElement;\n      store.updateAppSetting({\n        showElapsedTimeInRecordView: checkbox.checked,\n      });\n    };\n\n    const onToggleComment = (event: Event) => {\n      const checkbox = event.target as HTMLInputElement;\n      store.updateAppSetting({\n        showCommentInRecordView: checkbox.checked,\n      });\n    };\n\n    const isRecordOperational = computed(() => {\n      return (\n        store.appState === AppState.NORMAL ||\n        store.appState === AppState.RESEARCH\n      );\n    });\n    const showComment = computed(\n      () => store.appSetting.showCommentInRecordView\n    );\n    const showElapsedTime = computed(\n      () => store.appSetting.showElapsedTimeInRecordView\n    );\n\n    const record = computed(() => store.record);\n\n    return {\n      isRecordOperational,\n      showElapsedTime,\n      showComment,\n      record: record,\n      goBegin,\n      goBack,\n      goForward,\n      goEnd,\n      selectMove,\n      selectBranch,\n      onToggleElapsedTime,\n      onToggleComment,\n    };\n  },\n});\n","import { render } from \"./RecordPane.vue?vue&type=template&id=2f3c443f&scoped=true&ts=true\"\nimport script from \"./RecordPane.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordPane.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordPane.vue?vue&type=style&index=0&id=2f3c443f&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2f3c443f\"]])\n\nexport default __exports__","import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-05336efe\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 棋譜情報 \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" コメント \")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 思考 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 読み筋 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 評価値 \")\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" 期待勝率 \")\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" 最小化 \")\nconst _hoisted_10 = { class: \"tab-contents\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_RecordInfo = _resolveComponent(\"RecordInfo\")!\n  const _component_RecordComment = _resolveComponent(\"RecordComment\")!\n  const _component_EngineAnalytics = _resolveComponent(\"EngineAnalytics\")!\n  const _component_EvaluationChart = _resolveComponent(\"EvaluationChart\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.activeTab === 'invisible')\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            style: _normalizeStyle(`height: calc(100% - ${_ctx.headerHeight}px);`)\n          }, null, 4))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.RECORD_INFO }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.RECORD_INFO)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.DESCRIPTION\n          }, null, 8, [\"icon\"]),\n          _hoisted_3\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.COMMENT }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.COMMENT)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.COMMENT\n          }, null, 8, [\"icon\"]),\n          _hoisted_4\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.SEARCH }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.SEARCH)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.BRAIN\n          }, null, 8, [\"icon\"]),\n          _hoisted_5\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.PV }]),\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.PV)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.PV\n          }, null, 8, [\"icon\"]),\n          _hoisted_6\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.CHART }]),\n          onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.CHART)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.CHART\n          }, null, 8, [\"icon\"]),\n          _hoisted_7\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.PERCENTAGE_CHART }]),\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.PERCENTAGE_CHART)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.PERCENT\n          }, null, 8, [\"icon\"]),\n          _hoisted_8\n        ], 2),\n        _createElementVNode(\"span\", {\n          class: _normalizeClass([\"tab\", { selected: _ctx.activeTab === _ctx.Tab.INVISIBLE }]),\n          onClick: _cache[6] || (_cache[6] = ($event: any) => (_ctx.changeSelect(_ctx.Tab.INVISIBLE)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.ARROW_DROP\n          }, null, 8, [\"icon\"]),\n          _hoisted_9\n        ], 2)\n      ]),\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createVNode(_component_RecordInfo, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.RECORD_INFO }]),\n          size: _ctx.contentSize\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_RecordComment, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.COMMENT }])\n        }, null, 8, [\"class\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.SEARCH }]),\n          size: _ctx.contentSize,\n          \"history-mode\": true\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EngineAnalytics, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.PV }]),\n          size: _ctx.contentSize,\n          \"history-mode\": false\n        }, null, 8, [\"class\", \"size\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.CHART }]),\n          size: _ctx.contentSize,\n          type: _ctx.EvaluationChartType.RAW\n        }, null, 8, [\"class\", \"size\", \"type\"]),\n        _createVNode(_component_EvaluationChart, {\n          class: _normalizeClass([\"tab-content\", { selected: _ctx.activeTab === _ctx.Tab.PERCENTAGE_CHART }]),\n          size: _ctx.contentSize,\n          type: _ctx.EvaluationChartType.WIN_RATE\n        }, null, 8, [\"class\", \"size\", \"type\"])\n      ])\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-74746424\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\", \"readonly\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"textarea\", {\n        ref: \"textarea\",\n        class: \"text\",\n        value: _ctx.comment,\n        readonly: !!_ctx.readonly,\n        onInput: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.change && _ctx.change(...args)))\n      }, null, 40, _hoisted_2)\n    ])\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  setup() {\n    const store = useStore();\n    const comment = computed(() => store.record.current.comment);\n    const readonly = computed(() => store.appState != AppState.NORMAL);\n    const textarea: Ref = ref(null);\n\n    const change = (event: Event) => {\n      const comment = (event.target as HTMLTextAreaElement).value;\n      store.updateRecordComment(comment);\n    };\n\n    onMounted(() => {\n      textarea.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      textarea.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    return {\n      textarea,\n      comment,\n      readonly,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordComment.vue?vue&type=template&id=74746424&scoped=true&ts=true\"\nimport script from \"./RecordComment.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordComment.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordComment.vue?vue&type=style&index=0&id=74746424&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-74746424\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3b22508c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_EngineAnalyticsElement = _resolveComponent(\"EngineAnalyticsElement\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_ctx.blackPlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 0,\n            \"history-mode\": _ctx.historyMode,\n            name: _ctx.blackPlayer.name,\n            info: _ctx.blackPlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"history-mode\", \"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.whitePlayer)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 1,\n            \"history-mode\": _ctx.historyMode,\n            name: _ctx.whitePlayer.name,\n            info: _ctx.whitePlayer,\n            height: _ctx.elementHeight\n          }, null, 8, [\"history-mode\", \"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.researcher)\n        ? (_openBlock(), _createBlock(_component_EngineAnalyticsElement, {\n            key: 2,\n            \"history-mode\": _ctx.historyMode,\n            name: _ctx.researcher.name,\n            info: _ctx.researcher,\n            height: _ctx.elementHeight\n          }, null, 8, [\"history-mode\", \"name\", \"info\", \"height\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createBlock as _createBlock, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6522ae2d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = { class: \"headers\" }\nconst _hoisted_3 = { class: \"header\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"エンジン名: \", -1))\nconst _hoisted_5 = { class: \"value\" }\nconst _hoisted_6 = { class: \"header\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"予想手: \", -1))\nconst _hoisted_8 = { class: \"value\" }\nconst _hoisted_9 = { class: \"header\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"最善手: \", -1))\nconst _hoisted_11 = { class: \"value\" }\nconst _hoisted_12 = { class: \"header\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"秒間探索ノード(NPS): \", -1))\nconst _hoisted_14 = { class: \"value\" }\nconst _hoisted_15 = { class: \"header\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"探索ノード数: \", -1))\nconst _hoisted_17 = { class: \"value\" }\nconst _hoisted_18 = { class: \"header\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"label\" }, \"ハッシュ使用率: \", -1))\nconst _hoisted_20 = { class: \"value\" }\nconst _hoisted_21 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"list-header\\\" data-v-6522ae2d><div class=\\\"list-column time\\\" data-v-6522ae2d>経過時間</div><div class=\\\"list-column multipv-index\\\" data-v-6522ae2d>順位</div><div class=\\\"list-column depth\\\" data-v-6522ae2d>深さ</div><div class=\\\"list-column nodes\\\" data-v-6522ae2d>探索局面数</div><div class=\\\"list-column score\\\" data-v-6522ae2d>評価値</div></div>\", 1)\nconst _hoisted_22 = { class: \"list-column time\" }\nconst _hoisted_23 = { class: \"list-column multipv-index\" }\nconst _hoisted_24 = { class: \"list-column depth\" }\nconst _hoisted_25 = { class: \"list-column nodes\" }\nconst _hoisted_26 = { class: \"list-column score\" }\nconst _hoisted_27 = { class: \"list-column score-flag\" }\nconst _hoisted_28 = { class: \"list-column text\" }\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = /*#__PURE__*/_createTextVNode(\" 再現 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_PVPreviewDialog = _resolveComponent(\"PVPreviewDialog\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.name), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _hoisted_7,\n          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(_ctx.info.ponderMove ? _ctx.info.ponderMove : \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.info.currentMoveText || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.info.nps || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_15, [\n          _hoisted_16,\n          _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_ctx.info.nodes || \"---\"), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_18, [\n          _hoisted_19,\n          _createElementVNode(\"span\", _hoisted_20, _toDisplayString(_ctx.info.hashfull ? (_ctx.info.hashfull * 100).toFixed(1) : \"---\") + \" % \", 1)\n        ])\n      ]),\n      _hoisted_21,\n      _createElementVNode(\"div\", {\n        class: \"list\",\n        style: _normalizeStyle(`height:${_ctx.height - 37}px`)\n      }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.historyMode\n            ? _ctx.info.iterates\n            : _ctx.info.latestIteration, (iterate, index) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: index,\n            class: _normalizeClass([\"list-item\", { highlight: _ctx.enableHighlight && iterate.multiPV === 1 }])\n          }, [\n            _createElementVNode(\"div\", _hoisted_22, _toDisplayString(iterate.timeMs ? (iterate.timeMs / 1e3).toFixed(1) + \"s\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_23, _toDisplayString(iterate.multiPV || \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_24, _toDisplayString(iterate.depth) + _toDisplayString(iterate.selectiveDepth && iterate.depth ? \"/\" : \"\") + _toDisplayString(iterate.selectiveDepth), 1),\n            _createElementVNode(\"div\", _hoisted_25, _toDisplayString(iterate.nodes), 1),\n            _createElementVNode(\"div\", _hoisted_26, _toDisplayString(iterate.score) + \" \" + _toDisplayString(iterate.scoreMate ? iterate.scoreMate : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_27, _toDisplayString(iterate.lowerBound ? \"++\" : \"\") + \" \" + _toDisplayString(iterate.upperBound ? \"--\" : \"\") + \" \" + _toDisplayString(iterate.scoreMate ? \"詰\" : \"\"), 1),\n            _createElementVNode(\"div\", _hoisted_28, [\n              (iterate.pv && iterate.pv.length !== 0 && iterate.text)\n                ? (_openBlock(), _createElementBlock(\"button\", {\n                    key: 0,\n                    onClick: ($event: any) => (_ctx.showPreview(iterate))\n                  }, [\n                    _createVNode(_component_ButtonIcon, {\n                      class: \"icon\",\n                      icon: _ctx.Icon.PLAY\n                    }, null, 8, [\"icon\"]),\n                    _hoisted_30\n                  ], 8, _hoisted_29))\n                : _createCommentVNode(\"\", true),\n              _createTextVNode(\" \" + _toDisplayString(iterate.text), 1)\n            ])\n          ], 2))\n        }), 128))\n      ], 4),\n      (_ctx.preview)\n        ? (_openBlock(), _createBlock(_component_PVPreviewDialog, {\n            key: 0,\n            position: _ctx.preview.position,\n            pv: _ctx.preview.pv,\n            infos: _ctx.preview.infos,\n            onClose: _ctx.closePreview\n          }, null, 8, [\"position\", \"pv\", \"infos\", \"onClose\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f82f9ba0\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { class: \"control top\" }\nconst _hoisted_3 = { class: \"control-row\" }\nconst _hoisted_4 = { class: \"control-row\" }\nconst _hoisted_5 = { class: \"control-row\" }\nconst _hoisted_6 = { class: \"informations\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_BoardView = _resolveComponent(\"BoardView\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createVNode(_component_BoardView, {\n        class: \"board\",\n        \"piece-image-type\": _ctx.appSetting.pieceImage,\n        \"board-image-type\": _ctx.appSetting.boardImage,\n        \"board-label-type\": _ctx.appSetting.boardLabelType,\n        \"max-size\": _ctx.maxSize,\n        position: _ctx.pos,\n        \"last-move\": _ctx.lastMove,\n        flip: _ctx.flip\n      }, {\n        \"right-control\": _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.doFlip && _ctx.doFlip(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.FLIP\n                }, null, 8, [\"icon\"])\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.close && _ctx.close(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.CLOSE\n                }, null, 8, [\"icon\"])\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.goBegin && _ctx.goBegin(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.FIRST\n                }, null, 8, [\"icon\"])\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.goEnd && _ctx.goEnd(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.LAST\n                }, null, 8, [\"icon\"])\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.goBack && _ctx.goBack(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.BACK\n                }, null, 8, [\"icon\"])\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"control-item\",\n                onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.goForward && _ctx.goForward(...args)))\n              }, [\n                _createVNode(_component_ButtonIcon, {\n                  class: \"icon\",\n                  icon: _ctx.Icon.NEXT\n                }, null, 8, [\"icon\"])\n              ])\n            ])\n          ])\n        ]),\n        _: 1\n      }, 8, [\"piece-image-type\", \"board-image-type\", \"board-label-type\", \"max-size\", \"position\", \"last-move\", \"flip\"]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.infos, (info) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: info,\n            class: \"information\"\n          }, _toDisplayString(info), 1))\n        }), 128))\n      ])\n    ], 512)\n  ]))\n}","\nimport { Move, Position, Record } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport {\n  defineComponent,\n  onMounted,\n  PropType,\n  Ref,\n  ref,\n  reactive,\n  watch,\n  onUnmounted,\n} from \"vue\";\nimport BoardView from \"@/components/primitive/BoardView.vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { computed } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"PVPreviewDialog\",\n  components: { BoardView, ButtonIcon },\n  props: {\n    position: {\n      type: String,\n      required: true,\n    },\n    pv: {\n      type: Object as PropType<string[]>,\n      required: true,\n    },\n    infos: {\n      type: Object as PropType<string[]>,\n      default: [] as string[],\n      required: false,\n    },\n  },\n  emits: [\"close\"],\n  setup(props, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const maxSize = reactive(new RectSize(0, 0));\n    const record = reactive(new Record());\n    const flip: Ref<boolean> = ref(store.appSetting.boardFlipping);\n\n    const updateSize = () => {\n      maxSize.width = window.innerWidth * 0.8;\n      maxSize.height = window.innerHeight * 0.8 - 80;\n    };\n\n    const updateRecord = () => {\n      const position = Position.newBySFEN(props.position);\n      if (!position) {\n        return;\n      }\n      record.clear(position);\n      for (const sfen of props.pv) {\n        const move = record.position.createMoveBySFEN(sfen);\n        if (!move) {\n          break;\n        }\n        record.append(move, { ignoreValidation: true });\n      }\n      record.goto(1);\n    };\n\n    onMounted(async () => {\n      updateSize();\n      updateRecord();\n      window.addEventListener(\"resize\", updateSize);\n      showModalDialog(dialog.value);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n    });\n\n    watch([() => props.position, () => props.pv], () => {\n      updateRecord();\n      showModalDialog(dialog.value);\n    });\n\n    const close = () => {\n      context.emit(\"close\");\n    };\n\n    const goBegin = () => {\n      record.goto(0);\n    };\n\n    const goEnd = () => {\n      record.goto(Number.MAX_SAFE_INTEGER);\n    };\n\n    const goBack = () => {\n      record.goBack();\n    };\n\n    const goForward = () => {\n      record.goForward();\n    };\n\n    const doFlip = () => {\n      flip.value = !flip.value;\n    };\n\n    const pos = computed(() => record.position);\n    const lastMove = computed(() =>\n      record.current.move instanceof Move ? record.current.move : null\n    );\n\n    return {\n      dialog,\n      appSetting: store.appSetting,\n      pos,\n      lastMove,\n      maxSize,\n      flip,\n      close,\n      goBegin,\n      goEnd,\n      goBack,\n      goForward,\n      doFlip,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./PVPreviewDialog.vue?vue&type=template&id=f82f9ba0&scoped=true&ts=true\"\nimport script from \"./PVPreviewDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PVPreviewDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PVPreviewDialog.vue?vue&type=style&index=0&id=f82f9ba0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f82f9ba0\"]])\n\nexport default __exports__","\nimport { USIIteration, USIPlayerMonitor } from \"@/store/usi\";\nimport { computed, defineComponent, ref } from \"vue\";\nimport { Icon } from \"@/assets/icons\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport PVPreviewDialog from \"@/components/dialog/PVPreviewDialog.vue\";\n\ntype Preview = {\n  position: string;\n  pv: string[];\n  infos: string[];\n};\n\nexport default defineComponent({\n  name: \"EngineAnalyticsElement\",\n  components: {\n    ButtonIcon,\n    PVPreviewDialog,\n  },\n  props: {\n    historyMode: {\n      type: Boolean,\n      required: true,\n    },\n    name: {\n      type: String,\n      required: true,\n    },\n    info: {\n      type: USIPlayerMonitor,\n      required: true,\n    },\n    height: {\n      type: Number,\n      required: true,\n    },\n  },\n  setup: (props) => {\n    const enableHighlight = computed(() => {\n      if (!props.historyMode) {\n        return false;\n      }\n      for (const iterate of props.info.iterates) {\n        if (iterate.multiPV && iterate.multiPV !== 1) {\n          return true;\n        }\n      }\n      return false;\n    });\n\n    const preview = ref<Preview | null>(null);\n\n    const showPreview = (ite: USIIteration) => {\n      const infos = [];\n      if (ite.depth !== undefined) {\n        infos.push(`深さ=${ite.depth}`);\n      }\n      if (ite.selectiveDepth !== undefined) {\n        infos.push(`選択的深さ=${ite.selectiveDepth}`);\n      }\n      if (ite.score) {\n        infos.push(`評価値=${ite.score}`);\n        if (ite.lowerBound) {\n          infos.push(\"（下界値）\");\n        }\n        if (ite.upperBound) {\n          infos.push(\"（上界値）\");\n        }\n      }\n      if (ite.scoreMate) {\n        infos.push(`詰み手数=${ite.scoreMate}`);\n      }\n      if (ite.multiPV) {\n        infos.push(`順位=${ite.multiPV}`);\n      }\n      preview.value = {\n        position: ite.position,\n        pv: ite.pv || [],\n        infos: [infos.join(\" / \"), ite.text || \"\"],\n      };\n    };\n\n    const closePreview = () => {\n      preview.value = null;\n    };\n\n    return {\n      Icon,\n      enableHighlight,\n      preview,\n      showPreview,\n      closePreview,\n    };\n  },\n});\n","import { render } from \"./EngineAnalyticsElement.vue?vue&type=template&id=6522ae2d&scoped=true&ts=true\"\nimport script from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalyticsElement.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalyticsElement.vue?vue&type=style&index=0&id=6522ae2d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6522ae2d\"]])\n\nexport default __exports__","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent } from \"vue\";\nimport EngineAnalyticsElement from \"@/components/tab/EngineAnalyticsElement.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"EngineAnalytics\",\n  components: {\n    EngineAnalyticsElement,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n    historyMode: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const blackPlayer = computed(() => store.usiBlackPlayerMonitor);\n    const whitePlayer = computed(() => store.usiWhitePlayerMonitor);\n    const researcher = computed(() => store.usiResearcherMonitor);\n    const elementHeight = computed(() => {\n      const n =\n        (store.usiBlackPlayerMonitor ? 1 : 0) +\n        (store.usiWhitePlayerMonitor ? 1 : 0) +\n        (store.usiResearcherMonitor ? 1 : 0);\n      return n !== 0 ? props.size.height / n : 0;\n    });\n    return {\n      blackPlayer,\n      whitePlayer,\n      researcher,\n      elementHeight,\n    };\n  },\n});\n","import { render } from \"./EngineAnalytics.vue?vue&type=template&id=3b22508c&scoped=true&ts=true\"\nimport script from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\nexport * from \"./EngineAnalytics.vue?vue&type=script&lang=ts\"\n\nimport \"./EngineAnalytics.vue?vue&type=style&index=0&id=3b22508c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3b22508c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c92a42fc\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"width\", \"height\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"canvas\", {\n        ref: \"canvas\",\n        width: _ctx.size.width.toFixed(0),\n        height: _ctx.size.height.toFixed(0)\n      }, null, 8, _hoisted_2)\n    ])\n  ]))\n}","\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { RecordCustomData } from \"@/store/record\";\nimport {\n  defineComponent,\n  onMounted,\n  onUnmounted,\n  PropType,\n  ref,\n  Ref,\n  watch,\n} from \"vue\";\nimport {\n  ActiveElement,\n  Chart,\n  ChartEvent,\n  Color as ChartColor,\n} from \"chart.js\";\nimport { Color, ImmutableNode, ImmutableRecord } from \"@/shogi\";\nimport { scoreToPercentage } from \"@/store/score\";\nimport { AppSetting, Thema } from \"@/settings/app\";\nimport { SearchInfo } from \"@/players/player\";\n\nconst MATE_SCORE = 1000000;\nconst MAX_SCORE = 2000;\nconst MIN_SCORE = -MAX_SCORE;\n\nenum Series {\n  BLACK_PLAYER,\n  WHITE_PLAYER,\n  RESEARCHER,\n}\n\nfunction getSeriesName(series: Series): string {\n  switch (series) {\n    case Series.BLACK_PLAYER:\n      return \"先手\";\n    case Series.WHITE_PLAYER:\n      return \"後手\";\n    case Series.RESEARCHER:\n      return \"検討\";\n  }\n}\n\nfunction getSearchInfo(\n  node: ImmutableNode,\n  series: Series\n): SearchInfo | undefined {\n  const data = node.customData as RecordCustomData;\n  if (!data) {\n    return;\n  }\n  switch (series) {\n    case Series.BLACK_PLAYER:\n      if (node.nextColor === Color.BLACK) {\n        return;\n      }\n      return data.playerSearchInfo;\n    case Series.WHITE_PLAYER:\n      if (node.nextColor === Color.WHITE) {\n        return;\n      }\n      return data.playerSearchInfo;\n    case Series.RESEARCHER:\n      return data.researchInfo;\n  }\n}\n\nfunction getScore(\n  searchInfo: SearchInfo,\n  type: EvaluationChartType,\n  coefficientInSigmoid: number\n): number | undefined {\n  const score =\n    searchInfo.score !== undefined\n      ? searchInfo.score\n      : searchInfo.mate !== undefined\n      ? searchInfo.mate > 0\n        ? MATE_SCORE\n        : -MATE_SCORE\n      : undefined;\n  if (score === undefined) {\n    return;\n  }\n  switch (type) {\n    case EvaluationChartType.RAW:\n      return Math.min(Math.max(score, MIN_SCORE), MAX_SCORE);\n    case EvaluationChartType.WIN_RATE:\n      return scoreToPercentage(score, coefficientInSigmoid);\n  }\n}\n\ntype ColorPalette = {\n  main: string;\n  ticks: string;\n  grid: string;\n  head: string;\n  blackPlayer: string;\n  whitePlayer: string;\n  researcher: string;\n};\n\nfunction getColorPalette(thema: Thema): ColorPalette {\n  switch (thema) {\n    default:\n      return {\n        main: \"black\",\n        ticks: \"dimgray\",\n        grid: \"lightgray\",\n        head: \"red\",\n        blackPlayer: \"royalblue\",\n        whitePlayer: \"darkorange\",\n        researcher: \"darkgreen\",\n      };\n    case Thema.DARK:\n      return {\n        main: \"white\",\n        ticks: \"darkgray\",\n        grid: \"dimgray\",\n        head: \"red\",\n        blackPlayer: \"deepskyblue\",\n        whitePlayer: \"orange\",\n        researcher: \"mediumseagreen\",\n      };\n  }\n}\n\nexport enum EvaluationChartType {\n  RAW = \"raw\",\n  WIN_RATE = \"winRate\",\n}\n\nexport default defineComponent({\n  name: \"EvaluationChart\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n    type: {\n      type: String as PropType<EvaluationChartType>,\n      required: true,\n    },\n  },\n  setup(props) {\n    const canvasRef: Ref = ref(null);\n    const store = useStore();\n    let chart: Chart;\n    let maxScore = MAX_SCORE;\n    let minScore = MIN_SCORE;\n    if (props.type === EvaluationChartType.WIN_RATE) {\n      maxScore = 100;\n      minScore = 0;\n    }\n\n    const buildDataset = (\n      borderColor: ChartColor,\n      series: Series,\n      record: ImmutableRecord,\n      appSetting: AppSetting\n    ) => {\n      const dataPoints: { x: number; y: number }[] = [];\n      const nodes = record.moves;\n      for (const node of nodes) {\n        const searchInfo = getSearchInfo(node, series);\n        if (!searchInfo) {\n          continue;\n        }\n        const score = getScore(\n          searchInfo,\n          props.type,\n          appSetting.coefficientInSigmoid\n        );\n        if (score !== undefined) {\n          dataPoints.push({\n            x: node.number,\n            y: score,\n          });\n        }\n      }\n      const lastNode = nodes[nodes.length - 1];\n      if (\n        (series === Series.BLACK_PLAYER &&\n          lastNode.nextColor === Color.BLACK) ||\n        (series === Series.WHITE_PLAYER && lastNode.nextColor === Color.WHITE)\n      ) {\n        const data = lastNode.customData as RecordCustomData;\n        if (data && data.enemySearchInfo) {\n          const score = getScore(\n            data.enemySearchInfo,\n            props.type,\n            appSetting.coefficientInSigmoid\n          );\n          if (score !== undefined) {\n            dataPoints.push({\n              x: lastNode.number + 1,\n              y: score,\n            });\n          }\n        }\n      }\n      return {\n        label: getSeriesName(series),\n        borderColor,\n        data: dataPoints,\n        showLine: true,\n      };\n    };\n\n    const verticalLine = (record: ImmutableRecord, palette: ColorPalette) => {\n      return {\n        label: \"現在の局面\",\n        borderColor: palette.head,\n        data: [\n          { x: record.current.number, y: maxScore },\n          { x: record.current.number, y: minScore },\n        ],\n        showLine: true,\n        pointBorderWidth: 0,\n        pointRadius: 0,\n      };\n    };\n\n    const buildDatasets = (\n      record: ImmutableRecord,\n      appSetting: AppSetting,\n      palette: ColorPalette\n    ) => {\n      return [\n        verticalLine(record, palette),\n        buildDataset(\n          palette.blackPlayer,\n          Series.BLACK_PLAYER,\n          record,\n          appSetting\n        ),\n        buildDataset(\n          palette.whitePlayer,\n          Series.WHITE_PLAYER,\n          record,\n          appSetting\n        ),\n        buildDataset(palette.researcher, Series.RESEARCHER, record, appSetting),\n      ];\n    };\n\n    const buildScalesOption = (\n      record: ImmutableRecord,\n      palette: ColorPalette\n    ) => {\n      return {\n        x: {\n          min: 0,\n          max: record.length + 10,\n          ticks: { color: palette.ticks },\n          grid: { color: palette.grid },\n        },\n        y: {\n          min: minScore,\n          max: maxScore,\n          ticks: { color: palette.ticks },\n          grid: { color: palette.grid },\n        },\n      };\n    };\n\n    const updateChart = (record: ImmutableRecord, appSetting: AppSetting) => {\n      const palette = getColorPalette(appSetting.thema);\n      chart.data.datasets = buildDatasets(record, appSetting, palette);\n      chart.options.color = palette.main;\n      chart.options.scales = buildScalesOption(record, palette);\n      chart.update();\n    };\n\n    const onClick = (event: ChartEvent, _: ActiveElement[], chart: Chart) => {\n      if (event.x === null) {\n        return;\n      }\n      const width = chart.scales.x.max - chart.scales.x.min;\n      const displayWidth = chart.scales.x.right - chart.scales.x.left;\n      const x =\n        ((event.x - chart.scales.x.left) / displayWidth) * width +\n        chart.scales.x.min;\n      const number = Math.round(x);\n      store.changeMoveNumber(number);\n    };\n\n    onMounted(() => {\n      const canvas = canvasRef.value as HTMLCanvasElement;\n      const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n      chart = new Chart(context, {\n        type: \"scatter\",\n        data: {\n          datasets: [],\n        },\n        options: {\n          animation: {\n            duration: 0,\n          },\n          maintainAspectRatio: false,\n          events: [\"click\"],\n          onClick,\n        },\n      });\n      chart.draw();\n    });\n\n    onUnmounted(() => {\n      chart.destroy();\n    });\n\n    watch(\n      () => [store.record, store.appSetting],\n      ([record, appSetting]) =>\n        updateChart(record as ImmutableRecord, appSetting as AppSetting),\n      { deep: true }\n    );\n\n    watch(\n      () => [props.size],\n      ([size]) => {\n        chart.resize(size.width, size.height);\n      },\n      { deep: true }\n    );\n\n    return {\n      canvas: canvasRef,\n    };\n  },\n});\n","import { render } from \"./EvaluationChart.vue?vue&type=template&id=c92a42fc&scoped=true&ts=true\"\nimport script from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\nexport * from \"./EvaluationChart.vue?vue&type=script&lang=ts\"\n\nimport \"./EvaluationChart.vue?vue&type=style&index=0&id=c92a42fc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c92a42fc\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1fb9186d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"element\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"key\" }, \"ファイル\", -1))\nconst _hoisted_3 = { class: \"value\" }\nconst _hoisted_4 = { class: \"key\" }\nconst _hoisted_5 = [\"value\", \"onInput\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"div\", {\n      ref: \"root\",\n      class: \"root\",\n      style: _normalizeStyle(`height:${_ctx.size.height}px`)\n    }, [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.filePath || \"（新規棋譜）\"), 1)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.list, (element) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: element.key,\n          class: \"element\"\n        }, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(element.displayName), 1),\n          _createElementVNode(\"input\", {\n            class: \"value\",\n            value: element.value,\n            onInput: ($event: any) => (_ctx.change($event, element.key))\n          }, null, 40, _hoisted_5)\n        ]))\n      }), 128))\n    ], 4)\n  ]))\n}","\nimport { getStandardMetadataDisplayName, RecordMetadataKey } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, Ref, ref } from \"vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\n\nexport default defineComponent({\n  name: \"RecordComment\",\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup() {\n    const root: Ref = ref(null);\n    const store = useStore();\n    const filePath = computed(() => store.recordFilePath);\n    const list = computed(() => {\n      return Object.values(RecordMetadataKey).map((key) => {\n        const metadata = store.record.metadata;\n        return {\n          key: key,\n          displayName: getStandardMetadataDisplayName(key),\n          value: metadata.getStandardMetadata(key) || \"\",\n        };\n      });\n    });\n\n    onMounted(() => {\n      root.value.addEventListener(\"copy\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n      root.value.addEventListener(\"paste\", (event: ClipboardEvent) => {\n        event.stopPropagation();\n      });\n    });\n\n    const change = (event: Event, key: RecordMetadataKey) => {\n      const input = event.target as HTMLInputElement;\n      store.updateStandardRecordMetadata({\n        key,\n        value: input.value,\n      });\n    };\n\n    return {\n      root,\n      filePath,\n      list,\n      change,\n    };\n  },\n});\n","import { render } from \"./RecordInfo.vue?vue&type=template&id=1fb9186d&scoped=true&ts=true\"\nimport script from \"./RecordInfo.vue?vue&type=script&lang=ts\"\nexport * from \"./RecordInfo.vue?vue&type=script&lang=ts\"\n\nimport \"./RecordInfo.vue?vue&type=style&index=0&id=1fb9186d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1fb9186d\"]])\n\nexport default __exports__","\nimport { computed, defineComponent } from \"vue\";\nimport RecordComment from \"@/components/tab/RecordComment.vue\";\nimport EngineAnalytics from \"@/components/tab/EngineAnalytics.vue\";\nimport EvaluationChart, {\n  EvaluationChartType,\n} from \"@/components/tab/EvaluationChart.vue\";\nimport RecordInfo from \"@/components/tab/RecordInfo.vue\";\nimport { useStore } from \"@/store\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Tab } from \"@/settings/app\";\nimport { Icon } from \"@/assets/icons\";\nimport api from \"@/ipc/api\";\nimport { LogLevel } from \"@/ipc/log\";\nimport { toString } from \"@/helpers/string\";\n\nexport const headerHeight = 30;\n\nexport const minHeight = 240 + headerHeight;\n\nexport default defineComponent({\n  name: \"TabPane\",\n  components: {\n    RecordComment,\n    EngineAnalytics,\n    EvaluationChart,\n    RecordInfo,\n    ButtonIcon,\n  },\n  props: {\n    size: {\n      type: RectSize,\n      required: true,\n    },\n  },\n  setup(props) {\n    const store = useStore();\n    const changeSelect = (id: Tab) => {\n      store\n        .updateAppSetting({\n          tab: id,\n        })\n        .catch((e) => {\n          api.log(\n            LogLevel.WARN,\n            \"TabPane: failed to update app setting: \" + toString(e)\n          );\n        });\n    };\n    const activeTab = computed(() => store.appSetting.tab);\n    const contentSize = computed(() =>\n      props.size.reduce(new RectSize(0, headerHeight))\n    );\n    return {\n      activeTab,\n      contentSize,\n      headerHeight,\n      changeSelect,\n      Icon,\n      Tab,\n      EvaluationChartType,\n    };\n  },\n});\n","import { render } from \"./TabPane.vue?vue&type=template&id=05336efe&scoped=true&ts=true\"\nimport script from \"./TabPane.vue?vue&type=script&lang=ts\"\nexport * from \"./TabPane.vue?vue&type=script&lang=ts\"\n\nimport \"./TabPane.vue?vue&type=style&index=0&id=05336efe&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-05336efe\"]])\n\nexport default __exports__","\nimport {\n  reactive,\n  onMounted,\n  onUnmounted,\n  defineComponent,\n  computed,\n  ref,\n} from \"vue\";\nimport BoardPane from \"./BoardPane.vue\";\nimport RecordPane, { minWidth as minRecordWidth } from \"./RecordPane.vue\";\nimport TabPane, {\n  headerHeight as informationHeaderHeight,\n  minHeight as minTabHeight,\n} from \"./TabPane.vue\";\nimport { RectSize } from \"@/components/primitive/Types\";\nimport { useStore } from \"@/store\";\nimport { Tab } from \"@/settings/app\";\n\nexport default defineComponent({\n  name: \"StandardLayout\",\n  components: {\n    BoardPane,\n    RecordPane,\n    TabPane,\n  },\n  setup() {\n    const windowSize = reactive(new RectSize(0, 0));\n    const boardPaneSize = ref(new RectSize(0, 0));\n\n    const updateSize = () => {\n      windowSize.width = window.innerWidth;\n      windowSize.height = window.innerHeight;\n    };\n\n    onMounted(() => {\n      updateSize();\n      window.addEventListener(\"resize\", updateSize);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", updateSize);\n    });\n\n    const onBoardPaneResize = (size: RectSize) => {\n      boardPaneSize.value = size;\n    };\n\n    const boardPaneMaxSize = computed(() => {\n      const minTabPaneHeight =\n        useStore().appSetting.tab !== Tab.INVISIBLE\n          ? minTabHeight\n          : informationHeaderHeight;\n      return new RectSize(\n        windowSize.width - minRecordWidth,\n        windowSize.height - minTabPaneHeight\n      );\n    });\n\n    const recordPaneStyle = computed(() => {\n      return {\n        width: `${windowSize.width - boardPaneSize.value.width}px`,\n        height: `${boardPaneSize.value.height}px`,\n      };\n    });\n\n    const bottomPaneSize = computed(() => {\n      return new RectSize(\n        windowSize.width,\n        windowSize.height - boardPaneSize.value.height\n      );\n    });\n\n    return {\n      boardPaneMaxSize,\n      recordPaneStyle,\n      bottomPaneSize,\n      onBoardPaneResize,\n    };\n  },\n});\n","import { render } from \"./StandardLayout.vue?vue&type=template&id=c97084ae&scoped=true&ts=true\"\nimport script from \"./StandardLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./StandardLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./StandardLayout.vue?vue&type=style&index=0&id=c97084ae&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c97084ae\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-280b0f37\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"対局\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"players\" }\nconst _hoisted_5 = { class: \"player\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"先手（下手）\", -1))\nconst _hoisted_7 = { class: \"player\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"後手（上手）\", -1))\nconst _hoisted_9 = { class: \"players-control\" }\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" 先後入れ替え \")\nconst _hoisted_11 = { class: \"dialog-form-areas-h\" }\nconst _hoisted_12 = { class: \"dialog-form-area time-limit\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"時間\", -1))\nconst _hoisted_14 = { class: \"dialog-form-item\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"持ち時間\", -1))\nconst _hoisted_16 = {\n  ref: \"hours\",\n  class: \"time\",\n  type: \"number\",\n  min: \"0\",\n  max: \"99\",\n  step: \"1\"\n}\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"時間\", -1))\nconst _hoisted_18 = {\n  ref: \"minutes\",\n  class: \"time\",\n  type: \"number\",\n  min: \"0\",\n  max: \"59\",\n  step: \"1\"\n}\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"分\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"秒読み\", -1))\nconst _hoisted_22 = {\n  ref: \"byoyomi\",\n  class: \"time\",\n  type: \"number\",\n  min: \"0\",\n  max: \"60\",\n  step: \"1\"\n}\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_24 = { class: \"dialog-form-item\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"増加\", -1))\nconst _hoisted_26 = {\n  ref: \"increment\",\n  class: \"time\",\n  type: \"number\",\n  min: \"0\",\n  max: \"99\",\n  step: \"1\"\n}\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒\", -1))\nconst _hoisted_28 = { class: \"dialog-form-item\" }\nconst _hoisted_29 = {\n  id: \"enable-engine-timeout\",\n  ref: \"enableEngineTimeout\",\n  type: \"checkbox\"\n}\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"enable-engine-timeout\" }, \"エンジンの時間切れあり\", -1))\nconst _hoisted_31 = { class: \"dialog-form-area flags\" }\nconst _hoisted_32 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"top-label\" }, \"その他\", -1))\nconst _hoisted_33 = { class: \"dialog-form-item\" }\nconst _hoisted_34 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"開始局面\", -1))\nconst _hoisted_35 = { ref: \"startPosition\" }\nconst _hoisted_36 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"current\\\" data-v-280b0f37>現在の局面</option><option value=\\\"standard\\\" data-v-280b0f37>平手</option><option value=\\\"handicapLance\\\" data-v-280b0f37>香落ち</option><option value=\\\"handicapRightLance\\\" data-v-280b0f37>右香落ち</option><option value=\\\"handicapBishop\\\" data-v-280b0f37>角落ち</option><option value=\\\"handicapRook\\\" data-v-280b0f37>飛車落ち</option><option value=\\\"handicapRookLance\\\" data-v-280b0f37>飛車香落ち</option><option value=\\\"handicap2Pieces\\\" data-v-280b0f37>2枚落ち</option><option value=\\\"handicap4Pieces\\\" data-v-280b0f37>4枚落ち</option><option value=\\\"handicap6Pieces\\\" data-v-280b0f37>6枚落ち</option><option value=\\\"handicap8Pieces\\\" data-v-280b0f37>8枚落ち</option>\", 11)\nconst _hoisted_47 = [\n  _hoisted_36\n]\nconst _hoisted_48 = { class: \"dialog-form-item\" }\nconst _hoisted_49 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"最大手数\", -1))\nconst _hoisted_50 = {\n  ref: \"maxMoves\",\n  class: \"number\",\n  type: \"number\",\n  min: \"1\"\n}\nconst _hoisted_51 = { class: \"dialog-form-item\" }\nconst _hoisted_52 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label\" }, \"連続対局\", -1))\nconst _hoisted_53 = {\n  ref: \"repeat\",\n  class: \"number\",\n  type: \"number\",\n  min: \"1\"\n}\nconst _hoisted_54 = { class: \"dialog-form-item\" }\nconst _hoisted_55 = {\n  id: \"swap-players\",\n  ref: \"swapPlayers\",\n  type: \"checkbox\"\n}\nconst _hoisted_56 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"swap-players\" }, \"1局ごとに手番を入れ替える\", -1))\nconst _hoisted_57 = { class: \"dialog-form-item\" }\nconst _hoisted_58 = {\n  id: \"enable-comment\",\n  ref: \"enableComment\",\n  type: \"checkbox\"\n}\nconst _hoisted_59 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"enable-comment\" }, \"コメントを出力する\", -1))\nconst _hoisted_60 = { class: \"dialog-form-item\" }\nconst _hoisted_61 = {\n  id: \"enable-auto-save\",\n  ref: \"enableAutoSave\",\n  type: \"checkbox\"\n}\nconst _hoisted_62 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"enable-auto-save\" }, \"棋譜を自動で保存する\", -1))\nconst _hoisted_63 = { class: \"dialog-form-item\" }\nconst _hoisted_64 = {\n  id: \"human-is-front\",\n  ref: \"humanIsFront\",\n  type: \"checkbox\"\n}\nconst _hoisted_65 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"human-is-front\" }, \"人を手前に表示する\", -1))\nconst _hoisted_66 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PlayerSelector = _resolveComponent(\"PlayerSelector\")!\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _hoisted_6,\n            _createVNode(_component_PlayerSelector, {\n              players: _ctx.players,\n              \"player-uri\": _ctx.blackPlayerURI,\n              \"engine-settings\": _ctx.engineSettings.json,\n              \"display-ponder-state\": true,\n              \"display-thread-state\": true,\n              \"display-multi-pv-state\": true,\n              onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n              onSelectPlayer: _ctx.onSelectBlackPlayer\n            }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _hoisted_8,\n            (_ctx.whitePlayerURI)\n              ? (_openBlock(), _createBlock(_component_PlayerSelector, {\n                  key: 0,\n                  players: _ctx.players,\n                  \"player-uri\": _ctx.whitePlayerURI,\n                  \"engine-settings\": _ctx.engineSettings.json,\n                  \"display-ponder-state\": true,\n                  \"display-thread-state\": true,\n                  \"display-multi-pv-state\": true,\n                  onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n                  onSelectPlayer: _ctx.onSelectWhitePlayer\n                }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"]))\n              : _createCommentVNode(\"\", true)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onSwapColor && _ctx.onSwapColor(...args)))\n          }, [\n            _createVNode(_component_ButtonIcon, {\n              class: \"icon\",\n              icon: _ctx.Icon.SWAP_H\n            }, null, 8, [\"icon\"]),\n            _hoisted_10\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_11, [\n        _createElementVNode(\"div\", _hoisted_12, [\n          _hoisted_13,\n          _createElementVNode(\"div\", _hoisted_14, [\n            _hoisted_15,\n            _createElementVNode(\"input\", _hoisted_16, null, 512),\n            _hoisted_17,\n            _createElementVNode(\"input\", _hoisted_18, null, 512),\n            _hoisted_19\n          ]),\n          _createElementVNode(\"div\", _hoisted_20, [\n            _hoisted_21,\n            _createElementVNode(\"input\", _hoisted_22, null, 512),\n            _hoisted_23\n          ]),\n          _createElementVNode(\"div\", _hoisted_24, [\n            _hoisted_25,\n            _createElementVNode(\"input\", _hoisted_26, null, 512),\n            _hoisted_27\n          ]),\n          _createElementVNode(\"div\", _hoisted_28, [\n            _createElementVNode(\"input\", _hoisted_29, null, 512),\n            _hoisted_30\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_31, [\n          _hoisted_32,\n          _createElementVNode(\"div\", _hoisted_33, [\n            _hoisted_34,\n            _createElementVNode(\"select\", _hoisted_35, _hoisted_47, 512)\n          ]),\n          _createElementVNode(\"div\", _hoisted_48, [\n            _hoisted_49,\n            _createElementVNode(\"input\", _hoisted_50, null, 512)\n          ]),\n          _createElementVNode(\"div\", _hoisted_51, [\n            _hoisted_52,\n            _createElementVNode(\"input\", _hoisted_53, null, 512)\n          ]),\n          _createElementVNode(\"div\", _hoisted_54, [\n            _createElementVNode(\"input\", _hoisted_55, null, 512),\n            _hoisted_56\n          ]),\n          _createElementVNode(\"div\", _hoisted_57, [\n            _createElementVNode(\"input\", _hoisted_58, null, 512),\n            _hoisted_59\n          ]),\n          _createElementVNode(\"div\", _hoisted_60, [\n            _createElementVNode(\"input\", _hoisted_61, null, 512),\n            _hoisted_62\n          ]),\n          _createElementVNode(\"div\", _hoisted_63, [\n            _createElementVNode(\"input\", _hoisted_64, null, 512),\n            _hoisted_65\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_66, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onStart()))\n        }, \"対局開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","export function readInputAsNumber(input: HTMLInputElement): number {\n  let value = Number(input.value);\n  if (input.max) {\n    value = Math.min(value, Number(input.max));\n  }\n  if (input.min) {\n    value = Math.max(value, Number(input.min));\n  }\n  return value;\n}\n","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2ccfb2d7\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"root\" }\nconst _hoisted_2 = [\"value\"]\nconst _hoisted_3 = [\"value\"]\nconst _hoisted_4 = {\n  key: 0,\n  class: \"player-info\"\n}\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"player-info-key\" }, \"先読み(Ponder):\", -1))\nconst _hoisted_6 = { class: \"player-info-value\" }\nconst _hoisted_7 = {\n  key: 1,\n  class: \"player-info\"\n}\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"player-info-key\" }, \"スレッド数:\", -1))\nconst _hoisted_9 = { class: \"player-info-value\" }\nconst _hoisted_10 = {\n  key: 2,\n  class: \"player-info\"\n}\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"player-info-key\" }, \"マルチPV:\", -1))\nconst _hoisted_12 = { class: \"player-info-value\" }\nconst _hoisted_13 = [\"disabled\"]\nconst _hoisted_14 = /*#__PURE__*/_createTextVNode(\" 設定 \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"select\", {\n          ref: \"playerSelect\",\n          class: \"player-select\",\n          size: \"1\",\n          value: _ctx.playerUri,\n          onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onPlayerChange && _ctx.onPlayerChange(...args)))\n        }, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.players, (player) => {\n            return (_openBlock(), _createElementBlock(\"option\", {\n              key: player.uri,\n              value: player.uri\n            }, _toDisplayString(player.name), 9, _hoisted_3))\n          }), 128))\n        ], 40, _hoisted_2),\n        (_ctx.displayPonderState)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n              _hoisted_5,\n              _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.ponderState || \"---\"), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (_ctx.displayThreadState)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n              _hoisted_8,\n              _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_ctx.threadState || \"---\"), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        (_ctx.displayMultiPvState)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n              _hoisted_11,\n              _createElementVNode(\"span\", _hoisted_12, _toDisplayString(_ctx.multiPVState || \"---\"), 1)\n            ]))\n          : _createCommentVNode(\"\", true),\n        _createElementVNode(\"button\", {\n          class: \"player-setting\",\n          disabled: !_ctx.isPlayerSettingEnabled,\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.openPlayerSetting && _ctx.openPlayerSetting(...args)))\n        }, [\n          _createVNode(_component_ButtonIcon, {\n            class: \"icon\",\n            icon: _ctx.Icon.SETTINGS\n          }, null, 8, [\"icon\"]),\n          _hoisted_14\n        ], 8, _hoisted_13)\n      ])\n    ]),\n    (_ctx.engineSettingDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          \"latest-engine-setting\": _ctx.engineSettingDialog,\n          \"ok-button-text\": \"保存\",\n          onOk: _ctx.savePlayerSetting,\n          onCancel: _ctx.closePlayerSetting\n        }, null, 8, [\"latest-engine-setting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-63a94682\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area option-list\" }\nconst _hoisted_4 = { class: \"option\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"エンジン名\", -1))\nconst _hoisted_6 = { class: \"option-unchangeable\" }\nconst _hoisted_7 = { class: \"option\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"作者\", -1))\nconst _hoisted_9 = { class: \"option-unchangeable\" }\nconst _hoisted_10 = { class: \"option\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"場所\", -1))\nconst _hoisted_12 = { class: \"option-unchangeable\" }\nconst _hoisted_13 = { class: \"option\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"option-name\" }, \"表示名\", -1))\nconst _hoisted_15 = {\n  ref: \"engineNameInput\",\n  class: \"option-value-text\",\n  type: \"text\",\n  name: \"ElectronShogiEngineName\"\n}\nconst _hoisted_16 = { class: \"option-name\" }\nconst _hoisted_17 = [\"id\", \"min\", \"max\", \"name\"]\nconst _hoisted_18 = [\"id\", \"name\"]\nconst _hoisted_19 = [\"id\", \"name\"]\nconst _hoisted_20 = [\"onClick\"]\nconst _hoisted_21 = [\"id\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"true\" }, \"ON\", -1))\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"false\" }, \"OFF\", -1))\nconst _hoisted_25 = [\n  _hoisted_22,\n  _hoisted_23,\n  _hoisted_24\n]\nconst _hoisted_26 = [\"id\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"\" }, \"既定値\", -1))\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"onClick\"]\nconst _hoisted_30 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.engine.defaultName), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _hoisted_8,\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(_ctx.engine.author), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _hoisted_11,\n          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_ctx.engine.path), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"input\", _hoisted_15, null, 512)\n        ]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.options, (option) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: option.name,\n            class: \"option\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_16, _toDisplayString(option.name), 1),\n            (option.type === 'spin')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 0,\n                  id: option.inputId,\n                  class: \"option-value-number\",\n                  type: \"number\",\n                  min: option.min,\n                  max: option.max,\n                  step: \"1\",\n                  name: option.name\n                }, null, 8, _hoisted_17))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'string')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 1,\n                  id: option.inputId,\n                  class: \"option-value-text\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_18))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"input\", {\n                  key: 2,\n                  id: option.inputId,\n                  class: \"option-value-filename\",\n                  type: \"text\",\n                  name: option.name\n                }, null, 8, _hoisted_19))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'filename')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 3,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.selectFile(option.inputId))\n                }, \" 選択 \", 8, _hoisted_20))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'check')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 4,\n                  id: option.inputId,\n                  class: \"option-value-check\"\n                }, _hoisted_25, 8, _hoisted_21))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'combo')\n              ? (_openBlock(), _createElementBlock(\"select\", {\n                  key: 5,\n                  id: option.inputId,\n                  class: \"option-value-combo\"\n                }, [\n                  _hoisted_27,\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(option.vars, (v) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                      key: v,\n                      value: v\n                    }, _toDisplayString(v), 9, _hoisted_28))\n                  }), 128))\n                ], 8, _hoisted_26))\n              : _createCommentVNode(\"\", true),\n            (option.type === 'button')\n              ? (_openBlock(), _createElementBlock(\"button\", {\n                  key: 6,\n                  class: \"dialog-button\",\n                  onClick: ($event: any) => (_ctx.sendOption(option.name))\n                }, \" 実行 \", 8, _hoisted_29))\n              : _createCommentVNode(\"\", true)\n          ]))\n        }), 128))\n      ]),\n      _createElementVNode(\"button\", {\n        class: \"dialog-wide-button\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.reset()))\n      }, \" エンジンの既定値に戻す \"),\n      _createElementVNode(\"div\", _hoisted_30, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.ok()))\n        }, _toDisplayString(_ctx.okButtonText), 1),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { getFormItemByID, showModalDialog } from \"@/helpers/dialog\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport api from \"@/ipc/api\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  mergeUSIEngineSetting,\n  USIEngineSetting,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, PropType, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"USIEngineOptionDialog\",\n  props: {\n    latestEngineSetting: {\n      type: Object as PropType<USIEngineSetting>,\n      required: true,\n    },\n    okButtonText: {\n      type: String,\n      required: false,\n      default: \"OK\",\n    },\n  },\n  emits: [\"ok\", \"cancel\"],\n  setup(props, context) {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const engineNameInput: Ref = ref(null);\n    const latest = props.latestEngineSetting as USIEngineSetting;\n    const engine = ref(latest);\n\n    const options = computed(() => {\n      return Object.values(engine.value.options)\n        .sort((a, b): number => {\n          const aIsUSI = a.name.startsWith(\"USI_\");\n          const bIsUSI = b.name.startsWith(\"USI_\");\n          if (aIsUSI !== bIsUSI) {\n            return aIsUSI ? -1 : 1;\n          }\n          return a.name < b.name ? -1 : 1;\n        })\n        .map((option, index) => {\n          return {\n            ...option,\n            inputId: \"usiEngineOptionDialogOption\" + index,\n            value: getUSIEngineOptionCurrentValue(option),\n          };\n        });\n    });\n\n    store.retainBussyState();\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        engine.value = await api.getUSIEngineInfo(latest.path);\n        mergeUSIEngineSetting(engine.value, latest);\n        engineNameInput.value.value = engine.value.name;\n        for (const option of options.value) {\n          const elem = getFormItemByID(option.inputId);\n          if (elem && option.value !== undefined) {\n            elem.value = option.value + \"\";\n          }\n        }\n      } catch (e) {\n        store.pushError(e);\n        context.emit(\"cancel\");\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const selectFile = async (id: string) => {\n      store.retainBussyState();\n      try {\n        const path = await api.showSelectFileDialog();\n        const elem = getFormItemByID(id);\n        if (path && elem) {\n          elem.value = path;\n        }\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const sendOption = async (name: string) => {\n      store.retainBussyState();\n      try {\n        await api.sendUSISetOption(engine.value.path, name);\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const reset = () => {\n      engineNameInput.value.value = engine.value.defaultName;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          if (engine.value.options[option.name].default !== undefined) {\n            elem.value = engine.value.options[option.name].default + \"\";\n          } else {\n            elem.value = \"\";\n          }\n        }\n      }\n    };\n\n    const ok = () => {\n      engine.value.name = engineNameInput.value.value;\n      for (const option of options.value) {\n        const elem = getFormItemByID(option.inputId);\n        if (elem) {\n          engine.value.options[option.name].value = !elem.value\n            ? undefined\n            : option.type === \"spin\"\n            ? readInputAsNumber(elem as HTMLInputElement)\n            : elem.value;\n        }\n      }\n      context.emit(\"ok\", engine.value);\n    };\n\n    const cancel = () => {\n      context.emit(\"cancel\");\n    };\n\n    return {\n      engine,\n      dialog,\n      engineNameInput,\n      options,\n      selectFile,\n      sendOption,\n      reset,\n      ok,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineOptionDialog.vue?vue&type=template&id=63a94682&scoped=true&ts=true\"\nimport script from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineOptionDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineOptionDialog.vue?vue&type=style&index=0&id=63a94682&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-63a94682\"]])\n\nexport default __exports__","\nimport { computed, defineComponent, PropType, Ref, ref } from \"vue\";\nimport * as uri from \"@/uri\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport {\n  getUSIEngineOptionCurrentValue,\n  USIEngineSetting,\n  USIEngineSettings,\n  USIPonder,\n  USIMultiPV,\n  Threads,\n  NumberOfThreads,\n  MultiPV,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\n\ntype Player = {\n  name: string;\n  uri: string;\n};\n\nexport default defineComponent({\n  name: \"PlayerSelector\",\n  components: {\n    ButtonIcon,\n    USIEngineOptionDialog,\n  },\n  props: {\n    players: {\n      type: Array as PropType<Player[]>,\n      required: true,\n    },\n    playerUri: {\n      type: String,\n      required: true,\n    },\n    engineSettings: {\n      type: String,\n      required: true,\n    },\n    displayPonderState: {\n      type: Boolean,\n      default: false,\n    },\n    displayThreadState: {\n      type: Boolean,\n      default: false,\n    },\n    displayMultiPvState: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  emits: [\"select-player\", \"update-engine-setting\"],\n  setup(props, context) {\n    const store = useStore();\n    const playerSelect: Ref = ref(null);\n    const engineSettingDialog: Ref<USIEngineSetting | null> = ref(null);\n\n    const ponderState = computed(() => {\n      if (!uri.isUSIEngine(props.playerUri)) {\n        return null;\n      }\n      const settings = new USIEngineSettings(props.engineSettings);\n      const engine = settings.getEngine(props.playerUri);\n      return engine &&\n        getUSIEngineOptionCurrentValue(engine.options[USIPonder]) === \"true\"\n        ? \"ON\"\n        : \"OFF\";\n    });\n\n    const threadState = computed(() => {\n      if (!uri.isUSIEngine(props.playerUri)) {\n        return null;\n      }\n      const settings = new USIEngineSettings(props.engineSettings);\n      const engine = settings.getEngine(props.playerUri);\n      if (!engine) {\n        return null;\n      }\n      const threads =\n        getUSIEngineOptionCurrentValue(engine.options[Threads]) ||\n        getUSIEngineOptionCurrentValue(engine.options[NumberOfThreads]);\n      return threads;\n    });\n\n    const multiPVState = computed(() => {\n      if (!uri.isUSIEngine(props.playerUri)) {\n        return null;\n      }\n      const settings = new USIEngineSettings(props.engineSettings);\n      const engine = settings.getEngine(props.playerUri);\n      if (!engine) {\n        return null;\n      }\n      const multiPV =\n        getUSIEngineOptionCurrentValue(engine.options[USIMultiPV]) ||\n        getUSIEngineOptionCurrentValue(engine.options[MultiPV]);\n      return multiPV;\n    });\n\n    const isPlayerSettingEnabled = computed(() => {\n      return uri.isUSIEngine(props.playerUri);\n    });\n\n    const openPlayerSetting = () => {\n      if (uri.isUSIEngine(props.playerUri)) {\n        const settings = new USIEngineSettings(props.engineSettings);\n        const engine = settings.getEngine(props.playerUri);\n        if (!engine) {\n          store.pushError(\"利用可能なエンジンが選択されていません。\");\n          return;\n        }\n        engineSettingDialog.value = engine;\n      }\n    };\n\n    const savePlayerSetting = (setting: USIEngineSetting) => {\n      engineSettingDialog.value = null;\n      context.emit(\"update-engine-setting\", setting);\n    };\n\n    const closePlayerSetting = () => {\n      engineSettingDialog.value = null;\n    };\n\n    const onPlayerChange = () => {\n      context.emit(\"select-player\", playerSelect.value.value);\n    };\n\n    return {\n      playerSelect,\n      ponderState,\n      threadState,\n      multiPVState,\n      isPlayerSettingEnabled,\n      engineSettingDialog,\n      onPlayerChange,\n      openPlayerSetting,\n      savePlayerSetting,\n      closePlayerSetting,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./PlayerSelector.vue?vue&type=template&id=2ccfb2d7&scoped=true&ts=true\"\nimport script from \"./PlayerSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./PlayerSelector.vue?vue&type=script&lang=ts\"\n\nimport \"./PlayerSelector.vue?vue&type=style&index=0&id=2ccfb2d7&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2ccfb2d7\"]])\n\nexport default __exports__","\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed, onUpdated } from \"vue\";\nimport api, { isNative } from \"@/ipc/api\";\nimport { useStore } from \"@/store\";\nimport { CommentBehavior } from \"@/store/record\";\nimport {\n  defaultGameSetting,\n  GameSetting,\n  validateGameSetting,\n  validateGameSettingForWeb,\n} from \"@/settings/game\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport * as uri from \"@/uri\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { Icon } from \"@/assets/icons\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport PlayerSelector from \"@/components/dialog/PlayerSelector.vue\";\nimport { PlayerSetting } from \"@/settings/player\";\n\nexport default defineComponent({\n  name: \"GameDialog\",\n  components: {\n    ButtonIcon,\n    PlayerSelector,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const hours: Ref = ref(null);\n    const minutes: Ref = ref(null);\n    const byoyomi: Ref = ref(null);\n    const increment: Ref = ref(null);\n    const startPosition: Ref = ref(null);\n    const enableEngineTimeout: Ref = ref(null);\n    const maxMoves: Ref = ref(null);\n    const humanIsFront: Ref = ref(null);\n    const repeat: Ref = ref(null);\n    const swapPlayers: Ref = ref(null);\n    const enableComment: Ref = ref(null);\n    const enableAutoSave: Ref = ref(null);\n    const gameSetting = ref(defaultGameSetting());\n    const engineSettings = ref(new USIEngineSettings());\n    const blackPlayerURI = ref(\"\");\n    const whitePlayerURI = ref(\"\");\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      try {\n        gameSetting.value = await api.loadGameSetting();\n        engineSettings.value = await api.loadUSIEngineSetting();\n        blackPlayerURI.value = gameSetting.value.black.uri;\n        whitePlayerURI.value = gameSetting.value.white.uri;\n        showModalDialog(dialog.value);\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    let defaultValueApplied = false;\n    onUpdated(() => {\n      if (!defaultValueApplied) {\n        hours.value.value = Math.floor(\n          gameSetting.value.timeLimit.timeSeconds / 3600\n        );\n        minutes.value.value =\n          Math.floor(gameSetting.value.timeLimit.timeSeconds / 60) % 60;\n        byoyomi.value.value = gameSetting.value.timeLimit.byoyomi;\n        increment.value.value = gameSetting.value.timeLimit.increment;\n        startPosition.value.value =\n          gameSetting.value.startPosition !== undefined\n            ? gameSetting.value.startPosition\n            : \"current\";\n        enableEngineTimeout.value.checked =\n          gameSetting.value.enableEngineTimeout;\n        maxMoves.value.value = gameSetting.value.maxMoves;\n        humanIsFront.value.checked = gameSetting.value.humanIsFront;\n        repeat.value.value = gameSetting.value.repeat;\n        swapPlayers.value.checked = gameSetting.value.swapPlayers;\n        enableComment.value.checked = gameSetting.value.enableComment;\n        enableAutoSave.value.checked = gameSetting.value.enableAutoSave;\n        defaultValueApplied = true;\n      }\n    });\n\n    const buildPlayerSetting = (playerURI: string): PlayerSetting => {\n      if (\n        uri.isUSIEngine(playerURI) &&\n        engineSettings.value.hasEngine(playerURI)\n      ) {\n        const engine = engineSettings.value.getEngine(\n          playerURI\n        ) as USIEngineSetting;\n        return {\n          name: engine.name,\n          uri: playerURI,\n          usi: engine,\n        };\n      }\n      return {\n        name: \"人\",\n        uri: uri.ES_HUMAN,\n      };\n    };\n\n    const onStart = () => {\n      const gameSetting: GameSetting = {\n        black: buildPlayerSetting(blackPlayerURI.value),\n        white: buildPlayerSetting(whitePlayerURI.value),\n        timeLimit: {\n          timeSeconds:\n            (readInputAsNumber(hours.value) * 60 +\n              readInputAsNumber(minutes.value)) *\n            60,\n          byoyomi: readInputAsNumber(byoyomi.value),\n          increment: readInputAsNumber(increment.value),\n        },\n        startPosition:\n          startPosition.value.value !== \"current\"\n            ? startPosition.value.value\n            : undefined,\n        enableEngineTimeout: enableEngineTimeout.value.checked,\n        maxMoves: readInputAsNumber(maxMoves.value),\n        humanIsFront: humanIsFront.value.checked,\n        repeat: readInputAsNumber(repeat.value),\n        swapPlayers: swapPlayers.value.checked,\n        enableComment: enableComment.value.checked,\n        enableAutoSave: enableAutoSave.value.checked,\n      };\n      const error = isNative()\n        ? validateGameSetting(gameSetting)\n        : validateGameSettingForWeb(gameSetting);\n      if (error) {\n        store.pushError(error);\n      } else {\n        store.startGame(gameSetting);\n      }\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    const onUpdatePlayerSetting = async (setting: USIEngineSetting) => {\n      const clone = new USIEngineSettings(engineSettings.value.json);\n      clone.updateEngine(setting);\n      store.retainBussyState();\n      try {\n        await api.saveUSIEngineSetting(clone);\n        engineSettings.value = clone;\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const onSelectBlackPlayer = (uri: string) => {\n      blackPlayerURI.value = uri;\n    };\n    const onSelectWhitePlayer = (uri: string) => {\n      whitePlayerURI.value = uri;\n    };\n\n    const onSwapColor = () => {\n      [blackPlayerURI.value, whitePlayerURI.value] = [\n        whitePlayerURI.value,\n        blackPlayerURI.value,\n      ];\n    };\n\n    const players = computed(() => {\n      return [\n        { name: \"人\", uri: uri.ES_HUMAN },\n        ...engineSettings.value.engineList,\n      ];\n    });\n\n    return {\n      CommentBehavior,\n      dialog,\n      hours,\n      minutes,\n      byoyomi,\n      increment,\n      startPosition,\n      enableEngineTimeout,\n      maxMoves,\n      humanIsFront,\n      repeat,\n      swapPlayers,\n      enableComment,\n      enableAutoSave,\n      engineSettings,\n      blackPlayerURI,\n      whitePlayerURI,\n      players,\n      onStart,\n      onCancel,\n      onUpdatePlayerSetting,\n      onSelectBlackPlayer,\n      onSelectWhitePlayer,\n      onSwapColor,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./GameDialog.vue?vue&type=template&id=280b0f37&scoped=true&ts=true\"\nimport script from \"./GameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./GameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./GameDialog.vue?vue&type=style&index=0&id=280b0f37&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-280b0f37\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9f01fc12\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"root\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"通信対局（CSA プロトコル）\", -1))\nconst _hoisted_3 = {\n  key: 0,\n  class: \"dialog-form-area dialog-form-warning\"\n}\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-note\" }, \" 一部のログが無効になっています。 CSAプロトコルを使用した対局では各種ログの出力を推奨します。 アプリ設定からログを有効にしてアプリを再起動してください。 \", -1))\nconst _hoisted_5 = [\n  _hoisted_4\n]\nconst _hoisted_6 = { class: \"dialog-form-area\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"プレイヤー\", -1))\nconst _hoisted_8 = { class: \"dialog-form-area\" }\nconst _hoisted_9 = { class: \"dialog-form-item\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"履歴から選ぶ\", -1))\nconst _hoisted_11 = {\n  key: 0,\n  value: \"0\"\n}\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_14 = { class: \"dialog-form-item\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"接続先ホスト\", -1))\nconst _hoisted_16 = {\n  ref: \"host\",\n  class: \"long-text\",\n  list: \"csa-server-host\",\n  type: \"text\"\n}\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"datalist\", { id: \"csa-server-host\" }, [\n  /*#__PURE__*/_createElementVNode(\"option\", { value: \"gserver.computer-shogi.org\" }),\n  /*#__PURE__*/_createElementVNode(\"option\", { value: \"wdoor.c.u-tokyo.ac.jp\" }),\n  /*#__PURE__*/_createElementVNode(\"option\", { value: \"localhost\" })\n], -1))\nconst _hoisted_18 = { class: \"dialog-form-item\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"ポート番号\", -1))\nconst _hoisted_20 = {\n  ref: \"port\",\n  class: \"number\",\n  list: \"csa-server-port-number\",\n  type: \"number\"\n}\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"datalist\", { id: \"csa-server-port-number\" }, [\n  /*#__PURE__*/_createElementVNode(\"option\", { value: \"4081\" })\n], -1))\nconst _hoisted_22 = { class: \"dialog-form-item\" }\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"ID\", -1))\nconst _hoisted_24 = {\n  ref: \"id\",\n  class: \"long-text\",\n  type: \"text\"\n}\nconst _hoisted_25 = { class: \"dialog-form-item\" }\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"パスワード\", -1))\nconst _hoisted_27 = {\n  ref: \"password\",\n  class: \"long-text\",\n  type: \"password\"\n}\nconst _hoisted_28 = { class: \"dialog-form-item\" }\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"show-password\" }, \"パスワードを表示する\", -1))\nconst _hoisted_30 = { class: \"dialog-form-item\" }\nconst _hoisted_31 = {\n  id: \"save-history\",\n  ref: \"saveHistory\",\n  type: \"checkbox\",\n  checked: \"\"\n}\nconst _hoisted_32 = { for: \"save-history\" }\nconst _hoisted_33 = { class: \"dialog-form-area\" }\nconst _hoisted_34 = { class: \"dialog-form-item\" }\nconst _hoisted_35 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide number\" }, \"連続対局\", -1))\nconst _hoisted_36 = {\n  ref: \"repeat\",\n  type: \"number\",\n  min: \"1\"\n}\nconst _hoisted_37 = { class: \"dialog-form-item\" }\nconst _hoisted_38 = {\n  id: \"enable-comment\",\n  ref: \"enableComment\",\n  type: \"checkbox\"\n}\nconst _hoisted_39 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"enable-comment\" }, \"コメントを出力する\", -1))\nconst _hoisted_40 = { class: \"dialog-form-item\" }\nconst _hoisted_41 = {\n  id: \"enable-auto-save\",\n  ref: \"enableAutoSave\",\n  type: \"checkbox\"\n}\nconst _hoisted_42 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"enable-auto-save\" }, \"棋譜を自動で保存する\", -1))\nconst _hoisted_43 = { class: \"dialog-form-item\" }\nconst _hoisted_44 = {\n  id: \"auto-flip\",\n  ref: \"autoFlip\",\n  type: \"checkbox\"\n}\nconst _hoisted_45 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { for: \"auto-flip\" }, \"盤面の向きを自動で調整する\", -1))\nconst _hoisted_46 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PlayerSelector = _resolveComponent(\"PlayerSelector\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      (!_ctx.logEnabled)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _hoisted_5))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _hoisted_7,\n        _createVNode(_component_PlayerSelector, {\n          players: _ctx.players,\n          \"player-uri\": _ctx.playerURI,\n          \"engine-settings\": _ctx.engineSettings.json,\n          \"display-ponder-state\": true,\n          \"display-thread-state\": true,\n          \"display-multi-pv-state\": true,\n          onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n          onSelectPlayer: _ctx.onSelectPlayer\n        }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"])\n      ]),\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createElementVNode(\"div\", _hoisted_9, [\n          _hoisted_10,\n          _createElementVNode(\"select\", {\n            class: \"long-text\",\n            value: \"0\",\n            onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onChangeHistory && _ctx.onChangeHistory(...args)))\n          }, [\n            (_ctx.serverHistory.length === 0)\n              ? (_openBlock(), _createElementBlock(\"option\", _hoisted_11, \" 履歴がありません \"))\n              : _createCommentVNode(\"\", true),\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.serverHistory, (server) => {\n              return (_openBlock(), _createElementBlock(\"option\", {\n                key: server.index,\n                value: server.index\n              }, _toDisplayString(server.host) + \":\" + _toDisplayString(server.port) + \" \" + _toDisplayString(server.id), 9, _hoisted_12))\n            }), 128))\n          ], 32)\n        ]),\n        _hoisted_13,\n        _createElementVNode(\"div\", _hoisted_14, [\n          _hoisted_15,\n          _createElementVNode(\"input\", _hoisted_16, null, 512),\n          _hoisted_17\n        ]),\n        _createElementVNode(\"div\", _hoisted_18, [\n          _hoisted_19,\n          _createElementVNode(\"input\", _hoisted_20, null, 512),\n          _hoisted_21\n        ]),\n        _createElementVNode(\"div\", _hoisted_22, [\n          _hoisted_23,\n          _createElementVNode(\"input\", _hoisted_24, null, 512)\n        ]),\n        _createElementVNode(\"div\", _hoisted_25, [\n          _hoisted_26,\n          _createElementVNode(\"input\", _hoisted_27, null, 512)\n        ]),\n        _createElementVNode(\"div\", _hoisted_28, [\n          _createElementVNode(\"input\", {\n            id: \"show-password\",\n            type: \"checkbox\",\n            onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onTogglePasswordVisibility && _ctx.onTogglePasswordVisibility(...args)))\n          }, null, 32),\n          _hoisted_29\n        ]),\n        _createElementVNode(\"div\", _hoisted_30, [\n          _createElementVNode(\"input\", _hoisted_31, null, 512),\n          _createElementVNode(\"label\", _hoisted_32, \" 履歴に保存する（最新\" + _toDisplayString(_ctx.maxServerHistoryLenght) + \"件まで） \", 1)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_33, [\n        _createElementVNode(\"div\", _hoisted_34, [\n          _hoisted_35,\n          _createElementVNode(\"input\", _hoisted_36, null, 512)\n        ]),\n        _createElementVNode(\"div\", _hoisted_37, [\n          _createElementVNode(\"input\", _hoisted_38, null, 512),\n          _hoisted_39\n        ]),\n        _createElementVNode(\"div\", _hoisted_40, [\n          _createElementVNode(\"input\", _hoisted_41, null, 512),\n          _hoisted_42\n        ]),\n        _createElementVNode(\"div\", _hoisted_43, [\n          _createElementVNode(\"input\", _hoisted_44, null, 512),\n          _hoisted_45\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_46, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onStart()))\n        }, \"対局開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { ref, onMounted, defineComponent, Ref, computed, onUpdated } from \"vue\";\nimport api from \"@/ipc/api\";\nimport { useStore } from \"@/store\";\nimport {\n  maxServerHistoryLenght,\n  defaultCSAGameSetting,\n  CSAGameSetting,\n  validateCSAGameSetting,\n  buildCSAGameSettingByHistory,\n  defaultCSAGameSettingHistory,\n} from \"@/settings/csa\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport * as uri from \"@/uri\";\nimport { Icon } from \"@/assets/icons\";\nimport PlayerSelector from \"@/components/dialog/PlayerSelector.vue\";\nimport { PlayerSetting } from \"@/settings/player\";\nimport { readInputAsNumber } from \"@/helpers/form\";\n\nexport default defineComponent({\n  name: \"CSAGameDialog\",\n  components: {\n    PlayerSelector,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const host: Ref = ref(null);\n    const port: Ref = ref(null);\n    const id: Ref = ref(null);\n    const password: Ref = ref(null);\n    const saveHistory: Ref = ref(null);\n    const enableComment: Ref = ref(null);\n    const enableAutoSave: Ref = ref(null);\n    const repeat: Ref = ref(null);\n    const autoFlip: Ref = ref(null);\n    const history = ref(defaultCSAGameSettingHistory());\n    const defaultSetting = ref(defaultCSAGameSetting());\n    const engineSettings = ref(new USIEngineSettings());\n    const playerURI = ref(\"\");\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      try {\n        history.value = await api.loadCSAGameSettingHistory();\n        defaultSetting.value = buildCSAGameSettingByHistory(history.value, 0);\n        engineSettings.value = await api.loadUSIEngineSetting();\n        playerURI.value = defaultSetting.value.player.uri;\n        showModalDialog(dialog.value);\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    let defaultValueApplied = false;\n    onUpdated(() => {\n      if (!defaultValueApplied) {\n        host.value.value = defaultSetting.value.server.host;\n        port.value.value = defaultSetting.value.server.port;\n        id.value.value = defaultSetting.value.server.id;\n        password.value.value = defaultSetting.value.server.password;\n        enableComment.value.checked = defaultSetting.value.enableComment;\n        enableAutoSave.value.checked = defaultSetting.value.enableAutoSave;\n        repeat.value.value = defaultSetting.value.repeat;\n        autoFlip.value.checked = defaultSetting.value.autoFlip;\n        defaultValueApplied = true;\n      }\n    });\n\n    const buildPlayerSetting = (playerURI: string): PlayerSetting => {\n      if (\n        uri.isUSIEngine(playerURI) &&\n        engineSettings.value.hasEngine(playerURI)\n      ) {\n        const engine = engineSettings.value.getEngine(\n          playerURI\n        ) as USIEngineSetting;\n        return {\n          name: engine.name,\n          uri: playerURI,\n          usi: engine,\n        };\n      }\n      return {\n        name: \"人\",\n        uri: uri.ES_HUMAN,\n      };\n    };\n\n    const onStart = () => {\n      const csaGameSetting: CSAGameSetting = {\n        player: buildPlayerSetting(playerURI.value),\n        server: {\n          host: String(host.value.value || \"\").trim(),\n          port: Number(port.value.value),\n          id: String(id.value.value || \"\"),\n          password: String(password.value.value || \"\"),\n        },\n        enableComment: enableComment.value.checked,\n        enableAutoSave: enableAutoSave.value.checked,\n        repeat: readInputAsNumber(repeat.value),\n        autoFlip: autoFlip.value.checked,\n      };\n      const error = validateCSAGameSetting(csaGameSetting);\n      if (error) {\n        store.pushError(error);\n      } else {\n        store.loginCSAGame(csaGameSetting, {\n          saveHistory: saveHistory.value.checked,\n        });\n      }\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    const onUpdatePlayerSetting = async (setting: USIEngineSetting) => {\n      const clone = new USIEngineSettings(engineSettings.value.json);\n      clone.updateEngine(setting);\n      store.retainBussyState();\n      try {\n        await api.saveUSIEngineSetting(clone);\n        engineSettings.value = clone;\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const onSelectPlayer = (uri: string) => {\n      playerURI.value = uri;\n    };\n\n    const onTogglePasswordVisibility = (event: Event) => {\n      const checkbox = event.target as HTMLInputElement;\n      password.value.type = checkbox.checked ? \"text\" : \"password\";\n    };\n\n    const onChangeHistory = (event: Event) => {\n      const select = event.target as HTMLSelectElement;\n      const server = history.value.serverHistory[Number(select.value)];\n      if (server) {\n        host.value.value = server.host;\n        port.value.value = server.port;\n        id.value.value = server.id;\n        password.value.value = server.password;\n      }\n    };\n\n    const players = computed(() => {\n      return [\n        { name: \"人\", uri: uri.ES_HUMAN },\n        ...engineSettings.value.engineList,\n      ];\n    });\n\n    const serverHistory = computed(() => {\n      return history.value.serverHistory.map((serverSetting, index) => {\n        return {\n          index,\n          ...serverSetting,\n        };\n      });\n    });\n\n    const logEnabled = computed(() => {\n      return (\n        store.appSetting.enableCSALog &&\n        store.appSetting.enableAppLog &&\n        store.appSetting.enableUSILog\n      );\n    });\n\n    return {\n      maxServerHistoryLenght,\n      dialog,\n      host,\n      port,\n      id,\n      password,\n      saveHistory,\n      enableComment,\n      enableAutoSave,\n      repeat,\n      autoFlip,\n      engineSettings,\n      playerURI,\n      players,\n      serverHistory,\n      logEnabled,\n      onStart,\n      onCancel,\n      onUpdatePlayerSetting,\n      onSelectPlayer,\n      onTogglePasswordVisibility,\n      onChangeHistory,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./CSAGameDialog.vue?vue&type=template&id=9f01fc12&scoped=true&ts=true\"\nimport script from \"./CSAGameDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./CSAGameDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./CSAGameDialog.vue?vue&type=style&index=0&id=9f01fc12&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9f01fc12\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-34690848\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"root\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"検討\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = { class: \"dialog-form-item\" }\nconst _hoisted_5 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PlayerSelector = _resolveComponent(\"PlayerSelector\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createVNode(_component_PlayerSelector, {\n            players: _ctx.engines,\n            \"player-uri\": _ctx.engineURI,\n            \"engine-settings\": _ctx.engineSettings.json,\n            \"display-thread-state\": true,\n            \"display-multi-pv-state\": true,\n            onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n            onSelectPlayer: _ctx.onSelectPlayer\n          }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onStart()))\n        }, \"検討開始\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport api from \"@/ipc/api\";\nimport { defaultResearchSetting, ResearchSetting } from \"@/settings/research\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport PlayerSelector from \"@/components/dialog/PlayerSelector.vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  components: {\n    PlayerSelector,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const researchSetting = ref(defaultResearchSetting());\n    const engineSettings = ref(new USIEngineSettings());\n    const engineURI = ref(\"\");\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        researchSetting.value = await api.loadResearchSetting();\n        engineSettings.value = await api.loadUSIEngineSetting();\n        engineURI.value = researchSetting.value.usi?.uri || \"\";\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const engines = computed(() => engineSettings.value.engineList);\n\n    const onStart = () => {\n      if (\n        !engineURI.value ||\n        !engineSettings.value.hasEngine(engineURI.value)\n      ) {\n        store.pushError(\"エンジンを選択してください。\");\n        return;\n      }\n      const engineSetting = engineSettings.value.getEngine(engineURI.value);\n      const researchSetting: ResearchSetting = {\n        usi: engineSetting,\n      };\n      store.startResearch(researchSetting);\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    const onUpdatePlayerSetting = async (setting: USIEngineSetting) => {\n      const clone = new USIEngineSettings(engineSettings.value.json);\n      clone.updateEngine(setting);\n      store.retainBussyState();\n      try {\n        await api.saveUSIEngineSetting(clone);\n        engineSettings.value = clone;\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const onSelectPlayer = (uri: string) => {\n      engineURI.value = uri;\n    };\n\n    return {\n      dialog,\n      engineSettings,\n      engineURI,\n      engines,\n      onStart,\n      onCancel,\n      onUpdatePlayerSetting,\n      onSelectPlayer,\n    };\n  },\n});\n","import { render } from \"./ResearchDialog.vue?vue&type=template&id=34690848&scoped=true&ts=true\"\nimport script from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ResearchDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ResearchDialog.vue?vue&type=style&index=0&id=34690848&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-34690848\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0b032133\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"エンジン管理\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area engine-list\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"engine\"\n}\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = { class: \"engine-name\" }\nconst _hoisted_7 = [\"onClick\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = [\"onClick\"]\nconst _hoisted_10 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_USIEngineOptionDialog = _resolveComponent(\"USIEngineOptionDialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"dialog\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_ctx.engines.length === 0)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" エンジンが登録されていません。 \"))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.engines, (engine) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: engine.uri,\n              class: \"engine\",\n              value: engine.uri\n            }, [\n              _createElementVNode(\"div\", _hoisted_6, _toDisplayString(engine.name), 1),\n              _createElementVNode(\"button\", {\n                onClick: ($event: any) => (_ctx.openOptions(engine.uri))\n              }, \"設定\", 8, _hoisted_7),\n              _createElementVNode(\"button\", {\n                onClick: ($event: any) => (_ctx.duplicate(engine.uri))\n              }, \"複製\", 8, _hoisted_8),\n              _createElementVNode(\"button\", {\n                onClick: ($event: any) => (_ctx.remove(engine.uri))\n              }, \"削除\", 8, _hoisted_9)\n            ], 8, _hoisted_5))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"dialog-wide-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.add()))\n        }, \"追加\"),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n          }, \" 保存して閉じる \"),\n          _createElementVNode(\"button\", {\n            class: \"dialog-button\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n          }, \"キャンセル\")\n        ])\n      ], 512)\n    ]),\n    (_ctx.optionDialog)\n      ? (_openBlock(), _createBlock(_component_USIEngineOptionDialog, {\n          key: 0,\n          \"latest-engine-setting\": _ctx.optionDialog,\n          onOk: _ctx.optionOk,\n          onCancel: _ctx.optionCancel\n        }, null, 8, [\"latest-engine-setting\", \"onOk\", \"onCancel\"]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","\nimport api from \"@/ipc/api\";\nimport {\n  duplicateEngineSetting,\n  USIEngineSetting,\n  USIEngineSettings,\n} from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { ref, onMounted, defineComponent, Ref, computed } from \"vue\";\nimport USIEngineOptionDialog from \"@/components/dialog/USIEngineOptionDialog.vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\n\nexport default defineComponent({\n  name: \"USIEngineManagementDialog\",\n  components: {\n    USIEngineOptionDialog,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const optionDialog: Ref<USIEngineSetting | null> = ref(null);\n    const setting = ref(new USIEngineSettings());\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        setting.value = await api.loadUSIEngineSetting();\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const add = async () => {\n      try {\n        store.retainBussyState();\n        const path = await api.showSelectUSIEngineDialog();\n        if (!path) {\n          return;\n        }\n        setting.value.addEngine(await api.getUSIEngineInfo(path));\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const remove = (uri: string) => {\n      setting.value.removeEngine(uri);\n    };\n\n    const openOptions = (uri: string) => {\n      optionDialog.value = setting.value.getEngine(uri) as USIEngineSetting;\n    };\n\n    const duplicate = (uri: string) => {\n      const src = setting.value.getEngine(uri) as USIEngineSetting;\n      const engine = duplicateEngineSetting(src);\n      setting.value.addEngine(engine);\n    };\n\n    const saveAndClose = async () => {\n      try {\n        store.retainBussyState();\n        await api.saveUSIEngineSetting(setting.value as USIEngineSettings);\n        store.closeModalDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeModalDialog();\n    };\n\n    const optionOk = (engine: USIEngineSetting) => {\n      setting.value.updateEngine(engine);\n      optionDialog.value = null;\n    };\n\n    const optionCancel = () => {\n      optionDialog.value = null;\n    };\n\n    const engines = computed(() => setting.value.engineList);\n\n    return {\n      optionDialog,\n      dialog,\n      engines,\n      add,\n      remove,\n      openOptions,\n      duplicate,\n      saveAndClose,\n      cancel,\n      optionOk,\n      optionCancel,\n    };\n  },\n});\n","import { render } from \"./USIEngineManagementDialog.vue?vue&type=template&id=0b032133&scoped=true&ts=true\"\nimport script from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./USIEngineManagementDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./USIEngineManagementDialog.vue?vue&type=style&index=0&id=0b032133&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b032133\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-cc44b198\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"アプリ設定\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area settings\" }\nconst _hoisted_4 = { class: \"section\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"外観\", -1))\nconst _hoisted_6 = { class: \"dialog-form-item\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"テーマ\", -1))\nconst _hoisted_8 = [\"value\"]\nconst _hoisted_9 = [\"value\"]\nconst _hoisted_10 = { class: \"dialog-form-item\" }\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒画像\", -1))\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = [\"value\"]\nconst _hoisted_14 = { class: \"dialog-form-item\" }\nconst _hoisted_15 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"盤画像\", -1))\nconst _hoisted_16 = [\"value\"]\nconst _hoisted_17 = [\"value\"]\nconst _hoisted_18 = { class: \"dialog-form-item\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"段・筋を表示\", -1))\nconst _hoisted_20 = [\"checked\"]\nconst _hoisted_21 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_22 = { class: \"section\" }\nconst _hoisted_23 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"音\", -1))\nconst _hoisted_24 = { class: \"dialog-form-item\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"駒音の大きさ\", -1))\nconst _hoisted_26 = [\"value\"]\nconst _hoisted_27 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_28 = { class: \"dialog-form-item\" }\nconst _hoisted_29 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の大きさ\", -1))\nconst _hoisted_30 = [\"value\"]\nconst _hoisted_31 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_32 = { class: \"dialog-form-item\" }\nconst _hoisted_33 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の高さ\", -1))\nconst _hoisted_34 = [\"value\"]\nconst _hoisted_35 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"Hz (220 ~ 880)\", -1))\nconst _hoisted_36 = { class: \"dialog-form-item\" }\nconst _hoisted_37 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"時計音の対象\", -1))\nconst _hoisted_38 = [\"value\"]\nconst _hoisted_39 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"all\" }, \"全ての手番\", -1))\nconst _hoisted_40 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"onlyUser\" }, \"人の手番のみ\", -1))\nconst _hoisted_41 = [\n  _hoisted_39,\n  _hoisted_40\n]\nconst _hoisted_42 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_43 = { class: \"section\" }\nconst _hoisted_44 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"ファイル\", -1))\nconst _hoisted_45 = { class: \"dialog-form-item\" }\nconst _hoisted_46 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"改行文字\", -1))\nconst _hoisted_47 = [\"value\"]\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"crlf\" }, \"CR + LF (Windows)\", -1))\nconst _hoisted_49 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"lf\" }, \"LF (UNIX/Mac)\", -1))\nconst _hoisted_50 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", { value: \"cr\" }, \"CR (90年代Mac)\", -1))\nconst _hoisted_51 = [\n  _hoisted_48,\n  _hoisted_49,\n  _hoisted_50\n]\nconst _hoisted_52 = { class: \"dialog-form-item\" }\nconst _hoisted_53 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"棋譜の自動保存先\", -1))\nconst _hoisted_54 = [\"value\"]\nconst _hoisted_55 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_56 = { class: \"section\" }\nconst _hoisted_57 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"評価値・期待勝率\", -1))\nconst _hoisted_58 = { class: \"dialog-form-item\" }\nconst _hoisted_59 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"勝率換算係数\", -1))\nconst _hoisted_60 = [\"value\"]\nconst _hoisted_61 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"(推奨: 600 から 1500 まで)\", -1))\nconst _hoisted_62 = { class: \"dialog-form-item\" }\nconst _hoisted_63 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"緩手の閾値\", -1))\nconst _hoisted_64 = [\"value\"]\nconst _hoisted_65 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_66 = { class: \"dialog-form-item\" }\nconst _hoisted_67 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"疑問手の閾値\", -1))\nconst _hoisted_68 = [\"value\"]\nconst _hoisted_69 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_70 = { class: \"dialog-form-item\" }\nconst _hoisted_71 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"悪手の閾値\", -1))\nconst _hoisted_72 = [\"value\"]\nconst _hoisted_73 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_74 = { class: \"dialog-form-item\" }\nconst _hoisted_75 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"大悪手の閾値\", -1))\nconst _hoisted_76 = [\"value\"]\nconst _hoisted_77 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"%\", -1))\nconst _hoisted_78 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_79 = { class: \"section\" }\nconst _hoisted_80 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"section-title\" }, \"開発者向け\", -1))\nconst _hoisted_81 = { class: \"dialog-form-area dialog-form-warning\" }\nconst _hoisted_82 = {\n  key: 0,\n  class: \"dialog-form-note\"\n}\nconst _hoisted_83 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-note\" }, \" ※ログの有効化にはアプリの再起動が必要です。 \", -1))\nconst _hoisted_84 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-note\" }, \" ※ログの出力先は「デバッグ」-「ログファイルの場所を開く」で開きます。 \", -1))\nconst _hoisted_85 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-note\" }, \" ※現在、古いログファイルの自動削除機能はありません。 \", -1))\nconst _hoisted_86 = { class: \"dialog-form-item\" }\nconst _hoisted_87 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"アプリログを出力\", -1))\nconst _hoisted_88 = [\"checked\"]\nconst _hoisted_89 = { class: \"dialog-form-item\" }\nconst _hoisted_90 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"USI通信ログを出力\", -1))\nconst _hoisted_91 = [\"checked\"]\nconst _hoisted_92 = { class: \"dialog-form-item\" }\nconst _hoisted_93 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"CSA通信ログを出力\", -1))\nconst _hoisted_94 = [\"checked\"]\nconst _hoisted_95 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createElementVNode(\"div\", _hoisted_6, [\n            _hoisted_7,\n            _createElementVNode(\"select\", {\n              ref: \"thema\",\n              value: _ctx.appSetting.thema\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.themaOptions, (themaOption) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: themaOption.value,\n                  value: themaOption.value\n                }, _toDisplayString(themaOption.name), 9, _hoisted_9))\n              }), 128))\n            ], 8, _hoisted_8)\n          ]),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _hoisted_11,\n            _createElementVNode(\"select\", {\n              ref: \"pieceImage\",\n              value: _ctx.appSetting.pieceImage\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.pieceImageTypes, (pieceImageType) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: pieceImageType.value,\n                  value: pieceImageType.value\n                }, _toDisplayString(pieceImageType.name), 9, _hoisted_13))\n              }), 128))\n            ], 8, _hoisted_12)\n          ]),\n          _createElementVNode(\"div\", _hoisted_14, [\n            _hoisted_15,\n            _createElementVNode(\"select\", {\n              ref: \"boardImage\",\n              value: _ctx.appSetting.boardImage\n            }, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.boardImageTypes, (boardImageType) => {\n                return (_openBlock(), _createElementBlock(\"option\", {\n                  key: boardImageType.value,\n                  value: boardImageType.value\n                }, _toDisplayString(boardImageType.name), 9, _hoisted_17))\n              }), 128))\n            ], 8, _hoisted_16)\n          ]),\n          _createElementVNode(\"div\", _hoisted_18, [\n            _hoisted_19,\n            _createElementVNode(\"input\", {\n              ref: \"displayBoardLabels\",\n              class: \"toggle\",\n              checked: _ctx.appSetting.boardLabelType != _ctx.BoardLabelType.NONE,\n              type: \"checkbox\"\n            }, null, 8, _hoisted_20)\n          ])\n        ]),\n        _hoisted_21,\n        _createElementVNode(\"div\", _hoisted_22, [\n          _hoisted_23,\n          _createElementVNode(\"div\", _hoisted_24, [\n            _hoisted_25,\n            _createElementVNode(\"input\", {\n              ref: \"pieceVolume\",\n              value: _ctx.appSetting.pieceVolume,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_26),\n            _hoisted_27\n          ]),\n          _createElementVNode(\"div\", _hoisted_28, [\n            _hoisted_29,\n            _createElementVNode(\"input\", {\n              ref: \"clockVolume\",\n              value: _ctx.appSetting.clockVolume,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_30),\n            _hoisted_31\n          ]),\n          _createElementVNode(\"div\", _hoisted_32, [\n            _hoisted_33,\n            _createElementVNode(\"input\", {\n              ref: \"clockPitch\",\n              value: _ctx.appSetting.clockPitch,\n              type: \"number\",\n              max: \"880\",\n              min: \"220\"\n            }, null, 8, _hoisted_34),\n            _hoisted_35\n          ]),\n          _createElementVNode(\"div\", _hoisted_36, [\n            _hoisted_37,\n            _createElementVNode(\"select\", {\n              ref: \"clockSoundTarget\",\n              value: _ctx.appSetting.clockSoundTarget\n            }, _hoisted_41, 8, _hoisted_38)\n          ])\n        ]),\n        _hoisted_42,\n        _createElementVNode(\"div\", _hoisted_43, [\n          _hoisted_44,\n          _createElementVNode(\"div\", _hoisted_45, [\n            _hoisted_46,\n            _createElementVNode(\"select\", {\n              ref: \"returnCode\",\n              value: _ctx.appSetting.returnCode\n            }, _hoisted_51, 8, _hoisted_47)\n          ]),\n          _createElementVNode(\"div\", _hoisted_52, [\n            _hoisted_53,\n            _createElementVNode(\"input\", {\n              ref: \"autoSaveDirectory\",\n              class: \"directory\",\n              value: _ctx.appSetting.autoSaveDirectory,\n              type: \"text\"\n            }, null, 8, _hoisted_54),\n            _createElementVNode(\"button\", {\n              class: \"dialog-button\",\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.selectAutoSaveDirectory && _ctx.selectAutoSaveDirectory(...args)))\n            }, \" 選択 \")\n          ])\n        ]),\n        _hoisted_55,\n        _createElementVNode(\"div\", _hoisted_56, [\n          _hoisted_57,\n          _createElementVNode(\"div\", _hoisted_58, [\n            _hoisted_59,\n            _createElementVNode(\"input\", {\n              ref: \"coefficientInSigmoid\",\n              value: _ctx.appSetting.coefficientInSigmoid,\n              type: \"number\",\n              max: \"10000\",\n              min: \"1\"\n            }, null, 8, _hoisted_60),\n            _hoisted_61\n          ]),\n          _createElementVNode(\"div\", _hoisted_62, [\n            _hoisted_63,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold1\",\n              value: _ctx.appSetting.badMoveLevelThreshold1,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_64),\n            _hoisted_65\n          ]),\n          _createElementVNode(\"div\", _hoisted_66, [\n            _hoisted_67,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold2\",\n              value: _ctx.appSetting.badMoveLevelThreshold2,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_68),\n            _hoisted_69\n          ]),\n          _createElementVNode(\"div\", _hoisted_70, [\n            _hoisted_71,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold3\",\n              value: _ctx.appSetting.badMoveLevelThreshold3,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_72),\n            _hoisted_73\n          ]),\n          _createElementVNode(\"div\", _hoisted_74, [\n            _hoisted_75,\n            _createElementVNode(\"input\", {\n              ref: \"badMoveLevelThreshold4\",\n              value: _ctx.appSetting.badMoveLevelThreshold4,\n              type: \"number\",\n              max: \"100\",\n              min: \"0\"\n            }, null, 8, _hoisted_76),\n            _hoisted_77\n          ])\n        ]),\n        _hoisted_78,\n        _createElementVNode(\"div\", _hoisted_79, [\n          _hoisted_80,\n          _createElementVNode(\"div\", _hoisted_81, [\n            (!_ctx.isNative)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_82, \" ※ブラウザ版でログは出力されません。 \"))\n              : _createCommentVNode(\"\", true),\n            _hoisted_83,\n            _hoisted_84,\n            _hoisted_85\n          ]),\n          _createElementVNode(\"div\", _hoisted_86, [\n            _hoisted_87,\n            _createElementVNode(\"input\", {\n              ref: \"enableAppLog\",\n              class: \"toggle\",\n              checked: _ctx.appSetting.enableAppLog,\n              type: \"checkbox\"\n            }, null, 8, _hoisted_88)\n          ]),\n          _createElementVNode(\"div\", _hoisted_89, [\n            _hoisted_90,\n            _createElementVNode(\"input\", {\n              ref: \"enableUSILog\",\n              class: \"toggle\",\n              checked: _ctx.appSetting.enableUSILog,\n              type: \"checkbox\"\n            }, null, 8, _hoisted_91)\n          ]),\n          _createElementVNode(\"div\", _hoisted_92, [\n            _hoisted_93,\n            _createElementVNode(\"input\", {\n              ref: \"enableCSALog\",\n              class: \"toggle\",\n              checked: _ctx.appSetting.enableCSALog,\n              type: \"checkbox\"\n            }, null, 8, _hoisted_94)\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_95, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.saveAndClose()))\n        }, \" 保存して閉じる \"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.cancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport {\n  PieceImageType,\n  BoardImageType,\n  BoardLabelType,\n} from \"@/components/primitive/BoardLayout\";\nimport { AppSettingUpdate, Thema } from \"@/settings/app\";\nimport { useStore } from \"@/store\";\nimport { ref, defineComponent, onMounted, Ref, computed } from \"vue\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport api, { isNative } from \"@/ipc/api\";\n\nconst returnCodeToName: { [name: string]: string } = {\n  \"\\r\\n\": \"crlf\",\n  \"\\n\": \"lf\",\n  \"\\r\": \"cr\",\n};\n\nconst nameToReturnCode: { [name: string]: string } = {\n  crlf: \"\\r\\n\",\n  lf: \"\\n\",\n  cr: \"\\r\",\n};\n\nexport default defineComponent({\n  name: \"AppSettingDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const thema: Ref = ref(null);\n    const pieceImage: Ref = ref(null);\n    const boardImage: Ref = ref(null);\n    const displayBoardLabels: Ref = ref(null);\n    const pieceVolume: Ref = ref(null);\n    const clockVolume: Ref = ref(null);\n    const clockPitch: Ref = ref(null);\n    const clockSoundTarget: Ref = ref(null);\n    const returnCode: Ref = ref(null);\n    const autoSaveDirectory: Ref = ref(null);\n    const coefficientInSigmoid: Ref = ref(null);\n    const badMoveLevelThreshold1: Ref = ref(null);\n    const badMoveLevelThreshold2: Ref = ref(null);\n    const badMoveLevelThreshold3: Ref = ref(null);\n    const badMoveLevelThreshold4: Ref = ref(null);\n    const enableAppLog: Ref = ref(null);\n    const enableUSILog: Ref = ref(null);\n    const enableCSALog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const saveAndClose = async () => {\n      const update: AppSettingUpdate = {\n        thema: thema.value.value,\n        pieceImage: pieceImage.value.value,\n        boardImage: boardImage.value.value,\n        boardLabelType: displayBoardLabels.value.checked\n          ? BoardLabelType.STANDARD\n          : BoardLabelType.NONE,\n        pieceVolume: readInputAsNumber(pieceVolume.value),\n        clockVolume: readInputAsNumber(clockVolume.value),\n        clockPitch: readInputAsNumber(clockPitch.value),\n        clockSoundTarget: clockSoundTarget.value.value,\n        returnCode: nameToReturnCode[returnCode.value.value],\n        autoSaveDirectory: autoSaveDirectory.value.value,\n        coefficientInSigmoid: readInputAsNumber(coefficientInSigmoid.value),\n        badMoveLevelThreshold1: readInputAsNumber(badMoveLevelThreshold1.value),\n        badMoveLevelThreshold2: readInputAsNumber(badMoveLevelThreshold2.value),\n        badMoveLevelThreshold3: readInputAsNumber(badMoveLevelThreshold3.value),\n        badMoveLevelThreshold4: readInputAsNumber(badMoveLevelThreshold4.value),\n        enableAppLog: enableAppLog.value.checked,\n        enableUSILog: enableUSILog.value.checked,\n        enableCSALog: enableCSALog.value.checked,\n      };\n      store.retainBussyState();\n      try {\n        await store.updateAppSetting(update);\n        store.closeAppSettingDialog();\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const selectAutoSaveDirectory = async () => {\n      store.retainBussyState();\n      try {\n        const path = await api.showSelectDirectoryDialog(\n          autoSaveDirectory.value.value\n        );\n        if (path) {\n          autoSaveDirectory.value.value = path;\n        }\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const cancel = () => {\n      store.closeAppSettingDialog();\n    };\n\n    const appSetting = computed(() => {\n      return {\n        ...store.appSetting,\n        returnCode: returnCodeToName[store.appSetting.returnCode],\n      };\n    });\n\n    const themaOptions = [\n      {\n        name: \"標準（緑）\",\n        value: Thema.STANDARD,\n      },\n      {\n        name: \"桜\",\n        value: Thema.CHERRY_BLOSSOM,\n      },\n      {\n        name: \"ダーク\",\n        value: Thema.DARK,\n      },\n    ];\n\n    const pieceImageTypes = [\n      {\n        name: \"一文字駒\",\n        value: PieceImageType.HITOMOJI,\n      },\n      {\n        name: \"一文字駒（ゴシック体）\",\n        value: PieceImageType.HITOMOJI_GOTHIC,\n      },\n      {\n        name: \"一文字駒（ダーク）\",\n        value: PieceImageType.HITOMOJI_DARK,\n      },\n      {\n        name: \"一文字駒（ゴシック体・ダーク）\",\n        value: PieceImageType.HITOMOJI_GOTHIC_DARK,\n      },\n    ];\n\n    const boardImageTypes = [\n      {\n        name: \"木目（明るい）\",\n        value: BoardImageType.LIGHT,\n      },\n      {\n        name: \"木目（暖かい）\",\n        value: BoardImageType.WARM,\n      },\n      {\n        name: \"レジン\",\n        value: BoardImageType.RESIN,\n      },\n      {\n        name: \"レジン2\",\n        value: BoardImageType.RESIN2,\n      },\n      {\n        name: \"レジン3\",\n        value: BoardImageType.RESIN3,\n      },\n      {\n        name: \"ダーク\",\n        value: BoardImageType.DARK,\n      },\n      {\n        name: \"緑\",\n        value: BoardImageType.GREEN,\n      },\n      {\n        name: \"桜\",\n        value: BoardImageType.CHERRY_BLOSSOM,\n      },\n    ];\n\n    return {\n      BoardLabelType,\n      dialog,\n      thema,\n      pieceImage,\n      boardImage,\n      displayBoardLabels,\n      pieceVolume,\n      clockVolume,\n      clockPitch,\n      clockSoundTarget,\n      returnCode,\n      autoSaveDirectory,\n      coefficientInSigmoid,\n      badMoveLevelThreshold1,\n      badMoveLevelThreshold2,\n      badMoveLevelThreshold3,\n      badMoveLevelThreshold4,\n      enableAppLog,\n      enableUSILog,\n      enableCSALog,\n      appSetting,\n      themaOptions,\n      pieceImageTypes,\n      boardImageTypes,\n      isNative: isNative(),\n      selectAutoSaveDirectory,\n      saveAndClose,\n      cancel,\n    };\n  },\n});\n","import { render } from \"./AppSettingDialog.vue?vue&type=template&id=cc44b198&scoped=true&ts=true\"\nimport script from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AppSettingDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AppSettingDialog.vue?vue&type=style&index=0&id=cc44b198&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-cc44b198\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4490b135\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { ref: \"dialog\" }\nconst _hoisted_2 = { ref: \"content\" }\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"以下の棋譜(または局面)を取り込みます。\", -1))\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"※KIF形式/CSA形式/SFENに対応しています。\", -1))\nconst _hoisted_6 = {\n  key: 0,\n  class: \"message\"\n}\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" ※テキストエリアに棋譜を貼り付けてください。\")\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" ※インストールアプリ版では自動的に貼り付けられます。 \")\nconst _hoisted_10 = [\n  _hoisted_7,\n  _hoisted_8,\n  _hoisted_9\n]\nconst _hoisted_11 = { ref: \"textarea\" }\nconst _hoisted_12 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _hoisted_5,\n          (!_ctx.isNative)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _hoisted_10))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"textarea\", _hoisted_11, null, 512)\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.onOk && _ctx.onOk(...args)))\n        }, \"取り込む\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.onCancel && _ctx.onCancel(...args)))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { isNative } from \"@/ipc/api\";\nimport { useStore } from \"@/store\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\n\nexport default defineComponent({\n  name: \"PasteDialog\",\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const textarea: Ref = ref(null);\n\n    store.retainBussyState();\n    onMounted(async () => {\n      try {\n        showModalDialog(dialog.value);\n        if (isNative()) {\n          textarea.value.value = await navigator.clipboard.readText();\n        }\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const onOk = () => {\n      const data = textarea.value.value;\n      store.closeModalDialog();\n      if (data) {\n        store.pasteRecord(data);\n      }\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    return {\n      dialog,\n      textarea,\n      onOk,\n      onCancel,\n      isNative: isNative(),\n    };\n  },\n});\n","import { render } from \"./PasteDialog.vue?vue&type=template&id=4490b135&scoped=true&ts=true\"\nimport script from \"./PasteDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./PasteDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./PasteDialog.vue?vue&type=style&index=0&id=4490b135&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4490b135\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5dba5f52\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"bussy\"\n}\nconst _hoisted_2 = { class: \"message-box\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"処理中です。お待ち下さい。\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.BUSSY\n        }, null, 8, [\"icon\"]),\n        _hoisted_3\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"BussyMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n    return {\n      dialog,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./BussyMessage.vue?vue&type=template&id=5dba5f52&scoped=true&ts=true\"\nimport script from \"./BussyMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./BussyMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./BussyMessage.vue?vue&type=style&index=0&id=5dba5f52&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5dba5f52\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-e0767d9e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"confirm\"\n}\nconst _hoisted_2 = { class: \"message-box\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.QUESTION\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message), 1)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onOk()))\n        }, \"OK\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.onClose()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { useStore } from \"@/store\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const message = computed(() => store.confirmation);\n\n    const onOk = () => {\n      store.confirmationOk();\n    };\n\n    const onClose = () => {\n      store.confirmationCancel();\n    };\n\n    onMounted(() => {\n      showModalDialog(dialog.value, onClose);\n    });\n\n    return {\n      dialog,\n      message,\n      onOk,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./ConfirmDialog.vue?vue&type=template&id=e0767d9e&scoped=true&ts=true\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ConfirmDialog.vue?vue&type=style&index=0&id=e0767d9e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e0767d9e\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1553f8ef\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"info\"\n}\nconst _hoisted_2 = { class: \"message-box\" }\nconst _hoisted_3 = { class: \"message\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"list\"\n}\nconst _hoisted_5 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.INFO\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.message.text), 1)\n      ]),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.message.attachments, (attachment, aidx) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          key: aidx,\n          class: \"attachment\"\n        }, [\n          (attachment.type === 'list')\n            ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_4, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(attachment.items, (item, iidx) => {\n                  return (_openBlock(), _createElementBlock(\"li\", {\n                    key: iidx,\n                    class: \"list-item\"\n                  }, [\n                    _createTextVNode(_toDisplayString(item.text) + \" \", 1),\n                    _createElementVNode(\"ul\", null, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.children, (child, cidx) => {\n                        return (_openBlock(), _createElementBlock(\"li\", {\n                          key: cidx,\n                          class: \"list-child-item\"\n                        }, _toDisplayString(child), 1))\n                      }), 128))\n                    ])\n                  ]))\n                }), 128))\n              ]))\n            : _createCommentVNode(\"\", true)\n        ]))\n      }), 128)),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"InfoMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const message = computed(() => store.message);\n\n    const onClose = () => {\n      store.dequeueMessage();\n    };\n\n    return {\n      dialog,\n      message,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./InfoMessage.vue?vue&type=template&id=1553f8ef&scoped=true&ts=true\"\nimport script from \"./InfoMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./InfoMessage.vue?vue&type=style&index=0&id=1553f8ef&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1553f8ef\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0a93ee62\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"error\"\n}\nconst _hoisted_2 = { class: \"message-box\" }\nconst _hoisted_3 = { class: \"items\" }\nconst _hoisted_4 = { class: \"notice\" }\nconst _hoisted_5 = { class: \"index\" }\nconst _hoisted_6 = { class: \"message\" }\nconst _hoisted_7 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.ERROR\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.errors.length) + \" 件のエラーが発生しました。 \", 1),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.errors, (error) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: error.index,\n              class: \"item\"\n            }, [\n              _createElementVNode(\"p\", _hoisted_5, _toDisplayString(error.index + 1) + \" 件目\", 1),\n              _createElementVNode(\"p\", _hoisted_6, _toDisplayString(error.message), 1)\n            ]))\n          }), 128))\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onClose()))\n        }, \"閉じる\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { useStore } from \"@/store\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\n\nexport default defineComponent({\n  name: \"ErrorMessage\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const errors = computed(() => {\n      return store.errors.map((error, index) => {\n        return {\n          message: error.message,\n          index,\n        };\n      });\n    });\n\n    const onClose = () => {\n      store.clearErrors();\n    };\n\n    return {\n      dialog,\n      errors,\n      onClose,\n      Icon,\n    };\n  },\n});\n","import { render } from \"./ErrorMessage.vue?vue&type=template&id=0a93ee62&scoped=true&ts=true\"\nimport script from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ErrorMessage.vue?vue&type=script&lang=ts\"\n\nimport \"./ErrorMessage.vue?vue&type=style&index=0&id=0a93ee62&scoped=true&lang=css\"\nimport \"./ErrorMessage.vue?vue&type=style&index=1&id=0a93ee62&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a93ee62\"]])\n\nexport default __exports__","function shouldPreventArrowKeyEventHandling(): boolean {\n  const activeElement = document.activeElement;\n  return (\n    activeElement instanceof HTMLTextAreaElement ||\n    activeElement instanceof HTMLInputElement ||\n    activeElement instanceof HTMLSelectElement\n  );\n}\n\ninterface KeyEventHandler {\n  onArrowUp?(): void;\n  onArrowDown?(): void;\n  onArrowLeft?(): void;\n  onArrowRight?(): void;\n}\n\nfunction resolveHandlerFunc(\n  key: string,\n  handler: KeyEventHandler\n): (() => void) | undefined {\n  if (!shouldPreventArrowKeyEventHandling()) {\n    switch (key) {\n      case \"ArrowUp\":\n        return handler.onArrowUp;\n      case \"ArrowDown\":\n        return handler.onArrowDown;\n      case \"ArrowLeft\":\n        return handler.onArrowLeft;\n      case \"ArrowRight\":\n        return handler.onArrowRight;\n    }\n  }\n}\n\nexport function handleKeyDownEvent(handler: KeyEventHandler): void {\n  document.addEventListener(\"keydown\", (event: KeyboardEvent) => {\n    const f = resolveHandlerFunc(event.key, handler);\n    if (f) {\n      event.preventDefault();\n      f();\n    }\n  });\n}\n","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-76d6e47d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"root\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-title\" }, \"棋譜解析\", -1))\nconst _hoisted_3 = { class: \"dialog-form-area\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"エンジン\", -1))\nconst _hoisted_5 = { class: \"dialog-form-item\" }\nconst _hoisted_6 = { class: \"dialog-form-area\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"開始条件\", -1))\nconst _hoisted_8 = { class: \"dialog-form-item\" }\nconst _hoisted_9 = [\"checked\"]\nconst _hoisted_10 = [\"disabled\", \"value\"]\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"手目から\", -1))\nconst _hoisted_12 = { class: \"dialog-form-area\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"終了条件\", -1))\nconst _hoisted_14 = { class: \"dialog-form-item\" }\nconst _hoisted_15 = [\"checked\"]\nconst _hoisted_16 = [\"disabled\", \"value\"]\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"手目まで\", -1))\nconst _hoisted_18 = { class: \"dialog-form-area\" }\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"局面ごとの終了条件\", -1))\nconst _hoisted_20 = { class: \"dialog-form-item\" }\nconst _hoisted_21 = [\"value\"]\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-unit\" }, \"秒まで\", -1))\nconst _hoisted_23 = { class: \"dialog-form-area\" }\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, \"出力設定\", -1))\nconst _hoisted_25 = { class: \"dialog-form-item\" }\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"dialog-form-item-label-wide\" }, \"指し手コメント\", -1))\nconst _hoisted_27 = [\"value\"]\nconst _hoisted_28 = [\"value\"]\nconst _hoisted_29 = [\"value\"]\nconst _hoisted_30 = [\"value\"]\nconst _hoisted_31 = [\"value\"]\nconst _hoisted_32 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_PlayerSelector = _resolveComponent(\"PlayerSelector\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _hoisted_2,\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createVNode(_component_PlayerSelector, {\n            players: _ctx.engines,\n            \"player-uri\": _ctx.engineURI,\n            \"engine-settings\": _ctx.engineSettings.json,\n            \"display-thread-state\": true,\n            \"display-multi-pv-state\": true,\n            onUpdateEngineSetting: _ctx.onUpdatePlayerSetting,\n            onSelectPlayer: _ctx.onSelectPlayer\n          }, null, 8, [\"players\", \"player-uri\", \"engine-settings\", \"onUpdateEngineSetting\", \"onSelectPlayer\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _hoisted_7,\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createElementVNode(\"input\", {\n            ref: \"enableStartNumber\",\n            class: \"toggle\",\n            type: \"checkbox\",\n            checked: _ctx.defaultValues.enableStartNumber,\n            onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.updateToggle && _ctx.updateToggle(...args)))\n          }, null, 40, _hoisted_9),\n          _createElementVNode(\"input\", {\n            ref: \"startNumber\",\n            class: \"small\",\n            type: \"number\",\n            min: \"1\",\n            step: \"1\",\n            disabled: !_ctx.defaultValues.enableStartNumber,\n            value: _ctx.defaultValues.startNumber\n          }, null, 8, _hoisted_10),\n          _hoisted_11\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _hoisted_13,\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createElementVNode(\"input\", {\n            ref: \"enableEndNumber\",\n            class: \"toggle\",\n            type: \"checkbox\",\n            checked: _ctx.defaultValues.enableEndNumber,\n            onChange: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.updateToggle && _ctx.updateToggle(...args)))\n          }, null, 40, _hoisted_15),\n          _createElementVNode(\"input\", {\n            ref: \"endNumber\",\n            class: \"small\",\n            type: \"number\",\n            min: \"1\",\n            step: \"1\",\n            disabled: !_ctx.defaultValues.enableEndNumber,\n            value: _ctx.defaultValues.endNumber\n          }, null, 8, _hoisted_16),\n          _hoisted_17\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_18, [\n        _hoisted_19,\n        _createElementVNode(\"div\", _hoisted_20, [\n          _createElementVNode(\"input\", {\n            ref: \"maxSecondsPerMove\",\n            class: \"small\",\n            type: \"number\",\n            min: \"0\",\n            step: \"1\",\n            value: _ctx.defaultValues.maxSecondsPerMove\n          }, null, 8, _hoisted_21),\n          _hoisted_22\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_23, [\n        _hoisted_24,\n        _createElementVNode(\"div\", _hoisted_25, [\n          _hoisted_26,\n          _createElementVNode(\"select\", {\n            ref: \"commentBehavior\",\n            size: \"1\",\n            value: _ctx.defaultValues.commentBehavior\n          }, [\n            _createElementVNode(\"option\", {\n              value: _ctx.CommentBehavior.NONE\n            }, \"出力しない\", 8, _hoisted_28),\n            _createElementVNode(\"option\", {\n              value: _ctx.CommentBehavior.INSERT\n            }, \"前方に加筆する\", 8, _hoisted_29),\n            _createElementVNode(\"option\", {\n              value: _ctx.CommentBehavior.APPEND\n            }, \"末尾に加筆する\", 8, _hoisted_30),\n            _createElementVNode(\"option\", {\n              value: _ctx.CommentBehavior.OVERWRITE\n            }, \"上書きする\", 8, _hoisted_31)\n          ], 8, _hoisted_27)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_32, [\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.onStart()))\n        }, \"解析実行\"),\n        _createElementVNode(\"button\", {\n          class: \"dialog-button\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.onCancel()))\n        }, \"キャンセル\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { readInputAsNumber } from \"@/helpers/form\";\nimport api from \"@/ipc/api\";\nimport { AnalysisSetting, defaultAnalysisSetting } from \"@/settings/analysis\";\nimport { USIEngineSetting, USIEngineSettings } from \"@/settings/usi\";\nimport { useStore } from \"@/store\";\nimport { CommentBehavior } from \"@/store/record\";\nimport { computed, defineComponent, onMounted, ref, Ref } from \"vue\";\nimport PlayerSelector from \"@/components/dialog/PlayerSelector.vue\";\n\nexport default defineComponent({\n  name: \"ResearchDialog\",\n  components: {\n    PlayerSelector,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    const enableStartNumber: Ref = ref(null);\n    const startNumber: Ref = ref(null);\n    const enableEndNumber: Ref = ref(null);\n    const endNumber: Ref = ref(null);\n    const maxSecondsPerMove: Ref = ref(null);\n    const commentBehavior: Ref = ref(null);\n    const analysisSetting = ref(defaultAnalysisSetting());\n    const engineSettings = ref(new USIEngineSettings());\n    const engineURI = ref(\"\");\n\n    store.retainBussyState();\n\n    onMounted(async () => {\n      showModalDialog(dialog.value);\n      try {\n        analysisSetting.value = await api.loadAnalysisSetting();\n        engineSettings.value = await api.loadUSIEngineSetting();\n        engineURI.value = analysisSetting.value.usi?.uri || \"\";\n      } catch (e) {\n        store.pushError(e);\n        store.closeModalDialog();\n      } finally {\n        store.releaseBussyState();\n      }\n    });\n\n    const updateToggle = () => {\n      startNumber.value.disabled = !enableStartNumber.value.checked;\n      endNumber.value.disabled = !enableEndNumber.value.checked;\n    };\n\n    const onStart = () => {\n      if (\n        !engineURI.value ||\n        !engineSettings.value.hasEngine(engineURI.value)\n      ) {\n        store.pushError(\"エンジンを選択してください。\");\n        return;\n      }\n      const engine = engineSettings.value.getEngine(engineURI.value);\n      const analysisSetting: AnalysisSetting = {\n        usi: engine,\n        startCriteria: {\n          enableNumber: enableStartNumber.value.checked,\n          number: readInputAsNumber(startNumber.value),\n        },\n        endCriteria: {\n          enableNumber: enableEndNumber.value.checked,\n          number: readInputAsNumber(endNumber.value),\n        },\n        perMoveCriteria: {\n          maxSeconds: readInputAsNumber(maxSecondsPerMove.value),\n        },\n        commentBehavior: commentBehavior.value.value,\n      };\n      store.startAnalysis(analysisSetting);\n    };\n\n    const onCancel = () => {\n      store.closeModalDialog();\n    };\n\n    const onUpdatePlayerSetting = async (setting: USIEngineSetting) => {\n      const clone = new USIEngineSettings(engineSettings.value.json);\n      clone.updateEngine(setting);\n      store.retainBussyState();\n      try {\n        await api.saveUSIEngineSetting(clone);\n        engineSettings.value = clone;\n      } catch (e) {\n        store.pushError(e);\n      } finally {\n        store.releaseBussyState();\n      }\n    };\n\n    const onSelectPlayer = (uri: string) => {\n      engineURI.value = uri;\n    };\n\n    const engines = computed(() => engineSettings.value.engineList);\n\n    const defaultValues = computed(() => {\n      return {\n        enableStartNumber: analysisSetting.value.startCriteria.enableNumber,\n        startNumber: analysisSetting.value.startCriteria.number,\n        enableEndNumber: analysisSetting.value.endCriteria.enableNumber,\n        endNumber: analysisSetting.value.endCriteria.number,\n        maxSecondsPerMove: analysisSetting.value.perMoveCriteria.maxSeconds,\n        commentBehavior: analysisSetting.value.commentBehavior,\n      };\n    });\n\n    return {\n      CommentBehavior,\n      dialog,\n      engineSettings,\n      engineURI,\n      enableStartNumber,\n      startNumber,\n      enableEndNumber,\n      endNumber,\n      maxSecondsPerMove,\n      commentBehavior,\n      engines,\n      defaultValues,\n      updateToggle,\n      onStart,\n      onCancel,\n      onUpdatePlayerSetting,\n      onSelectPlayer,\n    };\n  },\n});\n","import { render } from \"./AnalysisDialog.vue?vue&type=template&id=76d6e47d&scoped=true&ts=true\"\nimport script from \"./AnalysisDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./AnalysisDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./AnalysisDialog.vue?vue&type=style&index=0&id=76d6e47d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-76d6e47d\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-d0a6e96c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"dialog\",\n  class: \"bussy\"\n}\nconst _hoisted_2 = { class: \"message-box\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"message\" }, \"対局の開始を待っています。\", -1))\nconst _hoisted_4 = { class: \"dialog-main-buttons\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ButtonIcon = _resolveComponent(\"ButtonIcon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createElementVNode(\"dialog\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_ButtonIcon, {\n          class: \"icon\",\n          icon: _ctx.Icon.BUSSY\n        }, null, 8, [\"icon\"]),\n        _hoisted_3\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.onLogout()))\n        }, \"ログアウト\")\n      ])\n    ], 512)\n  ]))\n}","\nimport { showModalDialog } from \"@/helpers/dialog\";\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport ButtonIcon from \"@/components/primitive/ButtonIcon.vue\";\nimport { Icon } from \"@/assets/icons\";\nimport { useStore } from \"@/store\";\n\nexport default defineComponent({\n  name: \"CSAGameReadyDialog\",\n  components: {\n    ButtonIcon,\n  },\n  setup() {\n    const store = useStore();\n    const dialog: Ref = ref(null);\n    onMounted(() => {\n      showModalDialog(dialog.value);\n    });\n\n    const onLogout = () => {\n      store.logoutCSAGame();\n    };\n\n    return {\n      dialog,\n      Icon,\n      onLogout,\n    };\n  },\n});\n","import { render } from \"./CSAGameReadyDialog.vue?vue&type=template&id=d0a6e96c&scoped=true&ts=true\"\nimport script from \"./CSAGameReadyDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./CSAGameReadyDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./CSAGameReadyDialog.vue?vue&type=style&index=0&id=d0a6e96c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d0a6e96c\"]])\n\nexport default __exports__","\nimport { defineComponent, computed, onMounted } from \"vue\";\nimport StandardLayout from \"@/components/main/StandardLayout.vue\";\nimport GameDialog from \"@/components/dialog/GameDialog.vue\";\nimport CSAGameDialog from \"@/components/dialog/CSAGameDialog.vue\";\nimport ResearchDialog from \"@/components/dialog/ResearchDialog.vue\";\nimport USIEngineManagementDialog from \"@/components/dialog/USIEngineManagementDialog.vue\";\nimport AppSettingDialog from \"@/components/dialog/AppSettingDialog.vue\";\nimport PasteDialog from \"@/components/dialog/PasteDialog.vue\";\nimport BussyMessage from \"@/components/dialog/BussyMessage.vue\";\nimport ConfirmDialog from \"@/components/dialog/ConfirmDialog.vue\";\nimport InfoMessage from \"@/components/dialog/InfoMessage.vue\";\nimport ErrorMessage from \"@/components/dialog/ErrorMessage.vue\";\nimport { useStore } from \"@/store\";\nimport { AppState } from \"@/store/state\";\nimport { handleKeyDownEvent } from \"@/helpers/key\";\nimport AnalysisDialog from \"@/components/dialog/AnalysisDialog.vue\";\nimport CSAGameReadyDialog from \"@/components/dialog/CSAGameReadyDialog.vue\";\nimport { CSAGameState } from \"@/store/csa\";\n\nexport default defineComponent({\n  name: \"App\",\n  components: {\n    StandardLayout,\n    GameDialog,\n    CSAGameDialog,\n    ResearchDialog,\n    USIEngineManagementDialog,\n    AppSettingDialog,\n    PasteDialog,\n    BussyMessage,\n    ConfirmDialog,\n    InfoMessage,\n    ErrorMessage,\n    AnalysisDialog,\n    CSAGameReadyDialog,\n  },\n  setup() {\n    const store = useStore();\n\n    const thema = computed(() => store.appSetting.thema);\n\n    const dialogVisibilities = computed(() => {\n      return {\n        game: store.appState === AppState.GAME_DIALOG,\n        csaGame: store.appState === AppState.CSA_GAME_DIALOG,\n        research: store.appState === AppState.RESEARCH_DIALOG,\n        analysis: store.appState === AppState.ANALYSIS_DIALOG,\n        usiEngineSetting: store.appState === AppState.USI_ENGINE_SETTING_DIALOG,\n        appSetting: store.isAppSettingDialogVisible,\n        paste: store.appState === AppState.PASTE_DIALOG,\n        bussy: store.isBussy,\n        confirm: store.confirmation !== undefined,\n        csaGameReady: store.csaGameState === CSAGameState.READY,\n      };\n    });\n\n    const hasMessage = computed(() => store.hasMessage);\n\n    const hasErrors = computed(() => store.hasError);\n\n    onMounted(() => {\n      const body = document.getElementsByTagName(\"body\")[0];\n      body.addEventListener(\"copy\", (event) => {\n        store.copyRecordKIF();\n        event.preventDefault();\n      });\n      body.addEventListener(\"paste\", (event) => {\n        store.showPasteDialog();\n        event.preventDefault();\n      });\n      body.addEventListener(\"dragover\", (event: DragEvent) => {\n        event.preventDefault();\n      });\n      body.addEventListener(\"drop\", (event: DragEvent) => {\n        if (event.dataTransfer && event.dataTransfer.files[0]) {\n          const path = event.dataTransfer.files[0].path;\n          store.openRecord(path);\n        }\n        event.preventDefault();\n      });\n      handleKeyDownEvent({\n        onArrowUp(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber - 1);\n        },\n        onArrowDown(): void {\n          const moveNumber = store.record.current.number;\n          store.changeMoveNumber(moveNumber + 1);\n        },\n        onArrowLeft(): void {\n          store.changeMoveNumber(0);\n        },\n        onArrowRight(): void {\n          store.changeMoveNumber(Number.MAX_SAFE_INTEGER);\n        },\n      });\n    });\n\n    return {\n      thema,\n      dialogVisibilities,\n      hasMessage,\n      hasErrors,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=12594b28&scoped=true&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=12594b28&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=12594b28&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\sunfi\\\\Sources\\\\electron-shogi\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-12594b28\"]])\n\nexport default __exports__","export enum MenuEvent {\n  NEW_RECORD = \"resetRecord\",\n  OPEN_RECORD = \"openRecord\",\n  SAVE_RECORD = \"saveRecord\",\n  SAVE_RECORD_AS = \"saveRecordAs\",\n  COPY_RECORD = \"copyRecord\",\n  COPY_RECORD_CSA = \"copyRecordCsa\",\n  COPY_RECORD_USI_BEFORE = \"copyRecordUsiBefore\",\n  COPY_RECORD_USI_ALL = \"copyRecordUsiAll\",\n  COPY_BOARD_SFEN = \"copyRecordSfen\",\n  PASTE_RECORD = \"pasteRecord\",\n  INSERT_INTERRUPT = \"insertInterrupt\",\n  INSERT_RESIGN = \"insertResign\",\n  INSERT_DRAW = \"insertDraw\",\n  INSERT_REPETITION_DRAW = \"insertRepetitionDraw\",\n  INSERT_MATE = \"insertMate\",\n  INSERT_TIMEOUT = \"insertTimeout\",\n  INSERT_FOUL_WIN = \"insertFoulWin\",\n  INSERT_FOUL_LOSE = \"insertFoulLose\",\n  INSERT_ENTERING_OF_KING = \"insertEnteringOfKing\",\n  INSERT_WIN_BY_DEFAULT = \"insertWinByDefault\",\n  INSERT_LOSS_BY_DEFAULT = \"insertLossByDefault\",\n  REMOVE_CURRENT_MOVE = \"remvoeCurrentMove\",\n  START_POSITION_EDITING = \"startPositionEditing\",\n  END_POSITION_EDITING = \"endPositionEditing\",\n  CHANGE_TURN = \"changeTurn\",\n  INIT_POSITION_STANDARD = \"initPositionStandard\",\n  INIT_POSITION_HANDICAP_LANCE = \"initPositionHandicapLance\",\n  INIT_POSITION_HANDICAP_RIGHT_LANCE = \"initPositionHandicapRightLance\",\n  INIT_POSITION_HANDICAP_BISHOP = \"initPositionHandicapBishop\",\n  INIT_POSITION_HANDICAP_ROOK = \"initPositionHandicapRook\",\n  INIT_POSITION_HANDICAP_ROOK_LANCE = \"initPositionHandicapRookLance\",\n  INIT_POSITION_HANDICAP_2PIECES = \"initPositionHandicap2Pieces\",\n  INIT_POSITION_HANDICAP_4PIECES = \"initPositionHandicap4Pieces\",\n  INIT_POSITION_HANDICAP_6PIECES = \"initPositionHandicap6Pieces\",\n  INIT_POSITION_HANDICAP_8PIECES = \"initPositionHandicap8Pieces\",\n  INIT_POSITION_TSUME_SHOGI = \"initPositionTsumeShogi\",\n  INIT_POSITION_TSUME_SHOGI_2KINGS = \"initPositionTsumeShogi2Kings\",\n  START_RESEARCH = \"startResearch\",\n  STOP_RESEARCH = \"stopResearch\",\n  START_ANALYSIS = \"startAnalysis\",\n  STOP_ANALYSIS = \"stopAnalysis\",\n  START_GAME = \"startGame\",\n  START_CSA_GAME = \"startCSAGame\",\n  STOP_GAME = \"stopGame\",\n  RESIGN = \"resign\",\n  WIN = \"win\",\n  LOGOUT = \"logout\",\n  FLIP_BOARD = \"flipBoard\",\n  APP_SETTING_DIALOG = \"appSetting\",\n  USI_ENGINE_SETTING_DIALOG = \"usiEngineSetting\",\n}\n","import { watch } from \"vue\";\nimport { SpecialMove, InitialPositionType } from \"@/shogi\";\nimport { useStore } from \"@/store\";\nimport { onUSIBestMove, onUSIInfo } from \"@/players/usi\";\nimport { humanPlayer } from \"@/players/human\";\nimport { bridge } from \"./api\";\nimport { MenuEvent } from \"./menu\";\nimport { USIInfoCommand, USIInfoSender } from \"@/ipc/usi\";\nimport { AppState } from \"@/store/state\";\nimport {\n  onCSAClose,\n  onCSAGameResult,\n  onCSAGameSummary,\n  onCSAMove,\n  onCSAReject,\n  onCSAStart,\n} from \"@/store/csa\";\nimport { CSAGameResult, CSASpecialMove } from \"./csa\";\n\nexport function setup(): void {\n  const store = useStore();\n  bridge.onSendError((e: Error) => {\n    store.pushError(e);\n  });\n  bridge.onMenuEvent((event: MenuEvent) => {\n    if (store.isBussy) {\n      return;\n    }\n    switch (event) {\n      case MenuEvent.NEW_RECORD:\n        store.resetRecord();\n        break;\n      case MenuEvent.OPEN_RECORD:\n        store.openRecord();\n        break;\n      case MenuEvent.SAVE_RECORD:\n        store.saveRecord({ overwrite: true });\n        break;\n      case MenuEvent.SAVE_RECORD_AS:\n        store.saveRecord();\n        break;\n      case MenuEvent.COPY_RECORD:\n        store.copyRecordKIF();\n        break;\n      case MenuEvent.COPY_RECORD_CSA:\n        store.copyRecordCSA();\n        break;\n      case MenuEvent.COPY_RECORD_USI_BEFORE:\n        store.copyRecordUSIBefore();\n        break;\n      case MenuEvent.COPY_RECORD_USI_ALL:\n        store.copyRecordUSIAll();\n        break;\n      case MenuEvent.COPY_BOARD_SFEN:\n        store.copyBoardSFEN();\n        break;\n      case MenuEvent.PASTE_RECORD:\n        store.showPasteDialog();\n        break;\n      case MenuEvent.INSERT_INTERRUPT:\n        store.insertSpecialMove(SpecialMove.INTERRUPT);\n        break;\n      case MenuEvent.INSERT_RESIGN:\n        store.insertSpecialMove(SpecialMove.RESIGN);\n        break;\n      case MenuEvent.INSERT_DRAW:\n        store.insertSpecialMove(SpecialMove.DRAW);\n        break;\n      case MenuEvent.INSERT_REPETITION_DRAW:\n        store.insertSpecialMove(SpecialMove.REPETITION_DRAW);\n        break;\n      case MenuEvent.INSERT_MATE:\n        store.insertSpecialMove(SpecialMove.MATE);\n        break;\n      case MenuEvent.INSERT_TIMEOUT:\n        store.insertSpecialMove(SpecialMove.TIMEOUT);\n        break;\n      case MenuEvent.INSERT_FOUL_WIN:\n        store.insertSpecialMove(SpecialMove.FOUL_WIN);\n        break;\n      case MenuEvent.INSERT_FOUL_LOSE:\n        store.insertSpecialMove(SpecialMove.FOUL_LOSE);\n        break;\n      case MenuEvent.INSERT_ENTERING_OF_KING:\n        store.insertSpecialMove(SpecialMove.ENTERING_OF_KING);\n        break;\n      case MenuEvent.INSERT_WIN_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.WIN_BY_DEFAULT);\n        break;\n      case MenuEvent.INSERT_LOSS_BY_DEFAULT:\n        store.insertSpecialMove(SpecialMove.LOSS_BY_DEFAULT);\n        break;\n      case MenuEvent.REMOVE_CURRENT_MOVE:\n        store.removeCurrentMove();\n        break;\n      case MenuEvent.START_POSITION_EDITING:\n        store.startPositionEditing();\n        break;\n      case MenuEvent.END_POSITION_EDITING:\n        store.endPositionEditing();\n        break;\n      case MenuEvent.CHANGE_TURN:\n        store.changeTurn();\n        break;\n      case MenuEvent.INIT_POSITION_STANDARD:\n        store.initializePosition(InitialPositionType.STANDARD);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_RIGHT_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_RIGHT_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_BISHOP:\n        store.initializePosition(InitialPositionType.HANDICAP_BISHOP);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_ROOK_LANCE:\n        store.initializePosition(InitialPositionType.HANDICAP_ROOK_LANCE);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_2PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_2PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_4PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_4PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_6PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_6PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_HANDICAP_8PIECES:\n        store.initializePosition(InitialPositionType.HANDICAP_8PIECES);\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI:\n        store.initializePosition(InitialPositionType.TSUME_SHOGI);\n        break;\n      case MenuEvent.INIT_POSITION_TSUME_SHOGI_2KINGS:\n        store.initializePosition(InitialPositionType.TSUME_SHOGI_2KINGS);\n        break;\n      case MenuEvent.START_GAME:\n        store.showGameDialog();\n        break;\n      case MenuEvent.START_CSA_GAME:\n        store.showCSAGameDialog();\n        break;\n      case MenuEvent.STOP_GAME:\n        store.stopGame();\n        break;\n      case MenuEvent.RESIGN:\n        humanPlayer.resign();\n        break;\n      case MenuEvent.WIN:\n        humanPlayer.win();\n        break;\n      case MenuEvent.LOGOUT:\n        store.logoutCSAGame();\n        break;\n      case MenuEvent.START_RESEARCH:\n        store.showResearchDialog();\n        break;\n      case MenuEvent.STOP_RESEARCH:\n        store.stopResearch();\n        break;\n      case MenuEvent.START_ANALYSIS:\n        store.showAnalysisDialog();\n        break;\n      case MenuEvent.STOP_ANALYSIS:\n        store.stopAnalysis();\n        break;\n      case MenuEvent.FLIP_BOARD:\n        store.flipBoard();\n        break;\n      case MenuEvent.APP_SETTING_DIALOG:\n        store.showAppSettingDialog();\n        break;\n      case MenuEvent.USI_ENGINE_SETTING_DIALOG:\n        store.showUsiEngineManagementDialog();\n        break;\n    }\n  });\n  bridge.onUSIBestMove(\n    (sessionID: number, usi: string, sfen: string, ponder?: string) => {\n      onUSIBestMove(sessionID, usi, sfen, ponder);\n    }\n  );\n  bridge.onUSIInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      const info = JSON.parse(json) as USIInfoCommand;\n      store.updateUSIInfo(sessionID, usi, sender, name, info);\n      onUSIInfo(sessionID, usi, info);\n    }\n  );\n  bridge.onUSIPonderInfo(\n    (\n      sessionID: number,\n      usi: string,\n      sender: USIInfoSender,\n      name: string,\n      json: string\n    ) => {\n      const info = JSON.parse(json) as USIInfoCommand;\n      store.updateUSIPonderInfo(sessionID, usi, sender, name, info);\n      onUSIInfo(sessionID, usi, info);\n    }\n  );\n  bridge.onCSAGameSummary((sessionID: number, gameSummary: string): void => {\n    onCSAGameSummary(sessionID, JSON.parse(gameSummary));\n  });\n  bridge.onCSAReject((sessionID: number): void => {\n    onCSAReject(sessionID);\n  });\n  bridge.onCSAStart((sessionID: number, playerStates: string): void => {\n    onCSAStart(sessionID, JSON.parse(playerStates));\n  });\n  bridge.onCSAMove(\n    (sessionID: number, move: string, playerStates: string): void => {\n      onCSAMove(sessionID, move, JSON.parse(playerStates));\n    }\n  );\n  bridge.onCSAGameResult(\n    (\n      sessionID: number,\n      specialMove: CSASpecialMove,\n      gameResult: CSAGameResult\n    ): void => {\n      onCSAGameResult(sessionID, specialMove, gameResult);\n    }\n  );\n  bridge.onCSAClose((sessionID: number) => {\n    onCSAClose(sessionID);\n  });\n  watch(\n    () => [store.appState, store.isBussy],\n    ([appState, bussy]) => {\n      bridge.updateMenuState(appState as AppState, bussy as boolean);\n    }\n  );\n  bridge.updateMenuState(store.appState, store.isBussy);\n}\n","import { createApp } from \"vue\";\nimport App from \"@/App.vue\";\nimport api from \"@/ipc/api\";\nimport { setup as setupIPC } from \"@/ipc/setup\";\nimport { useStore } from \"@/store\";\nimport { Chart, registerables } from \"chart.js\";\nimport { LogLevel } from \"@/ipc/log\";\n\napi.log(LogLevel.INFO, \"start renderer process\");\n\nChart.register(...registerables);\n\nsetupIPC();\n\nconst store = useStore();\nPromise.allSettled([\n  api\n    .loadAppSetting()\n    .then((setting) => {\n      store.updateAppSetting(setting);\n    })\n    .catch((e) => {\n      store.pushError(\n        new Error(\"アプリ設定の読み込み中にエラーが発生しました :\" + e)\n      );\n    }),\n  api.getRecordPathFromProcArg().then((path) => {\n    if (path) {\n      store.openRecord(path);\n    }\n  }),\n]).finally(() => {\n  api.log(LogLevel.INFO, \"mount app\");\n  createApp(App).mount(\"#app\");\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkelectron_shogi\"] = self[\"webpackChunkelectron_shogi\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(3161); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_StandardLayout","_resolveComponent","_component_GameDialog","_component_CSAGameDialog","_component_ResearchDialog","_component_AnalysisDialog","_component_USIEngineManagementDialog","_component_AppSettingDialog","_component_PasteDialog","_component_BussyMessage","_component_ConfirmDialog","_component_CSAGameReadyDialog","_component_InfoMessage","_component_ErrorMessage","_openBlock","_createElementBlock","class","_normalizeClass","thema","_createVNode","dialogVisibilities","game","_createBlock","key","_createCommentVNode","csaGame","research","analysis","usiEngineSetting","appSetting","paste","bussy","confirm","csaGameReady","hasMessage","hasErrors","_hoisted_1","_hoisted_2","_component_BoardPane","_component_RecordPane","_component_TabPane","_createElementVNode","boardPaneMaxSize","onResize","onBoardPaneResize","style","_normalizeStyle","recordPaneStyle","size","bottomPaneSize","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_component_ButtonIcon","_component_BoardView","_component_GameMenu","_component_FileMenu","_component_InitialPositionMenu","pieceImage","boardImage","boardLabelType","maxSize","position","lastMove","flip","boardFlipping","allowMove","allowEdit","blackPlayerName","whitePlayerName","clock","black","time","byoyomi","white","onMove","onEdit","_withCtx","controlStates","onClick","args","onGame","icon","Icon","GAME","stop","onStop","STOP","win","onWin","CALL","resign","onResign","RESIGN","onResearch","RESEARCH","endResearch","onEndResearch","END","onAnalysis","ANALYSIS","endAnalysis","onEndAnalysis","startEditPosition","onStartEditPosition","EDIT","endEditPosition","onEndEditPosition","CHECK","initPosition","onChangeTurn","SWAP","onInitPosition","onOpenAppSettings","SETTINGS","disabled","engineSettings","onOpenEngineSettings","ENGINE_SETTINGS","onFlip","FLIP","onFileAction","FILE","removeCurrentMove","onRemoveCurrentMove","DELETE","_","isGameMenuVisible","onClose","$event","isFileMenuVisible","isInitialPositionMenuVisible","layout","frame","clickFrame","board","textureImagePath","src","gridImagePath","active","color","_toDisplayString","blackPlayerTimeSeverity","blackClock","blackPlayerTimeText","whitePlayerTimeSeverity","whiteClock","whitePlayerTimeText","_Fragment","_renderList","square","id","backgroundStyle","piece","imagePath","labels","label","character","clickSquare","file","rank","onContextmenu","clickSquareR","blackHand","pointers","pointer","pieces","clickHand","Color","BLACK","type","whiteHand","WHITE","promotion","clickPromote","promoteImagePath","clickNotPromote","notPromoteImagePath","turn","control","left","_renderSlot","$slots","undefined","right","PieceType","reverseColor","colorToSFEN","isValidSFENColor","sfen","parseSFENColor","standardPieceNameMap","pawn","lance","knight","silver","gold","bishop","rook","king","promPawn","promLance","promKnight","promSilver","horse","dragon","standardPieceName","val","PAWN","LANCE","KNIGHT","SILVER","GOLD","BISHOP","ROOK","KING","PROM_PAWN","PROM_LANCE","PROM_KNIGHT","PROM_SILVER","HORSE","DRAGON","handPieceTypes","promotable","promoteMap","promotedPieceType","pieceType","unpromoteMap","toSFENCharBlack","pieceTypeToSFEN","toSFENCharWhite","sfenCharToTypeMap","P","L","N","S","G","B","R","K","p","l","n","s","g","b","r","k","sfenCharToColorMap","rotateMap","Map","set","Piece","constructor","this","withColor","equals","promoted","unpromoted","isPromotable","rotate","get","Direction","reverseMap","up","DOWN","down","UP","RIGHT","LEFT","left_up","RIGHT_DOWN","right_up","LEFT_DOWN","left_down","RIGHT_UP","right_down","LEFT_UP","left_up_knight","RIGHT_DOWN_KNIGHT","right_up_knight","LEFT_DOWN_KNIGHT","left_down_knight","RIGHT_UP_KNIGHT","right_down_knight","LEFT_UP_KNIGHT","reverseDirection","dir","directions","MoveType","movableDirectionMap","SHORT","LONG","movableDirections","Object","keys","resolveMoveType","direction","directionToDeltaMap","x","y","vectorToDirectionAndDistance","distance","ok","Math","abs","dx","dy","sfenFileToNumber","sfenRankToNumber","sfenRanks","Square","index","opposite","neighbor","arg0","arg1","valid","trunc","all","push","newByIndex","fileDisplayTexts","rankDisplayTexts","Move","from","to","promote","capturedPieceType","move","withPromote","getDisplayText","prev","text","ret","parseSFENMove","newBySFEN","parseSFENSquare","substring","length","InitialPositionType","sfenCharToNumber","Board","squares","Array","i","reset","STANDARD","at","swap","square1","square2","tmp","remove","removed","listNonEmptySquares","forEach","listSquaresByColor","clear","EMPTY","TSUME_SHOGI","TSUME_SHOGI_2KINGS","HANDICAP_LANCE","HANDICAP_RIGHT_LANCE","HANDICAP_BISHOP","HANDICAP_ROOK","HANDICAP_ROOK_LANCE","HANDICAP_2PIECES","HANDICAP_4PIECES","HANDICAP_6PIECES","HANDICAP_8PIECES","empty","newByXY","resetBySFEN","isValidSFEN","rows","split","c","findKing","find","hasPower","target","option","step","filled","ignore","rdir","isChecked","kingColor","copyFrom","buildSFEN","Hand","count","add","reduce","handler","sfenBlack","formatSFEN","sfenWhite","w","match","sections","section","Number","hand","invalidRankMap","isInvalidRank","rule","isPromotableRank","pawnExists","Position","_board","_color","_blackHand","_whiteHand","_hand","checked","createMove","capturedPiece","createMoveBySFEN","m","isPawnDropMate","kingSquare","movable","isMovable","isValidMove","captured","doMove","opt","ignoreValidation","undoMove","isValidEditing","edit","change","getSFEN","nextMoveNumber","shift","hands","parseSFEN","setColor","d","clone","countExistingPieces","result","countNotExistingPieces","existed","RecordMetadataKey","SpecialMove","millisecondsToHMMSS","ms","secondsToHMMSS","floor","millisecondsToMSS","secondsToMSS","seconds","h","String","padStart","getStandardMetadataDisplayName","BLACK_NAME","WHITE_NAME","START_DATETIME","END_DATETIME","DATE","TOURNAMENT","STRATEGY","TITLE","TIME_LIMIT","TIME_SPENT","PLACE","POSTED_ON","NOTE","BLACK_SHORT_NAME","WHITE_SHORT_NAME","OPUS_NO","OPUS_NAME","AUTHOR","PUBLISHED_ON","PUBLISHED_AT","SOURCE","LENGTH","INTEGRITY","CATEGORY","AWARD","RecordMetadata","standardMetadataKeys","standard","getStandardMetadata","setStandardMetadata","value","delete","customMetadataKeys","custom","getCustomMetadata","setCustomMetadata","specialMoveToDisplayStringMap","start","interrupt","draw","repetitionDraw","mate","timeout","foulWin","foulLose","enteringOfKing","winByDefault","lossByDefault","specialMoveToDisplayString","NodeImpl","number","branchIndex","activeBranch","nextColor","isCheck","displayText","timeText","elapsed","elapsedMs","totalElapsed","totalElapsedMs","hasBranch","next","branch","isFirstBranch","isLastMove","updateTotalElapsedMs","setElapsedMs","stack","pop","START","Record","metadata","_initialPosition","_position","initialPosition","_first","newRootEntry","_current","incrementRepetition","first","current","moves","movesBefore","_movesBefore","unshift","len","branchBegin","repetitionCounts","repetitionStart","onChangePosition","goBack","_goBack","decrementRepetition","goForward","_goForward","goto","resetAllBranchSelection","_forEach","node","switchBranchByIndex","append","lastBranch","removeNextMove","repetition","perpetualCheck","since","usi","usiAll","on","event","data","prefixPositionStartpos","prefixPositionSfen","prefixStartpos","prefixSfen","prefixMoves","startsWith","newByUSIFromMoves","slice","newByUSIFromSFENPosition","Error","join","record","parsed","appendLine","base","newLine","appendReturnIfNotExists","str","endsWith","toString","JSON","stringify","formatPercentage","numerator","denominator","fractionDigits","toFixed","metadataKeyMap","先手","後手","開始日時","終了日時","対局日","棋戦","戦型","表題","持ち時間","消費時間","場所","掲載","備考","先手省略名","後手省略名","作品番号","作品名","作者","発表誌","発表年月","出典","手数","完全性","分類","受賞","metadataNameMap","blackName","whiteName","startDatetime","endDatetime","date","tournament","strategy","title","timeLimit","timeSpent","place","postedOn","note","blackShortName","whiteShortName","opusNo","opusName","author","publishedOn","publishedAt","source","integrity","category","award","LineType","linePatterns","prefix","PROGRAM_COMMENT","removePrefix","isPosition","HANDICAP","BLACK_HAND","WHITE_HAND","BOARD","BLACK_TURN","WHITE_TURN","MOVE","COMMENT","parseLine","line","pattern","matched","begin","metadataKey","metadataPrefix","METADATA","UNKNOWN","readHandicap","trim","fileStringToNumber","rankStringToNumber","一","二","三","四","五","六","七","八","九","kansujiStringToNumber","十","十一","十二","十三","十四","十五","十六","十七","十八","stringToNumber","stringToPieceType","王","玉","飛","龍","竜","角","馬","金","銀","成銀","全","桂","成桂","圭","香","成香","杏","歩","と","stringToSpecialMove","中断","INTERRUPT","投了","持将棋","DRAW","千日手","REPETITION_DRAW","詰み","MATE","切れ負け","TIMEOUT","反則勝ち","FOUL_WIN","反則負け","FOUL_LOSE","入玉勝ち","ENTERING_OF_KING","不戦勝","WIN_BY_DEFAULT","不戦敗","LOSS_BY_DEFAULT","moveRegExp","timeRegExp","specialMoveRegExp","readBoard","rankStr","pieceStr","readHand","numberStr","readMoveTime","timeResult","exec","minutes","parseInt","readMove","num","toStr","pieceTypeStr","promStr","fromStr","importKakinoki","lines","preMoveComment","inMoveSection","e","standardKey","comment","kanjiNumberStrings","fileStrings","rankStrings","pieceTypeToStringForMove","pieceTypeToStringForBoard","specialMoveToString","formatMetadata","options","returnCode","formatPosition","formatHand","formatMove","exportKakinoki","replaceAll","SectionType","VERSION","sectionType","HEADER","EXTENDED_COMMENT","NEUTRAL","POSITION","RANK","PIECES","FIRST_TURN","SPECIAL_MOVE","ELAPSED","results","csaNameToRecordMetadataKey","EVENT","SITE","START_TIME","END_TIME","OPENING","csaNameToPieceType","FU","KY","KE","GI","KI","KA","HI","OU","TO","NY","NK","NG","UM","RY","parsePosition","parseRank","parsePieces","counts","parseMove","fromFile","fromRank","toFile","toRank","basePiece","parseSpecialMove","parseCSAMove","importCSA","replace","error","moveOrError","specialMove","site","startTime","endTime","opening","pieceTypeToString","formatSquare","formatSpecialMove","formatCSAMove","exportCSA","RecordFormatType","detectRecordFormat","USI","SFEN","pattKIF","pattCSA","matchedKIF","matchedCSA","evalKIF","evalCSA","KIF","CSA","preloadedImages","preloadImage","path","img","document","createElement","RectSize","width","height","PieceImageType","BoardImageType","BoardLabelType","layoutTemplate","squreWidth","squreHeight","leftSquarePadding","topSquarePadding","leftPiecePadding","topPiecePadding","highlight","selected","opacity","lastMoveTo","lastMoveFrom","fontSize","playerName","pieceImageMap","HITOMOJI","king2","HITOMOJI_DARK","HITOMOJI_GOTHIC","HITOMOJI_GOTHIC_DARK","boardGridMap","LIGHT","WARM","RESIN","RESIN2","RESIN3","DARK","GREEN","CHERRY_BLOSSOM","boardTextureMap","boardBackgroundColorMap","handColorMap","handLaytoutRule","row","column","rankCharMap","LayoutBuilder","pieceImageType","boardImageType","pieceImages","boardGridImage","boardTextureImage","preload","values","build","upperSizeLimit","reservedMoveForPromotion","ratio","buildFrameLayout","buildBoardLayout","bgColor","top","buildLabelLayout","boardLayout","layouts","NONE","shadow","commonStyle","buildPieceLayout","displayColor","buildSquareLayout","buildHandLayout","standX","standY","standWidth","standHeight","standStyle","areaWidth","areaHeight","areaX","areaY","pieceWidth","pieceHeight","padding","max","buildPromotionLayout","notPromoted","buildTurnLayout","borderWidth","buildPlayerNameLayout","buildClockLayout","buildControlLayout","frameLayout","labelLayout","pieceLayout","squareLayout","blackHandLayout","whiteHandLayout","promotionLayout","turnLayout","blackPlayerNameLayout","whitePlayerNameLayout","blackClockLayout","whiteClockLayout","controlLayout","defineComponent","name","props","required","default","Boolean","blackPlayerTime","blackPlayerByoyomi","whitePlayerTime","whitePlayerByoyomi","emits","setup","context","state","reactive","reservedMove","resetState","watch","updatePointer","newPointer","prevPointer","editFrom","editTo","emit","moveFrom","moveTo","noProm","prom","stopPropagation","preventDefault","layoutBuilder","computed","builder","margin","formatTime","timeSeverity","rem","__exports__","ES_HUMAN","ES_USI_ENGINE","isUSIEngine","uri","issueEngineURI","now","Date","rand","random","MAX_SAFE_INTEGER","USIPonder","USIMultiPV","Threads","NumberOfThreads","MultiPV","getUSIEngineOptionCurrentValue","duplicateEngineSetting","engine","parse","mergeUSIEngineSetting","local","USIEngineSettings","json","engines","hasEngine","addEngine","updateEngine","removeEngine","getEngine","engineList","sort","a","defaultName","jsonWithIndent","getDateString","toLocaleDateString","year","month","day","getDateTimeString","toLocaleTimeString","hour","minute","second","hour12","SearchEngineType","CommentBehavior","Thema","Tab","ClockSoundTarget","LogLevel","STORAGE_KEY","getSituationText","score","scoreToPercentage","coefficientInSigmoid","exp","parsePlayerScoreComment","parseResearchScoreComment","parseFloodgateScoreComment","restoreCustomData","customData","playerScore","playerSearchInfo","researchScore","researchInfo","searchCommentKeyPrefix","PLAYER","RESEARCHER","buildSearchComment","searchInfo","pv","formatTimeLimitCSA","setting","timeSeconds","RecordManager","setupHandler","_record","recordFilePath","_recordFilePath","updateRecordFilePath","clearRecordFilePath","startPosition","resetByCurrentPosition","importRecord","recordOrError","newByUSI","importRecordFromBuffer","iconv","TextDecoder","decode","exportRecordAsBuffer","TextEncoder","encode","swapNextTurn","changePosition","changeMoveNumber","changeBranch","updateComment","appendComment","behavior","org","sep","INSERT","APPEND","OVERWRITE","setGameStartMetadata","gameTitle","setGameEndMetadata","updateSearchInfo","updateEnemySearchInfo","enemySearchInfo","appendMove","params","moveOption","updateStandardMetadata","update","defaultAnalysisSetting","startCriteria","enableNumber","endCriteria","perMoveCriteria","maxSeconds","commentBehavior","defaultAppSetting","pieceVolume","clockVolume","clockPitch","clockSoundTarget","ONLY_USER","tab","RECORD_INFO","autoSaveDirectory","badMoveLevelThreshold1","badMoveLevelThreshold2","badMoveLevelThreshold3","badMoveLevelThreshold4","showElapsedTimeInRecordView","showCommentInRecordView","enableAppLog","enableUSILog","enableCSALog","validateAppSetting","defaultGameSetting","increment","enableEngineTimeout","humanIsFront","enableComment","enableAutoSave","repeat","swapPlayers","maxMoves","validateGameSetting","gameSetting","validateGameSettingForWeb","defaultResearchSetting","webAPI","async","updateMenuState","localStorage","getItem","APP_SETTING","setItem","RESEARCH_SETTING","ANALYSIS_SETTING","GAME_SETTING","CSA_GAME_SETTING_HISTORY","log","level","message","INFO","console","WARN","warn","ERROR","onSendError","onMenuEvent","onUSIBestMove","onUSIInfo","onUSIPonderInfo","onCSAGameSummary","onCSAReject","onCSAStart","onCSAMove","onCSAGameResult","onCSAClose","getWindowObject","window","bridge","electronShogiAPI","api","loadAppSetting","saveAppSetting","loadResearchSetting","saveResearchSetting","loadAnalysisSetting","saveAnalysisSetting","loadGameSetting","saveGameSetting","loadCSAGameSettingHistory","saveCSAGameSettingHistory","loadUSIEngineSetting","saveUSIEngineSetting","settings","getUSIEngineInfo","usiLaunch","usiGo","sessionID","blackTimeMs","whiteTimeMs","usiGoPonder","csaLogin","isNative","beep","frequency","volume","AudioContext","oscillator","createOscillator","gain","createGain","connect","destination","onended","disconnect","currentTime","beepShort","beepUnlimited","lastPieceBeatTime","playPieceBeat","audio","Audio","play","GameResult","GameState","USIInfoSender","AppState","newGameResults","name1","name2","player1","player2","invalid","total","GameManager","recordManager","playerBuilder","handlers","IDLE","_setting","lastEventID","startMoveNumber","gameResults","nextGame","clockSetting","timeMs","onBeepShort","onBeepUnlimited","onStopBeep","onTimeout","blackPlayer","info","whitePlayer","closePlayers","errorOnClose","onError","ACTIVE","onGameNext","setTimeout","nextMove","endGame","getActiveClock","player","getPlayer","ponderPlayer","eventID","issueEventID","startSearch","catch","startPonder","onPieceBeat","faulColor","isEngine","PENDING","BUSSY","Promise","resolve","then","sendGameResults","pause","updateGameResults","onSaveRecord","complete","onGameEnd","gameResult","specialMoveToPlayerGameResult","WIN","LOSE","gameover","close","currentColor","playerColor","defaultRecordFileName","BussyStore","isBussy","retain","release","parseSFENPV","sfenPV","pos","formatPV","USIPlayerMonitor","latestIteration","multiPVSet","Set","moveSet","iterate","iterates","has","multiPV","ponderMove","depth","seldepth","selectiveDepth","nodes","multipv","scoreCP","scoreMate","lowerbound","lowerBound","upperbound","upperBound","currmove","currentMove","currentMoveText","hashfullPerMill","hashfull","nps","string","USIMonitor","_blackPlayer","_whitePlayer","researcher","_researcher","updateQueue","sender","timeoutHandle","dequeue","_update","BLACK_PLAYER","WHITE_PLAYER","MessageStore","_queue","enqueue","ErrorStore","errors","hasError","USIPlayer","onSearchInfo","usiPlayers","searchHandler","inPonder","ponder","baseUSI","ponderSetting","onBestMove","flushUSIInfo","infoCommand","sign","updateUSIInfo","usiInfoTimeout","clearTimeout","AnalysisManager","setupEngine","clearTimer","closeEngine","bind","launch","finish","actualMove","lastSearchInfo","timerHandle","onResult","startResearch","onFinish","negaScore","scoreDelta","isBestMove","getMoveAccuracyText","before","after","loss","emptyCSAGameSummary","myColor","toMove","timeUnitMs","totalTime","delay","CSASpecialMove","CSAGameResult","defaultCSAServerSetting","host","port","password","defaultCSAGameSetting","server","autoFlip","validateCSAGameSetting","csaGameSetting","defaultCSAGameSettingHistory","serverHistory","buildCSAGameSettingByHistory","history","maxServerHistoryLenght","appendCSAGameSettingHistory","newServerHistory","CSAGameState","CSAGameManager","OFFLINE","_state","isMyTurn","gameSummary","login","relogin","WAITING_LOGIN","READY","csaGameManagers","logout","doNotRepeat","onGameSummary","onReject","onStart","playerStates","onFlipBoard","isMyMove","JISHOGI","ILLEGAL_MOVE","TIME_UP","CHUDAN","CENSORED","manager","onGameResult","Clock","_timeMs","_byoyomi","_elapsedMs","ceil","timerStart","lastTimeMs","setInterval","lastByoyomi","fireBeep","lastTime","incrementTime","clearInterval","HumanPlayer","humanPlayer","defaultPlayerBuilder","playerSetting","Store","NORMAL","onUpdatePosition","_bussy","retainBussyState","releaseBussyState","_message","enqueueMessage","dequeueMessage","_error","pushError","clearErrors","updateStandardRecordMetadata","_appSetting","newAppSetting","flipBoard","appState","_appState","confirmation","_confirmation","showConfirmation","TEMPORARY","lastAppState","onCancel","confirmationOk","onOk","confirmationCancel","showPasteDialog","PASTE_DIALOG","showGameDialog","GAME_DIALOG","showCSAGameDialog","CSA_GAME_DIALOG","showResearchDialog","RESEARCH_DIALOG","showAnalysisDialog","ANALYSIS_DIALOG","showUsiEngineManagementDialog","USI_ENGINE_SETTING_DIALOG","closeModalDialog","isAppSettingDialogVisible","_isAppSettingDialogVisible","showAppSettingDialog","closeAppSettingDialog","usiBlackPlayerMonitor","usiMonitor","usiWhitePlayerMonitor","usiResearcherMonitor","updateUSIPonderInfo","blackTime","blackByoyomi","whiteTime","whiteByoyomi","startGame","initializeDisplaySettingForGame","gameManager","finally","csaGameState","csaGameManager","loginCSAGame","saveHistory","latestHistory","CSA_GAME","logoutCSAGame","stopGame","validTotal","attachments","items","children","fname","saveRecordByPath","isMovableByUser","unlimitedBeepHandler","researchSetting","usiSetting","stopResearch","startAnalysis","analysisSetting","analysisManager","stopAnalysis","resetRecord","updateRecordComment","insertSpecialMove","startPositionEditing","POSITION_EDITING","endPositionEditing","initializePosition","initialPositionType","changeTurn","editPosition","copyRecordKIF","navigator","clipboard","writeText","copyRecordCSA","copyRecordUSIBefore","copyRecordUSIAll","copyBoardSFEN","pasteRecord","openRecord","reject","saveRecord","overwrite","defaultPath","dataOrError","store","useStore","draggable","iconSourceMap","INTERNET","QUIZ","SWAP_H","OPEN","SAVE","SAVE_AS","PASTE","COPY","BRAIN","PV","CHART","PERCENT","ARROW_DROP","FIRST","BACK","NEXT","LAST","QUESTION","DESCRIPTION","PLAY","CLOSE","ref","onLocalGame","onCSAGame","showModalDialog","dialog","addEventListener","showModal","getFormItemByID","getElementById","components","ButtonIcon","onMounted","states","newFile","onNewFile","open","onOpen","saveAs","onSave","save","onSaveAs","onCopyKIF","onCopyCSA","onCopyUSI","onCopySFEN","onPaste","onStandard","onHandicapLance","onHandicapRightLance","onHandicapBishop","onHandicapRook","onHandicapRookLance","onHandicap2Pieces","onHandicap4Pieces","onHandicap6Pieces","onHandicap8Pieces","onTsumeShogi","onTsumeShogi2Kings","BoardView","GameMenu","FileMenu","InitialPositionMenu","_withScopeId","_pushScopeId","_popScopeId","for","_component_RecordView","operational","isRecordOperational","showComment","showElapsedTime","onGoBegin","goBegin","onGoBack","onGoForward","onGoEnd","goEnd","onSelectMove","selectMove","onSelectBranch","selectBranch","onChange","onToggleElapsedTime","onToggleComment","changeNumber","branches","moveList","branchList","beginPosSelected","elem","onUpdated","moveListElement","childNodes","HTMLElement","classList","contains","scrollIntoView","block","minWidth","RecordView","checkbox","updateAppSetting","_component_RecordInfo","_component_RecordComment","_component_EngineAnalytics","_component_EvaluationChart","activeTab","headerHeight","changeSelect","SEARCH","PERCENTAGE_CHART","INVISIBLE","contentSize","EvaluationChartType","RAW","WIN_RATE","readonly","onInput","textarea","_component_EngineAnalyticsElement","historyMode","elementHeight","_hoisted_21","_createStaticVNode","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_component_PVPreviewDialog","enableHighlight","showPreview","preview","infos","closePreview","doFlip","updateSize","innerWidth","innerHeight","updateRecord","onUnmounted","removeEventListener","PVPreviewDialog","ite","EngineAnalyticsElement","MATE_SCORE","MAX_SCORE","MIN_SCORE","Series","getSeriesName","series","getSearchInfo","getScore","min","getColorPalette","main","ticks","grid","head","canvasRef","chart","maxScore","minScore","buildDataset","borderColor","dataPoints","lastNode","showLine","verticalLine","palette","pointBorderWidth","pointRadius","buildDatasets","buildScalesOption","updateChart","datasets","scales","displayWidth","round","canvas","getContext","Chart","animation","duration","maintainAspectRatio","events","destroy","deep","resize","filePath","list","element","displayName","root","map","input","minHeight","RecordComment","EngineAnalytics","EvaluationChart","RecordInfo","BoardPane","RecordPane","TabPane","windowSize","boardPaneSize","minTabPaneHeight","minTabHeight","informationHeaderHeight","minRecordWidth","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_component_PlayerSelector","players","blackPlayerURI","onUpdateEngineSetting","onUpdatePlayerSetting","onSelectPlayer","onSelectBlackPlayer","whitePlayerURI","onSelectWhitePlayer","onSwapColor","readInputAsNumber","_component_USIEngineOptionDialog","playerUri","onPlayerChange","displayPonderState","ponderState","displayThreadState","threadState","displayMultiPvState","multiPVState","isPlayerSettingEnabled","openPlayerSetting","engineSettingDialog","savePlayerSetting","closePlayerSetting","inputId","selectFile","vars","v","sendOption","okButtonText","cancel","latestEngineSetting","engineNameInput","latest","aIsUSI","bIsUSI","USIEngineOptionDialog","playerSelect","threads","PlayerSelector","hours","defaultValueApplied","buildPlayerSetting","playerURI","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","logEnabled","onChangeHistory","onTogglePasswordVisibility","defaultSetting","select","serverSetting","engineURI","engineSetting","openOptions","duplicate","saveAndClose","optionDialog","optionOk","optionCancel","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","themaOptions","themaOption","pieceImageTypes","boardImageTypes","selectAutoSaveDirectory","returnCodeToName","nameToReturnCode","crlf","lf","cr","displayBoardLabels","readText","attachment","aidx","item","iidx","child","cidx","shouldPreventArrowKeyEventHandling","activeElement","HTMLTextAreaElement","HTMLInputElement","HTMLSelectElement","resolveHandlerFunc","onArrowUp","onArrowDown","onArrowLeft","onArrowRight","handleKeyDownEvent","f","defaultValues","enableStartNumber","updateToggle","startNumber","enableEndNumber","endNumber","maxSecondsPerMove","onLogout","StandardLayout","GameDialog","CSAGameDialog","ResearchDialog","USIEngineManagementDialog","AppSettingDialog","PasteDialog","BussyMessage","ConfirmDialog","InfoMessage","ErrorMessage","AnalysisDialog","CSAGameReadyDialog","body","getElementsByTagName","dataTransfer","files","moveNumber","MenuEvent","NEW_RECORD","OPEN_RECORD","SAVE_RECORD","SAVE_RECORD_AS","COPY_RECORD","COPY_RECORD_CSA","COPY_RECORD_USI_BEFORE","COPY_RECORD_USI_ALL","COPY_BOARD_SFEN","PASTE_RECORD","INSERT_INTERRUPT","INSERT_RESIGN","INSERT_DRAW","INSERT_REPETITION_DRAW","INSERT_MATE","INSERT_TIMEOUT","INSERT_FOUL_WIN","INSERT_FOUL_LOSE","INSERT_ENTERING_OF_KING","INSERT_WIN_BY_DEFAULT","INSERT_LOSS_BY_DEFAULT","REMOVE_CURRENT_MOVE","START_POSITION_EDITING","END_POSITION_EDITING","CHANGE_TURN","INIT_POSITION_STANDARD","INIT_POSITION_HANDICAP_LANCE","INIT_POSITION_HANDICAP_RIGHT_LANCE","INIT_POSITION_HANDICAP_BISHOP","INIT_POSITION_HANDICAP_ROOK","INIT_POSITION_HANDICAP_ROOK_LANCE","INIT_POSITION_HANDICAP_2PIECES","INIT_POSITION_HANDICAP_4PIECES","INIT_POSITION_HANDICAP_6PIECES","INIT_POSITION_HANDICAP_8PIECES","INIT_POSITION_TSUME_SHOGI","INIT_POSITION_TSUME_SHOGI_2KINGS","START_GAME","START_CSA_GAME","STOP_GAME","LOGOUT","START_RESEARCH","STOP_RESEARCH","START_ANALYSIS","STOP_ANALYSIS","FLIP_BOARD","APP_SETTING_DIALOG","registerables","setupIPC","allSettled","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}